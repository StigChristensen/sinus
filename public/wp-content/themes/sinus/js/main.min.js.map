{"version":3,"sources":["main.js"],"names":["scrollTo","value","$","animate","scrollTop","thumbController","addEventListener","thumbImg","each","index","elem","on","src","this","attr","mainSrc","mainImage","parent","image1","Image","image2","animateOut","mainCont","html","append","animateIn","setTimeout","velocity","opacity","duration","delay","display","easing","find","menuLeftController","addEventListeners","menuLeftBtn","menuLeft","toggleClass","links","i","e","removeClass","window","width","show404","type","spinner","hasClass","addClass","container","message","html404","css","margin-bottom","mess","productsController","promise","productsSupplyer","then","products","render","sortPriceController","urlListener","getSearchParams","hash","parts","split","getParams","searchParams","searchController","href","location","indexOf","brands","productsUrl","search","site","site_url","sortHash","onhashchange","event","searchFormController","form","input","preventDefault","val","length","replace","encoded","encodeURI","setUrl","decodedParams","p","decodeURIComponent","par","push","getSearchProducts","returnSortedSearch","params","sort","sortByFrequency","array","frequency","forEach","uniques","filter","a","b","cats","categories","tags","title","desc","description","stripped","toLowerCase","lowerCats","lowerTags","sorted","getTopHits","uniq","_","defer","resolve","Deferred","newProductsPromise","newProducts","price","param","paramtype","splitHash","splitParams","newDirection","pAsc","pDesc","sortUrl","pri","pt","base_url","h","hashBase","paramArray","base","getParam","cat","string","paramsLength","urlDataController","undefined","dataPromise","returnSortedPriceLow","done","fail","returnSortedPriceHigh","returnSortedCat","returnSortedBrand","returnSortedMultiple","getFirstList","getFirst","init","sortedPrice","reject","getSecondList","getSecond","firstPromise","finalSort","brandSorted","catSorted","sortdef","when","data","lower","j","c","sortPrice","initArray","object","parseInt","element","initialSort","f","reverse","storageAvailable","storage","x","setItem","removeItem","setPageIndex","pageIndex","getPageIndex","setMaxPages","max","maxPages","setQueryType","urlSearch","query","urlType","url","urlBrands","urlProducts","getQueryType","initialize","queryParams","key","productsCache","localStorage","JSON","parse","getItem","def","getPosts","action","queryType","offset","limit","dataObj","stringify","ajax","ajax_url","dataType","success","response","error","console","log","loop","loopDef","k","getTemplate","setTemplate","template","ti","te","ci","ce","grid","pages","pi","pe","remove","loopPromise","sortTags","scrollController","setMenuHeight","page","gridCartController","modalController","prepare","stock_quantity","stockIcon","id","featured_src","price_html","splice","join","tempDefer","catHtml","brandHtml","categoryContainer","brandContainer","pCat","pBrand","brand","sortController","detach","initDirection","setDirection","dir","direction","priceSorter","changeDirection","newDir","currentDir","updateView","trig","content","windowHeight","height","scroll","document","requestAnimationFrame","validateEmail","email","regex","test","validateInput","allowedChars","validateNumber","isNumber","shopMsg","msg","atcModal","top","z-index","addBtn","cart","prodTitle","cartNumber","cartInt","text","dataObject","product_id","updatedNum","mainMenu","documentHeight","jQuery","CartController","MenuController","removeFromCartController","reserveFormController","scrollHeaderController","embedVidController","fpBackgroundController","focus","blur","modalRender","modalClose","get_content","contentDef","animateSpinnerIn","modalOverlay","animateSpinnerOut","modal","prods","clickArea","prod_id","getData","imagesHandler","setIndex","firstImg","img","theme_path","bgContainer","controller","getIndex","curImg","newImg","image","n","newIndex","complete","load","fpVideoController","vid","animShowVideo","animOutVideo","vidHeight","vidElement","movingContent","paused","play","getElementById","modifyHeader","linkHeader","validateEmailOnBlur","emailInput","isEmail","validateNameOnBlur","nameInput","isTrustedCharacters","validateNumberOnBlur","phoneInput","submitListener","packData","customer_html","inputArray","customer_email","sendForm","customerData","stripResponse","trim","animateSuccess","validSuccess","submitBtn","inputs","name","productTextController","textIcon","productLeft","productRight","singleProductHeightController","handler","contentHeight","imageHeight","initVideo","vidUrl","vidFrame","vidId","constructedHtml","remBtn","qtyElem","siblings","qty","quantity","animateMenu","updateHeaderOpen","updateHeaderClose","rawIconCss","cartIcon","rawSearchCss","searchForm","rawCartContCss","cartContents","iconRight","searchRight","cartContRight","right","menuLinks","aHref","menuHeaders","navigate","menuBtn","headerLinkRow"],"mappings":"AAgCA,QAASA,UAASC,GAChBC,EAAE,cAAcC,SACdC,UAAWH,GACV,KAGL,QAASI,mBAMP,QAASC,KACPJ,EAAEK,GAAUC,KAAK,SAASC,EAAOC,GAE/BR,EAAEQ,GAAMC,GAAG,QAAS,WAClB,GAAIC,GAAMV,EAAEW,MAAMC,KAAK,OACnBC,EAAUb,EAAEc,GAAWF,KAAK,OAC5BG,EAASf,EAAEW,MAAMI,OAAO,kBAExBC,EAAS,GAAIC,MACjBD,GAAON,IAAMG,CACb,IAAIK,GAAS,GAAID,MACjBC,GAAOR,IAAMA,EAEbS,EAAWJ,GAEXf,EAAEoB,GAAUC,KAAK,IACjBrB,EAAEoB,GAAUE,OAAOJ,GACnBlB,EAAEe,GAAQM,KAAK,IACfrB,EAAEe,GAAQO,OAAON,GAEjBO,EAAUZ,MAEVa,WAAW,WACTrB,wBAOR,QAASoB,GAAUR,GACjBf,EAAEoB,GAAUK,UACVC,QAAW,IACTC,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9B,EAAEe,GAAQU,UACRC,QAAW,IACTC,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAGrE,QAASX,GAAWX,GAClBR,EAAEc,GAAWW,UACXC,QAAW,IACTC,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9B,EAAEe,QAAQU,UACRC,QAAW,IACTC,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OApDrE,GAAIhB,GAAYd,EAAE,QAAQ+B,KAAK,qBAC3BX,EAAWpB,EAAE,QAAQ+B,KAAK,eAE1B1B,GADWL,EAAE,QAAQ+B,KAAK,kBACf/B,EAAE,QAAQ+B,KAAK,wBAoD9B3B,KAGF,QAAS4B,sBAMP,QAASC,KACPjC,EAAEkC,aAAazB,GAAG,QAAS,WACzBT,EAAEmC,GAAUC,YAAY,aAG1BpC,EAAEqC,GAAO/B,KAAK,SAASgC,EAAEC,GACvBvC,EAAEuC,GAAG9B,GAAG,QAAS,WAChBT,EAAEmC,GAAUK,YAAY,eAZ7B,GACIL,IADQnC,EAAEyC,QAAQC,QACP1C,EAAE,QAAQ+B,KAAK,eAC1BM,EAAQrC,EAAEmC,GAAUJ,KAAK,IACzBG,aAAclC,EAAE,QAAQ+B,KAAK,qBAcjCE,IAGF,QAASU,SAAQC,GAkCf,QAASrB,GAAUf,GACXR,EAAE6C,GAASC,SAAS,WACxB9C,EAAE6C,GAASE,SAAS,UAEtB/C,EAAEQ,GAAMgC,YAAY,UAGtB,QAASrB,GAAWX,GAClBR,EAAEQ,GAAMuC,SAAS,UAzCnB,GAAIC,GAAYhD,EAAE,QAAQ+B,KAAK,sBAC3Bc,EAAU7C,EAAE,QAAQ+B,KAAK,WAG7B,IAAc,WAATa,EAAoB,CACvB,GAAIK,GAAU,oEACVC,EAAU,yCAA2CD,EAAU,aACnEjD,GAAEgD,GAAW3B,KAAK6B,GAElBlD,EAAEgD,GAAWG,KACTC,gBAAiB,IAGrB5B,WAAW,WACT,GAAI6B,GAAOrD,EAAEgD,GAAWjB,KAAK,iBAC7BR,GAAU8B,IACT,KAGL,GAAc,WAATT,EAAoB,CACvB,GAAIS,GAAOrD,EAAEgD,GAAWjB,KAAK,iBACxBsB,KAASrD,EAAEqD,GAAMP,SAAS,YAC7B9C,EAAEgD,GAAWG,KACTC,gBAAiB,MAGrB5B,WAAW,WAETL,EAAWkC,IACV,OA6GT,QAASC,sBACP,GAAIC,GAAUC,kBACdD,GAAQE,KAAK,SAASC,GACpBC,OAAOD,KAETE,oBAAoB,OAGtB,QAASC,eA4CP,QAASC,GAAgBC,GACvB,GAAIC,GAAQD,EAAKE,MAAM,OAEnBC,EAAYF,EAAM,GAAGC,MAAM,KAC3BE,EAAeD,EAAU,GAAGD,MAAM,IACtCG,kBAAiBD,GAhDnB,GAAIE,GAAO5B,OAAO6B,SAASD,KACvBN,EAAOtB,OAAO6B,SAASP,KACvBnB,EAAOyB,EAAKE,QAAQ,UACpBC,EAASH,EAAKE,QAAQ,YACtBE,EAAcJ,EAAKE,QAAQ,cAC3BG,EAASL,EAAKE,QAAQ,MAIZ,MAAT3B,GAA0B,KAAX4B,GAAiC,KAAhBC,IAG9BV,EACa,KAAXW,GACkB,KAAhBD,IACHhC,OAAO6B,SAASD,KAAOM,KAAKC,SAAW,aAAeb,GAExDD,EAAgBC,IAEhBc,SAASd,IAGG,KAATnB,GAA0B,KAAX4B,IAChBlB,sBAMRb,OAAOqC,aAAe,SAASC,GAC7BhB,EAAOtB,OAAO6B,SAASP,KACvBW,EAASX,EAAKQ,QAAQ,OAEN,KAAXG,GACkB,KAAhBD,IACHhC,OAAO6B,SAASD,KAAOM,KAAKC,SAAW,aAAeb,GAExDD,EAAgBC,IAEhBc,SAASd,IAaf,QAASiB,wBACP,GAAIC,GAAOjF,EAAE,QAAQ+B,KAAK,qBACtBmD,EAAQlF,EAAEiF,GAAMlD,KAAK,mBAEzB/B,GAAEiF,GAAMxE,GAAG,SAAU,SAASsE,GAC5BA,EAAMI,gBACN,IAAIC,GAAMpF,EAAEkF,GAAOE,KAEnB,IAAKA,EAAIC,OAAS,EAEhB,WADArF,GAAEkF,GAAOtE,KAAK,cAAe,mBAI/B,IAAKwE,EAAIC,OAAS,EAAI,CACM,KAArBD,EAAIb,QAAQ,MACfa,EAAIE,QAAQ,IAAK,IAGnB,IAAIC,GAAUC,UAAUJ,GACpBrB,EAAO,MAAQwB,CAEnBE,QAAO1B,MAKb,QAASK,kBAAiBD,GACxB,GAAKA,EAAL,CACE,GAAIuB,KACJ1F,GAAEmE,GAAc7D,KAAK,SAASgC,EAAEC,GAC9B,GAAIoD,GAAIC,mBAAmBrD,EAEzB,IAAwB,KAAnBoD,EAAEpB,QAAQ,KAAc,CAC3B,GAAIN,GAAQ0B,EAAE1B,MAAM,IACpBjE,GAAEiE,GAAO3D,KAAK,SAASgC,EAAGuD,GACxBH,EAAcI,KAAKD,SAGrBH,GAAcI,KAAKH,IAIzB,IAAII,GAAoBC,mBAAmBN,EAE3CK,GAAkBtC,KAAK,SAASC,GAC9BC,OAAOD,MAQb,QAASsC,oBAAmBC,EAAQvC,GAalC,QAASwC,GAAKxC,GA8CZ,QAASyC,GAAgBC,GACvB,GAAIC,KAEJD,GAAME,QAAQ,SAASvG,GAASsG,EAAUtG,GAAS,GAEnD,IAAIwG,GAAUH,EAAMI,OAAO,SAASzG,GAChC,MAA6B,MAApBsG,EAAUtG,IAGvB,OAAOwG,GAAQL,KAAK,SAASO,EAAGC,GAC5B,MAAOL,GAAUK,GAAKL,EAAUI,KAvDtCzG,EAAE0D,GAAUpD,KAAK,SAASgC,EAAEC,GAC1B,GAAIoE,GAAOpE,EAAEqE,WACTC,EAAOtE,EAAEsE,KACTC,EAAQvE,EAAEuE,MACVC,EAAOxE,EAAEyE,YACTC,EAAWF,EAAKzB,QAAQ,iBAAkB,IAAI4B,cAC9CC,KACAC,IAEaN,GAAMI,cACPH,EAAKG,aAErBlH,GAAE2G,GAAMrG,KAAK,SAASgC,EAAGmE,GACvB,GAAIC,GAAID,EAAES,aACVC,GAAUrB,KAAKY,KAGjB1G,EAAE6G,GAAMvG,KAAK,SAASgC,EAAGmE,GACvB,GAAIC,GAAID,EAAES,aACVE,GAAUtB,KAAKY,IAIjB,KAAK,GAAIpE,GAAI,EAAGA,EAAI2D,EAAOZ,OAAQ/C,IACjCuD,IAAMI,EAAO3D,GAAG4E,cAEgB,KAA3BC,EAAU5C,QAAQsB,MACrBwB,EAAOvB,KAAKvD,GAGkB,KAA3B6E,EAAU7C,QAAQsB,MACrBwB,EAAOvB,KAAKvD,GAGc,KAAvBuE,EAAMvC,QAAQsB,MACjBwB,EAAOvB,KAAKvD,GAGiB,KAA1B0E,EAAS1C,QAAQsB,MACpBwB,EAAOvB,KAAKvD,IAoBlB,IAAI+E,GAAaD,EAAOnB,KAAKC,EAAgBkB,IACzCE,EAAOC,EAAED,KAAKD,GAAY,EAE9BG,GAAMC,QAAQH,GA3EhB,GAAIF,MACAI,EAAQzH,EAAE2H,UAEd,IAAMjE,EAMJwC,EAAKxC,OANU,CACf,GAAIkE,GAAqBpE,kBACzBoE,GAAmBnE,KAAK,SAASoE,GACjB3B,EAAK2B,KAwEvB,MAAOJ,GAGT,QAAS5C,UAASd,GAChB,GAAI+D,GAAOC,EAAOC,EAAWC,EAAWC,EAAaC,CAErD,IAA6B,KAAxBpE,EAAKQ,QAAQ,OAAlB,CAwBA,GApBmC,KAA9BR,EAAKQ,QAAQ,eAChBuD,EAAQ,YACRK,EAAe,aACfvE,oBAAoBuE,IAGc,KAA/BpE,EAAKQ,QAAQ,gBAChBuD,EAAQ,aACRK,EAAe,YACfvE,oBAAoBuE,IAGY,KAA7BpE,EAAKQ,QAAQ,cAChByD,EAAY,YAGiB,KAA1BjE,EAAKQ,QAAQ,WAChByD,EAAY,SAGTA,EAAY,CACfC,EAAYlE,EAAKE,MAAM,KACvBiE,EAAcD,EAAU,GAAGhE,MAAM,IACjC,IAAImE,GAAOF,EAAY3D,QAAQ,aAC3B8D,EAAQH,EAAY3D,QAAQ,aAG9BwD,GADY,IAATK,GAAwB,IAAVC,EACTH,EAAY,GAEZA,EAAY,GAMxBI,QAAQR,EAAOC,EAAOC,IAGxB,QAASM,SAAQR,EAAOC,EAAOC,GAC7B,GAEIO,GAAK1C,EAAK2C,EAGVC,EALAC,EAAIjG,OAAO6B,SAASP,KACpBM,EAAO5B,OAAO6B,SAASD,KAEvBsE,EAAW,SACXC,IAGJ,IAAKF,EAAI,CACP,GAAIG,GAAOxE,EAAKJ,MAAM,IAiBtB,IAhBAwE,EAAWI,EAAK,GAEXf,GACHS,EAAMT,EACNc,EAAW9C,KAAKyC,KAEgB,KAA3BG,EAAEnE,QAAQ,eACbgE,EAAM,YACNK,EAAW9C,KAAKyC,IAEe,KAA5BG,EAAEnE,QAAQ,gBACbgE,EAAM,aACNK,EAAW9C,KAAKyC,KAIfR,EACHlC,EAAMkC,EACNS,EAAKR,EACLY,EAAW9C,KAAK0C,GAChBI,EAAW9C,KAAKD,OACX,CACL,GAA+B,KAA1B6C,EAAEnE,QAAQ,YAAqB,CAClCyD,EAAY,UACZ,IAAIc,GAAWJ,EAAEzE,MAAM,YACnB8E,EAAMD,EAAS,GAAGxD,QAAQ,IAAK,GACnCO,GAAMkD,EACNH,EAAW9C,KAAKkC,GAChBY,EAAW9C,KAAKD,GAGlB,GAA4B,KAAvB6C,EAAEnE,QAAQ,SAAkB,CAC/ByD,EAAY,OACZ,IAAIc,GAAWJ,EAAEzE,MAAM,SACnB8E,EAAMD,EAAS,GAAGxD,QAAQ,IAAK,GACnCO,GAAMkD,EACNH,EAAW9C,KAAKkC,GAChBY,EAAW9C,KAAKD,SAKpB4C,GAAWpE,EAENyD,IACHS,EAAMT,EACNc,EAAW9C,KAAKyC,IAGbR,IACHlC,EAAMkC,EACNS,EAAKR,EACLY,EAAW9C,KAAK0C,GAChBI,EAAW9C,KAAKD,GAIpB,IAAImD,GAAS,EACTA,GAASL,CAEb,IAAIM,GAAeL,EAAWvD,MAC9BrF,GAAE4I,GAAYtI,KAAK,SAASgC,EAAGC,GACnB0G,EAAa,EAAlB3G,IACH0G,GAAUzG,EAAE2E,cAAgB,KAEzB5E,IAAO2G,EAAa,IACvBD,GAAUzG,EAAE2E,iBAIhBzB,OAAOuD,EAAQP,GACfS,kBAAkBX,EAAK1C,EAAK2C,GAG9B,QAAS/C,QAAO1B,EAAMM,GACdA,EAGJ5B,OAAO6B,SAASD,KAAOA,EAAON,EAF9BtB,OAAO6B,SAASP,KAAOA,EAM3B,QAASmF,mBAAkBpB,EAAOC,EAAOC,GACvC,GAAKF,GAAmBqB,SAAVpB,GAAiCoB,SAAVpB,EAAsB,CAEzD,GAAe,cAAVD,EAAwB,CAC3B,GAAIsB,GAAcC,sBAElBD,GAAYE,KAAK,SAAS5F,GACxBC,OAAOD,KAER6F,KAAK,cAKR,GAAe,eAAVzB,EAAyB,CAC5B,GAAIsB,GAAcI,uBAElBJ,GAAYE,KAAK,SAAS5F,GACxBC,OAAOD,KAER6F,KAAK,eAMV,GAAeJ,SAAVrB,GAAuBC,GAASC,EAAY,CAC/C,GAAmB,aAAdA,EAA2B,CAC9B,GAAIoB,GAAcK,gBAAgB1B,EAElCqB,GAAYE,KAAK,SAAS5F,GACxBC,OAAOD,KAER6F,KAAK,cAKR,GAAmB,UAAdvB,EAAwB,CAC3B,GAAIoB,GAAcM,kBAAkB3B,EAEpCqB,GAAYE,KAAK,SAAS5F,GACxBC,OAAOD,KAER6F,KAAK,eAMV,GAAKzB,GAASC,GAASC,EAAW,CAChC,GAAIoB,GAAcO,qBAAqB7B,EAAOC,EAAOC,EAErDoB,GAAYE,KAAK,SAAS5F,GACxBC,OAAOD,KAER6F,KAAK,cAKR3F,sBAGF,QAAS+F,sBAAqB7B,EAAOC,EAAOC,GAG1C,QAAS4B,KACP,GAAIC,GAAW7J,EAAE2H,UAEjB,IAAKG,EAAQ,CACX,GAAe,cAAVA,EAAwB,CAC3B,GAAIgC,GAAOT,sBAEXS,GAAKrG,KAAK,SAASsG,GACjBF,EAASnC,QAAQqC,KAIrB,GAAe,eAAVjC,EAAyB,CAC5B,GAAIgC,GAAON,uBAEXM,GAAKrG,KAAK,SAASsG,GACjBF,EAASnC,QAAQqC,UAKrBF,GAASG,OAAO,iBAElB,OAAOH,GAGT,QAASI,KACP,GAAIC,GAAYlK,EAAE2H,WACdwC,EAAeP,GA6CnB,OA3CAO,GAAa1G,KAAK,SAASsG,GACzB,GAAKA,EAEH,GAAKhC,EAAQ,CACX,GAAIlC,GAAMkC,EAAMb,aAChB,IAAmB,UAAdc,EAAwB,CAC3B,GAAIoC,GAAYV,kBAAkB7D,EAAKkE,EACvCK,GAAU3G,KAAK,SAAS4G,GACtBH,EAAUxC,QAAQ2C,KAItB,GAAmB,aAAdrC,EAA2B,CAC9B,GAAIoC,GAAYX,gBAAgB5D,EAAKkE,EACrCK,GAAU3G,KAAK,SAAS6G,GACtBJ,EAAUxC,QAAQ4C,UAItBJ,GAAUF,OAAO,sBAAuBD,EAI5C,KAAMA,GAAehC,EAAQ,CAC3B,GAAIlC,GAAMkC,EAAMb,aAChB,IAAmB,UAAdc,EAAwB,CACzB,GAAIoC,GAAYV,kBAAkB7D,EAClCuE,GAAU3G,KAAK,SAAS4G,GACtBH,EAAUxC,QAAQ2C,KAItB,GAAmB,aAAdrC,EAA2B,CAC9B,GAAIoC,GAAYX,gBAAgB5D,EAChCuE,GAAU3G,KAAK,SAAS6G,GACtBJ,EAAUxC,QAAQ4C,UAIxBJ,GAAUF,OAAO,iCAIdE,EA3ET,GAAIK,GAAUvK,EAAE2H,UAkFhB,OAJA3H,GAAEwK,KAAMP,KAAkBxG,KAAK,SAASgH,GACtCF,EAAQ7C,QAAQ+C,KAGXF,EAKT,QAASd,iBAAgB1B,EAAOrE,GAyB5B,QAASwC,KACP,GAAIL,GAAMkC,EAAMb,aAChBlH,GAAE0D,GAAUpD,KAAK,SAASgC,EAAEC,GAC1B,GAAIoE,GAAOpE,EAAEqE,WACT8D,IAEJ1K,GAAE2G,GAAMrG,KAAK,SAASqK,EAAEC,GACtBF,EAAM5E,KAAK8E,EAAE1D,iBAGa,KAAvBwD,EAAMnG,QAAQsB,IACjBwB,EAAOvB,KAAKvD,KAIhBkF,EAAMC,QAAQL,GAvClB,GAAIA,MACAI,EAAQzH,EAAE2H,UAEd,IAAMjE,EAuCJwC,QAvCe,CACf,GAAI0B,GAAqBpE,kBAEzBoE,GAAmBnE,KAAK,SAASoE,GAC/B,GAAIhC,GAAMkC,EAAMb,aAChBlH,GAAE6H,GAAavH,KAAK,SAASgC,EAAEC,GAC7B,GAAIoE,GAAOpE,EAAEqE,WACT8D,IAEJ1K,GAAE2G,GAAMrG,KAAK,SAASqK,EAAEC,GACtBF,EAAM5E,KAAK8E,EAAE1D,iBAGa,KAAvBwD,EAAMnG,QAAQsB,IACjBwB,EAAOvB,KAAKvD,KAIhBkF,EAAMC,QAAQL,KAwBlB,MAAOI,GAGT,QAASiC,mBAAkB3B,EAAOrE,GA0B9B,QAASwC,KACP,GAAIL,GAAMkC,EAAMb,aAChBlH,GAAE0D,GAAUpD,KAAK,SAASgC,EAAEC,GAC1B,GAAIiC,GAASjC,EAAEsE,KACX6D,IAEJ1K,GAAEwE,GAAQlE,KAAK,SAASqK,EAAEC,GACxBF,EAAM5E,KAAK8E,EAAE1D,iBAGa,KAAvBwD,EAAMnG,QAAQsB,IACjBwB,EAAOvB,KAAKvD,KAIhBkF,EAAMC,QAAQL,GAxClB,GAAIA,MACAI,EAAQzH,EAAE2H,UAEd,IAAMjE,EAwCJwC,QAxCe,CACf,GAAI0B,GAAqBpE,kBAEzBoE,GAAmBnE,KAAK,SAASoE,GAC/B,GAAIhC,GAAMkC,EAAMb,aAEhBlH,GAAE6H,GAAavH,KAAK,SAASgC,EAAEC,GAC7B,GAAIiC,GAASjC,EAAEsE,KACX6D,IAEJ1K,GAAEwE,GAAQlE,KAAK,SAASqK,EAAEjE,GACxBgE,EAAM5E,KAAKY,EAAEQ,iBAGa,KAAvBwD,EAAMnG,QAAQsB,IACjBwB,EAAOvB,KAAKvD,KAIhBkF,EAAMC,QAAQL,KAwBlB,MAAOI,GAGT,QAAS4B,wBACP,GAAIzB,GAAqBpE,mBACrBiE,EAAQzH,EAAE2H,UA2Bd,OAzBAC,GAAmBnE,KAAK,SAASoE,GAY/B,QAASgD,GAAUpE,EAAEC,GACnB,MAAOD,GAAEqB,MAAQpB,EAAEoB,MAZrB,GAAIgD,MACAzD,IAEJrH,GAAE6H,GAAavH,KAAK,SAASgC,EAAEC,GAC7B,GAAIwI,IACFjD,MAAOkD,SAASzI,EAAiB,eACjC0I,QAAS1I,EAEXuI,GAAUhF,KAAKiF,IAOjB,IAAIG,GAAcJ,EAAU5E,KAAK2E,EAEjC7K,GAAEkL,GAAa5K,KAAK,SAASqK,EAAEQ,GAC7B9D,EAAOvB,KAAKqF,EAAEF,WAGhBxD,EAAMC,QAAQL,KAGTI,EAGT,QAAS+B,yBACP,GAAI5B,GAAqBpE,mBACrBiE,EAAQzH,EAAE2H,UA2Bd,OAzBAC,GAAmBnE,KAAK,SAASoE,GAY/B,QAASgD,GAAUpE,EAAEC,GACnB,MAAOD,GAAEqB,MAAQpB,EAAEoB,MAZrB,GAAIgD,MACAzD,IAEJrH,GAAE6H,GAAavH,KAAK,SAASgC,EAAEC,GAC7B,GAAIwI,IACFjD,MAAOkD,SAASzI,EAAiB,eACjC0I,QAAS1I,EAEXuI,GAAUhF,KAAKiF,IAOjB,IAAIG,GAAcJ,EAAU5E,KAAK2E,GAAWO,SAE5CpL,GAAEkL,GAAa5K,KAAK,SAASqK,EAAEQ,GAC7B9D,EAAOvB,KAAKqF,EAAEF,WAGhBxD,EAAMC,QAAQL,KAGTI,EAIT,QAASjE,oBA8BP,QAAS6H,GAAiBzI,GACxB,IACE,GAAI0I,GAAU7I,OAAOG,GACnB2I,EAAI,kBAGN,OAFAD,GAAQE,QAAQD,EAAGA,GACnBD,EAAQG,WAAWF,IACZ,EAET,MAAMhJ,GACJ,OAAO,GAIX,QAASmJ,GAAanL,GACpBoL,EAAYpL,EAGd,QAASqL,KACP,GAAIjG,GAAIgG,CACR,OAAOhG,GAGT,QAASkG,GAAYC,GACnBC,EAAWD,EAQb,QAASE,KACP,GAAIhI,EAEe,MAAdiI,GACHjI,KAEAkI,GACEtJ,KAAM,MACNmF,MAAO,UAIQ,KAAZoE,IACHnI,EAAQoI,EAAInI,MAAM,KAElBiI,GACEtJ,KAAM,OACNmF,MAAO/D,EAAM,KAIE,KAAdqI,IACHrI,EAAQoI,EAAInI,MAAM,KAElBiI,GACEtJ,KAAM,QACNmF,MAAO/D,EAAM,KAII,KAAhBsI,IACHtI,KAEAkI,GACEtJ,KAAM,MACNmF,MAAO,UAMf,QAASwE,KACP,MAAOL,GAGT,QAASM,KACP,GAAIxJ,GAAYhD,EAAE,QAAQ+B,KAAK,uBAC3B4J,EAAY3L,EAAEgD,GAAWyH,KAAK,QAC9BsB,EAAW/L,EAAEgD,GAAWyH,KAAK,WACtBzK,GAAEgD,GAAWyH,KAAK,OACjBzK,EAAEgD,GAAWyH,KAAK,MAC1BuB,KACAH,EAAYE,GAGdL,GADIC,GAAaA,EAAYI,EAChB,EAEAJ,EAGf,IACIc,IADMb,IACQW,IAClBG,GAAMD,EAAY7J,KAAO,IAAM6J,EAAY1E,MAEtCuD,IACHqB,EAAgBC,aAChBlJ,EAAWmJ,KAAKC,MAAMH,EAAcI,QAAQL,IACxChJ,EACFsJ,EAAItF,QAAQhE,GAEZuJ,KAKN,QAASA,KACP,GACIC,GADAC,EAAYZ,IAEZ3J,EAAOuK,EAAUvK,IAEP,UAATA,IACHsK,EAAS,sBAEG,UAATtK,IACHsK,EAAS,uBAGG,QAATtK,IACHsK,EAAS,yBAKX,IAAIT,IACAW,OAAQ,EACRC,MAAO,GACPtF,MAAOoF,EAAUpF,OAErBuF,EAAUT,KAAKU,UAAUd,EAEzBzM,GAAEwN,MACApB,IAAKzH,KAAK8I,SAAWP,EACrBtK,KAAM,OACN6H,KAAM6C,EACNI,SAAU,OACVC,QAAS,SAASC,GAChBlK,EAAWkK,EAASlK,SACpBiJ,EAAcnB,QAAQkB,EAAKG,KAAKU,UAAU7J,IAC1CsJ,EAAItF,QAAQhE,IAEdmK,MAAO,SAASD,GACdE,QAAQC,IAAIH,MA3KlB,GAAIxB,GAAM3J,OAAO6B,SAASD,KACtBN,EAAOtB,OAAO6B,SAASP,KACvBiJ,EAAMhN,EAAE2H,WACRwE,EAAUC,EAAI7H,QAAQ,UACtB8H,EAAYD,EAAI7H,QAAQ,YACxB0H,EAAYlI,EAAKQ,QAAQ,OACzB+H,EAAcF,EAAI7H,QAAQ,aAE9B,IAAiB,KAAZ4H,GAAgC,KAAdE,GAAkC,KAAdJ,GAAoC,KAAhBK,EAA/D,CAKA,GAAIK,GACAjJ,EAGAiI,EACAI,EAGAW,EANApB,EAAUD,EAAiB,gBAO3Ba,GANSlM,EAAE,QAAQ+B,KAAK,yBAgK5B,OAzJI8E,OACErC,UACAoC,eAEF4F,IAqJGQ,GAGT,QAASrJ,QAAOD,GAuBd,QAASsK,KACPC,QAAUjO,EAAE2H,UAEZ,IAAIgE,GAAY,EACZtK,EAAO,2CAiCX,OAhCIA,IAAQ,wBAEZrB,EAAE0D,GAAUpD,KAAK,SAASgC,EAAGC,GAC3B,GAAI2L,GAAI5L,EAAI,EAER6L,EAAcC,YAAY7L,EAE9B4L,GAAY1K,KAAK,SAAS4K,GACxBhN,GAAQgN,IAGVrO,EAAEuC,EAAEsE,MAAMvG,KAAK,SAASgO,EAAIC,GAC1B1H,KAAKrC,OAAOsB,KAAKyI,KAGnBvO,EAAEuC,EAAEqE,YAAYtG,KAAK,SAASkO,EAAIC,GAChC5H,KAAKD,WAAWd,KAAK2I,KAGlBP,EAAI,KAAO,GAAS7I,EAAJ/C,IACnBqJ,IACAtK,GAAQ,QACRA,GAAQ,SACRA,GAAQ,kCAAoCsK,EAAY,YACxDtK,GAAQ,2BAIZA,GAAQ,QACRA,GAAQ,SAER4M,QAAQvG,QAAQrG,GACT4M,QA3DT,KAAKvK,EAAS2B,OAAS,GAIrB,WADA1C,SAAQ,SAFRA,SAAQ,SAMV,IAAI+L,GAAO1O,EAAE,QAAQ+B,KAAK,sBACtBc,EAAU7C,EAAE,QAAQ+B,KAAK,YACzB4M,EAAQ3O,EAAE,QAAQ+B,KAAK,kBACvBsD,EAAS3B,EAAS2B,MAEhBrF,GAAE6C,GAASC,SAAS,WACxB9C,EAAE6C,GAASE,SAAS,UAGjB4L,GACH3O,EAAE2O,GAAOrO,KAAK,SAASsO,EAAGC,GACxB7O,EAAE6O,GAAIC,UA4CV,IAAIC,GAAcf,GAElBe,GAAYtL,KAAK,SAASpC,GACxBrB,EAAE0O,GAAMpN,OAAOD,GACf2N,SAASnI,MACToI,mBACAC,eACA,IAAIC,GAAOnP,EAAE,QAAQ+B,KAAK,eAC1B/B,GAAEmP,GAAM3M,YAAY,UACpBhB,WAAW,WACT4N,qBACA,GAAIC,kBACH,QAMP,QAASjB,aAAY7L,GAInB,QAAS+M,KACmB,IAArB/M,EAAEgN,iBACLC,EAAY,8FAGTjN,EAAEgN,eAAiB,IACtBC,EAAY,6FAGd,IAAIzI,GAAOxE,EAAEyE,YACTC,EAAWF,EAAKzB,QAAQ,iBAAkB,IAE1C+I,EAAW,qFAAuF9L,EAAEkN,GAAK,IACzGpB,IAAY,iCACZA,GAAYmB,EACZnB,GAAY,aAAe9L,EAAEmN,aAAe,UAAYnN,EAAEuE,MAAQ,8EAClEuH,GAAY,kDAAoD9L,EAAEuE,MAAQ,cAC1EuH,GAAY,8BAAgC9L,EAAEoN,WAAa,sCAAwCpN,EAAEkN,GAAK,iBAAmBlN,EAAEuE,MAAQ,ufACvIuH,GAAY,qFAAuFpH,EAAShD,MAAM,KAAK2L,OAAO,EAAG,IAAIC,KAAK,KAAO,8DACjJxB,GAAY,QAEhByB,UAAUpI,QAAQ2G,GAxBpB,GAAImB,EA4BJ,OA3BIM,WAAY9P,EAAE2H,WA0BlB2H,IACOQ,UAIT,QAASd,UAASnI,GAChB,GAOIkJ,GACAC,EARA7N,EAAWnC,EAAE,QAAQ+B,KAAK,cAC1BkO,EAAoBjQ,EAAEmC,GAAUJ,KAAK,eACrCmO,EAAiBlQ,EAAEmC,GAAUJ,KAAK,WAClC6E,EAAaY,EAAED,KAAKV,EAAKD,YACzBpC,EAASgD,EAAED,KAAKV,EAAKrC,QACrB2L,EAAOnQ,EAAEiQ,GAAmBlO,KAAK,KACjCqO,EAASpQ,EAAEkQ,GAAgBnO,KAAK,IAIf,KAAhBoO,EAAK9K,QAAkC,IAAlB+K,EAAO/K,SAG/BrF,EAAE4G,GAAYtG,KAAK,SAASgC,EAAGyG,GAC7BgH,EAAU,gBAAkBhH,EAAM,sCAAwCA,EAAM,OAChF/I,EAAEiQ,GAAmB3O,OAAOyO,KAG9B/P,EAAEwE,GAAQlE,KAAK,SAASgC,EAAG+N,GACzBL,EAAY,kBAAoBK,EAAQ,sCAAwCA,EAAQ,OACxFrQ,EAAEkQ,GAAgB5O,OAAO0O,KAG3BxO,WAAW,WACT8O,kBACC,OAIP,QAASA,kBACP,GAAInO,GAAWnC,EAAE,QAAQ+B,KAAK,cAC1BkO,EAAoBjQ,EAAEmC,GAAUJ,KAAK,eACrCmO,EAAiBlQ,EAAEmC,GAAUJ,KAAK,WAClCoO,EAAOnQ,EAAEiQ,GAAmBlO,KAAK,KACjCqO,EAASpQ,EAAEkQ,GAAgBnO,KAAK,KAEhC4M,GADW3O,EAAE,QAAQ+B,KAAK,cAClB/B,EAAE,QAAQ+B,KAAK,kBAChBU,QAAO6B,SAASD,IAE3BrE,GAAEmQ,GAAM7P,KAAK,SAASgC,EAAEC,GACtB,GAAIwF,GAAQ/H,EAAEuC,GAAGkI,KAAK,MAEtBzK,GAAEuC,GAAG9B,GAAG,QAAS,WACfT,EAAE2O,GAAOrO,KAAK,SAASgC,EAAEC,GACvB,GAAIX,GAAQ,GAAKU,CACjBtC,GAAEuC,GAAGd,UAAUC,QAAW,IAAKC,SAAU,IAAKC,MAAOA,EAAOC,QAAS,OAAQC,QAAS,IAAI,IAAI,GAAG,OACjGN,WAAW,WACTxB,EAAEuC,GAAGgO,UACJ,IAAI3O,IAET,IAAIoG,GAAY,WACZF,EAAQ,IACZQ,SAAQR,EAAOC,EAAOC,OAK1BhI,EAAEoQ,GAAQ9P,KAAK,SAASgC,EAAEC,GACxB,GAAIwF,GAAQ/H,EAAEuC,GAAGkI,KAAK,QAEtBzK,GAAEuC,GAAG9B,GAAG,QAAS,WACfT,EAAE2O,GAAOrO,KAAK,SAASgC,EAAEC,GACvB,GAAIX,GAAQ,GAAKU,CACjBtC,GAAEuC,GAAGd,UAAUC,QAAW,IAAKC,SAAU,IAAKC,MAAOA,EAAOC,QAAS,OAAQC,QAAS,IAAI,IAAI,GAAG,OACjGN,WAAW,WACTxB,EAAEuC,GAAGgO,UACJ,IAAI3O,IAET,IAAIoG,GAAY,QACZF,EAAQ,IACZQ,SAAQR,EAAOC,EAAOC,OAK5B,QAASpE,qBAAoB4M,GAC3B,QAASC,GAAaC,GACpBC,UAAYD,EAOd,GAAIE,GAAc5Q,EAAE,cAAc+B,KAAK,8BAEjC6O,IAIN5Q,EAAE4Q,GAAanQ,GAAG,QAAS,WAoBzB,QAASoQ,GAAgBC,GACvBtP,WAAW,WACTiP,EAAaK,IACZ,MAtBL,GAAKN,EACHO,EAAaP,EACbC,EAAaD,OAEb,IAAIO,GAAa,KAGnB,IAAoB,QAAfA,EAAuB,CAC1BF,EAAgB,OAChB,IAAI/I,GAAQ,WACZQ,SAAQR,GAGV,GAAoB,SAAfiJ,EAAwB,CAC3BF,EAAgB,MAChB,IAAI/I,GAAQ,YACZQ,SAAQR,MAWd,QAASmH,oBAqBP,QAAS+B,KACP,GAAIC,GAAO,GACNtC,EAAM,IAAMsC,EAAO,IAGtBjR,EAAE2O,EAAM,IAAInM,YAAY,UACxByO,IACAzP,WAAW,WACTyN,oBACC,MA7BP,GAAIN,GAAQ3O,EAAE,QAAQ+B,KAAK,yBACvBmP,EAAUlR,EAAE,QAAQ+B,KAAK,iBAEzBoP,GADSnR,EAAEkR,GAASE,SACLpR,EAAEyC,QAAQ2O,SAEvBzC,IAIN3O,EAAEyC,QAAQhC,GAAG,SAAU,WACrB,GAAI4Q,GAASrR,EAAEsR,UAAUpR,YACrBkR,EAASpR,EAAEkR,GAASE,QAEnBC,IAAYD,EAASD,EAAgB,KACxC1O,OAAO8O,sBAAsB,WAC3BP,QA2KR,QAASQ,eAAcC,GACrB,GAAIC,GAAQ,sHACZ,OAAOA,GAAMC,KAAKF,GAGpB,QAASG,eAAc1M,GACrB,GAAI2M,GAAe,yCACnB,OAAOA,GAAaF,KAAKzM,GAG3B,QAAS4M,gBAAe5M,GACtB,GAAI6M,GAAW,wBACf,OAAOA,GAASJ,KAAKzM,GAmKvB,QAAS8M,SAAQlL,EAAOmL,GAatB,QAAShS,KACPD,EAAEkS,GAAUzQ,UACVC,SAAY,EAAG,GACfyQ,KAAQ,IAAK,KACbC,WAAY,aAAc,gBACxBzQ,SAAU,IAAKC,MAAO,EAAGE,OAAQ,kBAErC9B,EAAEkS,GAAUzQ,UACVC,SAAY,EAAG,GACfyQ,KAAQ,IAAK,KACbC,WAAY,aAAc,eACxBzQ,SAAU,IAAKC,MAAO,KAAME,OAAQ,kBAvB1C,GAAIoQ,GAAWlS,EAAE,QAAQ+B,KAAK,aAE9B,IAAMkQ,EAGJ,GAAIA,GAAMA,MAFV,IAAIA,GAAM,0CAKZ,IAAI5Q,GAAO,OAASyF,EAAQ,QAAUmL,CAEtCjS,GAAEkS,GAAU5Q,OAAOD,GAgBnBG,WAAW,WACTvB,KACC,KAEHuB,WAAW,WACTxB,EAAEkS,GAAU7Q,KAAK,IACjBrB,EAAEkS,GAAU/O,KACViP,UAAW,QAEZ,MAgFL,QAAShD,sBACP,GAAIiD,GAASrS,EAAE,QAAQ+B,KAAK,eACxBuQ,EAAOtS,EAAE,QAAQ+B,KAAK,iBAE1B/B,GAAEqS,GAAQ/R,KAAK,SAASgC,EAAGC,GACzB,GAAIkN,GAAKzP,EAAEW,MAAMC,KAAK,aAClB2R,EAAYvS,EAAEW,MAAMC,KAAK,aAE7BZ,GAAEW,MAAMF,GAAG,QAAS,SAASsE,GAC3BA,EAAMI,gBACN,IAAIqN,GAAaxS,EAAE,QAAQ+B,KAAK,iBAC5B0Q,EAAUzH,SAAShL,EAAE,QAAQ+B,KAAK,iBAAiB2Q,QACnDtG,EAAMzH,KAAK8I,SAAW,oBACtBkF,GACEC,WAAcnD,EAGpBhF,MAAOoC,KAAKU,UAAUoF,GAEtB3S,EAAEwN,MACApB,IAAKA,EACLxJ,KAAM,OACN6H,KAAMA,KACNiD,SAAU,OACVC,QAAS,SAASC,GAChB,GAAIiF,GAAaJ,EAAU,CAC3BD,GAAWnR,KAAKwR,GAChB7S,EAAEsS,GAAMjR,KAAKuM,GACboE,QAAQO,IAMV1E,MAAO,SAASD,GACdE,QAAQC,IAAI,UAAWH,UA+CjC,QAASsB,iBACP1N,WAAW,WACT,GAAIsR,GAAW9S,EAAE,QAAQ+B,KAAK,cAE1BgR,GADc/S,EAAE,QAAQ+B,KAAK,iBACZ/B,EAAE,iBAAiBoR,SAGxCpR,GAAE8S,GAAU3P,KACViO,OAAU2B,EAAiB,IAAM,QAElC,KA51DLC,OAAO1B,UAAU7Q,GAAG,QAAS,WAC3BT,EAAIgT,OAEJ,GAAIC,gBACJ,GAAIC,gBACJ,GAAIC,0BAEJ,GAAIC,uBACJ,GAAIC,wBACJ,GAAIC,oBAEJ,GAAIC,wBACJ1P,cACAmB,uBACAhD,qBACA7B,kBAGAH,EAAE,eAAewT,MAAM,WACrBxT,EAAE,cAAgBW,KAAK8O,GAAK,MAAM1M,SAAS,WAC1C0Q,KAAK,WACNzT,EAAE,SAASwC,YAAY,YAI3B,IAAIuQ,gBAsIA1D,gBAAkB,WA4BpB,QAASqE,GAAYjJ,GACnBzK,EAAEkR,GAAS7P,KAAKoJ,GAEhBjJ,WAAW,WACT,GAAI8R,oBACJlE,qBACAnN,IACAV,KACC,KAGL,QAASU,KAKPjC,EAAE2T,YAAYlT,GAAG,QAAS,WACxBU,MAIJ,QAASyS,GAAYnE,GACnB,GAAIoE,GAAa7T,EAAE2H,WACf8H,EAAKA,CACLrD,KAAMzH,KAAK8I,SAAW,8BACtBkF,YACElD,GAAIA,EAGV,IAAIhF,GAAOoC,KAAKU,UAAUoF,WAa1B,OAXA3S,GAAEwN,MACApB,IAAKA,IACLxJ,KAAM,OACN6H,KAAMA,EACNkD,QAAS,SAASC,GAChBiG,EAAWnM,QAAQkG,IAErBC,MAAO,SAASD,GACdiG,EAAW7J,OAAO4D,MAGfiG,EAGT,QAASC,KACP9T,EAAE+T,cAAcvR,YAAY,UAC5BxC,EAAE6C,SAASL,YAAY,UAGzB,QAASwR,KACPhU,EAAE+T,cAAchR,SAAS,UACzB/C,EAAE6C,SAASE,SAAS,UAGtB,QAASxB,KACPvB,EAAEiU,GAAOzR,YAAY,UAGvB,QAASrB,KACPnB,EAAEiU,GAAOlR,SAAS,UAvFpB,GAAImR,GAAQlU,EAAE,QAAQ+B,KAAK,cACvBkS,EAAQjU,EAAE,QAAQ+B,KAAK,kBACvBmP,EAAUlR,EAAEiU,GAAOlS,KAAK,iBACxBgS,cAAe/T,EAAE,QAAQ+B,KAAK,0BAC9B4R,WAAa3T,EAAEiU,GAAOlS,KAAK,oBAC3Bc,QAAU7C,EAAE,QAAQ+B,KAAK,YAE7B/B,EAAEkU,GAAO5T,KAAK,SAASgC,EAAEC,GACvB,GAAI4R,GAAYnU,EAAEuC,GAAGR,KAAK,cAE1B/B,GAAEmU,GAAW1T,GAAG,QAAS,SAASsE,GAChC,GAAIqP,GAAUpU,EAAEuC,GAAGkI,KAAK,WACxB1F,GAAMI,iBACN2O,GAEA,IAAIO,GAAUT,EAAYQ,EAE1BC,GAAQ/K,KAAK,SAASmB,GACpBuJ,IACAN,EAAYjJ,EAAMwJ,KAEnB1K,KAAK,mBAgpCRgK,uBAAyB,WAiB3B,QAASe,KACPC,EAAS,GACTvU,EAAEwU,GAAU/S,UACVC,QAAW,IACTC,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,MAEnE,KAAK,GAAIQ,GAAI,EAAO,EAAJA,EAAOA,IAAM,CAC3B,GAAImS,GAAMzU,EAAE,WAAWY,KAAK,MAAO+D,KAAK+P,WAAa,aAAepS,EAAI,QAAQ1B,KAAK,QAAS,MAAQ0B,EACtGtC,GAAE2U,GAAarT,OAAOmT,GAGxBjT,WAAWoT,EAAY,KAGzB,QAASA,KACP,GAAIjK,GAAIkK,IACJ3G,EAAIvD,EAAE,CAELuD,GAAI,IACPA,EAAI,EAGN,IAAI4G,GAAS9U,EAAE2U,GAAa5S,KAAK,UAAY4I,GACzCoK,EAAS/U,EAAE2U,GAAa5S,KAAK,UAAYmM,EAE7C3M,GAAUwT,GACV5T,EAAW2T,GAEXP,EAASrG,GAET1M,WAAWoT,EAAY,KAGzB,QAASrT,GAAUyT,GACjBhV,EAAEgV,GAAOvT,UACPC,QAAW,IACTC,SAAU,IAAMC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAGtE,QAASX,GAAW6T,GAClBhV,EAAEgV,GAAOvT,UACPC,QAAW,IACTC,SAAU,IAAMC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAGtE,QAAS+S,KAEP,MADAI,GAAI1U,EACG0U,EAGT,QAASV,GAASW,GAChB3U,EAAQ2U,EAnEV,GAEI3U,GAFAoU,EAAc3U,EAAE,QAAQ+B,KAAK,iBAC7ByS,EAAWxU,EAAE2U,GAAa5S,KAAK,MAG7B4S,IAIDH,GAAYA,EAAS,KACpBA,EAAS,GAAGW,SACdb,IAEAE,EAASY,KAAKd,KA2DhBe,kBAAoB,WAgBtB,QAASpT,KACPqT,EAAIlV,iBAAiB,iBAAkBmV,GACvCD,EAAIlV,iBAAiB,QAASoV,GAGhC,QAASD,KACPvV,EAAE6C,GAASE,SAAS,UAEpB/C,EAAEgD,GAAWvB,UACX2P,OAAUqE,IACR9T,SAAU,IAAKC,MAAO,EAAGE,QAAS,IAAI,IAAI,GAAG,OAEjD9B,EAAE0V,GAAYjU,UACZC,QAAW,IACTC,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9B,EAAE2V,GAAelU,UACf0Q,IAAOsD,EAAY,KACjB9T,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnEN,WAAW,WACJ8T,EAAIM,QACPN,EAAIO,QAEL,KAGL,QAASL,KACPxV,EAAE0V,GAAYjU,UACZC,QAAW,IACTC,SAAU,IAAKC,MAAO,EAAGC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9B,EAAEgD,GAAWvB,UACX2P,OAAU,KACRzP,SAAU,IAAMC,MAAO,IAAKE,QAAS,IAAI,IAAI,GAAG,OAEpD9B,EAAE2V,GAAelU,UACf0Q,IAAO,KACLxQ,SAAU,IAAMC,MAAO,IAAKC,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEtEhC,SAAS,GAvDX,GAAIwV,GAAMhE,SAASwE,eAAe,kBAElC,IAAKR,EAAL,CAGE,GAAIzS,GAAU7C,EAAE,QAAQ+B,KAAK,YACzBiB,EAAYhD,EAAE,QAAQ+B,KAAK,0BAC3B2T,EAAa1V,EAAEgD,GAAWjB,KAAK,oBAC/B4T,EAAgB3V,EAAE,QAAQ+B,KAAK,mBAC/BW,EAAQ1C,EAAEyC,QAAQC,QAClB+S,EAAc/S,EAAM,IAAI,GAAI,GAAI,CAEpCT,OAgDAoR,uBAAyB,WAO3B,QAAS0C,KACP1E,EAASrR,EAAEyC,QAAQvC,YAEdmR,EAAS,KACZrR,EAAEgW,GAAYjT,SAAS,UAEX,IAATsO,GACHrR,EAAEgW,GAAYxT,YAAY,UAb9B,GAEI6O,GAFA2E,EAAahW,EAAE,QAAQ+B,KAAK,mBACpB/B,GAAEyC,QAAQC,OAGtB1C,GAAEyC,QAAQhC,GAAG,SAAUsV,IA6BrB3C,sBAAwB,WAO1B,QAAS6C,KACPjW,EAAEkW,GAAYzV,GAAG,OAAQ,WACvB,GAAIV,GAAQC,EAAEW,MAAMyE,KAEpB,IAAsB,IAAjBrF,EAAMsF,OAIT,YAHKrF,EAAEW,MAAMmC,SAAS,UACpB9C,EAAEW,MAAM6B,YAAY,SAKxB,IAAsB,IAAjBzC,EAAMsF,OAAe,CACxB,GAAI8Q,GAAU3E,cAAczR,EAEvBoW,IAAYnW,EAAEW,MAAMmC,SAAS,UAChC9C,EAAEW,MAAMoC,SAAS,SAGfoT,GAAWnW,EAAEW,MAAMmC,SAAS,UAC9B9C,EAAEW,MAAM6B,YAAY,YAM5B,QAAS4T,KACPpW,EAAEqW,GAAW5V,GAAG,OAAQ,WACtB,GAAIV,GAAQC,EAAEW,MAAMyE,KAEpB,IAAsB,IAAjBrF,EAAMsF,OAIT,YAHKrF,EAAEW,MAAMmC,SAAS,UACpB9C,EAAEW,MAAM6B,YAAY,SAKxB,IAAsB,IAAjBzC,EAAMsF,OAAe,CACxB,GAAIiR,GAAsB1E,cAAc7R,EAEnCuW,IAAwBtW,EAAEW,MAAMmC,SAAS,UAC5C9C,EAAEW,MAAMoC,SAAS,SAGfuT,GAAuBtW,EAAEW,MAAMmC,SAAS,UAC1C9C,EAAEW,MAAM6B,YAAY,YAM5B,QAAS+T,KACPvW,EAAEwW,GAAY/V,GAAG,OAAQ,WACvB,GAAIV,GAAQC,EAAEW,MAAMyE,KAEpB,IAAsB,IAAjBrF,EAAMsF,OAIT,YAHKrF,EAAEW,MAAMmC,SAAS,UACpB9C,EAAEW,MAAM6B,YAAY,SAKxB,IAAsB,IAAjBzC,EAAMsF,OAAe,CACxB,GAAI0M,GAAWD,eAAe/R,EAExBgS,IAAa/R,EAAEW,MAAMmC,SAAS,UAClC9C,EAAEW,MAAMoC,SAAS,SAGdgP,GAAY/R,EAAEW,MAAMmC,SAAS,UAChC9C,EAAEW,MAAM6B,YAAY,YAM5B,QAASiU,KAwBP,QAASC,KAMP,MALA/D,YAAWgE,cAAgB,qBAAuBC,WAAW,GAAG7W,MAAQ,QACxE4S,WAAWgE,eAAiB,oBAAsBC,WAAW,GAAG7W,MAAQ,QACxE4S,WAAWgE,eAAiB,sBAAwBC,WAAW,GAAG7W,MAAQ,QAC1E4S,WAAWkE,eAAiBD,WAAW,GAAG7W,MAEnC4S,WAGT,QAASmE,GAASrM,GAChB,GAAIsM,GAAelK,KAAKU,UAAU9C,EAEhCzK,GAAEwN,MACApB,IAAKzH,KAAK8I,SAAW,kBACrB7K,KAAM,OACN6H,KAAMsM,EACNpJ,QAAS,SAASC,GAChB,GAAIoJ,GAAgBhX,EAAEiX,KAAKrJ,EAEJ,aAAlBoJ,GACHE,KAMJrJ,MAAO,SAASD,GACdE,QAAQC,IAAIH,MAKpB,QAASsJ,KACPlX,EAAEiF,GAAMxD,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKC,MAAO,EAAGE,QAAS,IAAI,IAAI,GAAG,KAAMD,QAAS,SAEhE7B,EAAEmX,cAAc1V,UACdC,SAAY,EAAG,KACbC,SAAU,IAAKC,MAAO,IAAKE,QAAS,IAAI,IAAI,GAAG,KAAMD,QAAS,UAElEL,WAAW,WACTiB,OAAO6B,SAASD,KAAO5B,OAAO6B,SAASD,MACtC,KAlELrE,EAAEoX,GAAW3W,GAAG,QAAS,SAASsE,GAChCA,EAAMI,iBACNkS,OAASrX,EAAEiF,GAAMlD,KAAK,SACtBoV,aAAenX,EAAE,QAAQ+B,KAAK,uBAC9B4Q,cACAiE,cAEA5W,EAAEqX,QAAQ/W,KAAK,SAASgC,EAAGC,GACzB,IAAKvC,EAAEuC,GAAGO,SAAS,UAAkC,IAAtB9C,EAAEuC,GAAG6C,MAAMC,OAA1C,CAGE,GAAI0F,IACFuM,KAAM/U,EAAE+U,KACRvX,MAAOC,EAAEuC,GAAG6C,MAEdwR,YAAW9Q,KAAKiF,KAIpB,IAAIN,GAAOiM,GACXI,GAASrM,KAtGb,GAAIxF,GAAOjF,EAAE,QAAQ+B,KAAK,gBACtBmU,EAAalW,EAAEiF,GAAMlD,KAAK,qBAC1BsU,EAAYrW,EAAEiF,GAAMlD,KAAK,yBACzByU,EAAaxW,EAAEiF,GAAMlD,KAAK,0BAC1BqV,EAAYpX,EAAEiF,GAAMlD,KAAK,kBAoJ7BwU,KACAN,IACAG,IACAK,KA4CEc,sBAAwB,WAS1B,QAASnV,KACPpC,EAAEwX,GAAUpV,YAAY,OACxBpC,EAAEyX,GAAarV,YAAY,OAC3BpC,EAAE0X,GAActV,YAAY,OAX9B,GAAIoV,GAAWxX,EAAE,QAAQ+B,KAAK,cAC1B0V,EAAczX,EAAE,QAAQ+B,KAAK,iBAC7B2V,EAAe1X,EAAE,QAAQ+B,KAAK,iBAElC/B,GAAEwX,GAAU/W,GAAG,QAAS,WACtB2B,MASFZ,WAAWY,EAAa,MAGtBuV,8BAAgC,WAclC,QAASC,KACP,GAAIC,GAAgB7X,EAAE,oBAAoBoR,SACtC0G,EAAc9X,EAAE,mBAAmBoR,QAElCyG,IAA+BA,EAAdC,IACpB9X,EAAE,eAAemD,KACfiO,OAAUyG,EAAgB,OAK9B3I,iBAxBF,GAAIpO,GAAYd,EAAE,kBACLA,GAAE,QAAQ+B,KAAK,SAEvBjB,IAAaA,EAAU,KACtBA,EAAU,GAAGqU,SACfyC,IAEA9W,EAAUsU,KAAKwC,KAqBjBtE,mBAAqB,WASvB,QAASyE,KACP,GAAIC,GAAShY,EAAEiY,GAAUrX,KAAK,YAC1B,IAA6B,KAAxBoX,EAAOzT,QAAQ,KAClB,GAAI2T,GAAQF,EAAO/T,MAAM,KACrBwL,EAAKyI,EAAM,OACV,CACL,GAAIA,GAAQF,EAAO/T,MAAM,IACzBwL,GAAKyI,EAAM,GAGjB,GAAIxV,GAAQ1C,EAAEyC,QAAQC,QAClB0O,EAAY1O,EAAM,IAAK,GAAM,GAAM,EAEnCyV,EAAkB,kBAAoBzV,EAAQ,aAAe0O,EAAS,wCAA0C3B,EAAK,kEAEzHzP,GAAEiY,GAAU5W,KAAK8W,GAvBnB,GAAIF,GAAWjY,EAAE,QAAQ+B,KAAK,iBAEzBkW,GAAS5S,OAAS,GACrB0S,KAmEA5E,yBAA2B,WAC3B,GAAIb,GAAOtS,EAAE,QAAQ+B,KAAK,kBACtBqW,EAASpY,EAAEsS,GAAMvQ,KAAK,eAE5B/B,GAAEoY,GAAQ9X,KAAK,SAASgC,EAAGC,GACzB,GAAIkN,GAAKzP,EAAEW,MAAMC,KAAK,WAClByX,EAAUrY,EAAEW,MAAM2X,SAAS,mBAC3BC,EAAMvN,SAAShL,EAAEqY,GAASzX,KAAK,YAGnCZ,GAAEW,MAAMF,GAAG,QAAS,WAClB,GAAI+R,GAAaxS,EAAE,QAAQ+B,KAAK,iBAC5B0Q,EAAUzH,SAAShL,EAAE,QAAQ+B,KAAK,iBAAiB2Q,QACnDtG,EAAMzH,KAAK8I,SAAW,uBACtBkF,GACEC,WAAcnD,EACd+I,SAAYD,EAGlB9N,MAAOoC,KAAKU,UAAUoF,GAEtB3S,EAAEwN,MACApB,IAAKA,EACLxJ,KAAM,OACN6H,KAAMA,KACNiD,SAAU,OACVC,QAAS,SAASC,GAChB,GAAIiF,GAAaJ,EAAU8F,CAC3B/F,GAAWnR,KAAKwR,GAChB7S,EAAEsS,GAAMjR,KAAKuM,GACbnL,OAAO6B,SAASD,KAAO5B,OAAO6B,SAASD,MAEzCwJ,MAAO,SAASD,GACdE,QAAQC,IAAI,UAAWH,WAoB7BsF,eAAiB,WAaf,QAASuF,KACFzY,EAAE8S,GAAUhQ,SAAS,WACxB9C,EAAE8S,GAAU3P,KACVtB,QAAW,UAEbL,WAAW,WACTxB,EAAE8S,GAAUtQ,YAAY,UACxBxC,EAAEW,MAAMoC,SAAS,QACjBjD,SAAS,OACTM,IACKsC,EAAQ,KACXgW,KAGD,OAGH1Y,EAAE8S,GAAU/P,SAAS,UACrB/C,EAAEW,MAAM6B,YAAY,QACfE,EAAQ,KACTiW,IAGJnX,WAAW,WACTxB,EAAE8S,GAAU3P,KACVtB,QAAW,QACV,QAKT,QAAS6W,KACP,GAAIE,GAAa5Y,EAAE6Y,GAAU1V,IAAI,SAC7B2V,EAAe9Y,EAAE+Y,GAAY5V,IAAI,SACjC6V,EAAiBhZ,EAAEiZ,GAAc9V,IAAI,SACrC+V,EAAYlO,SAAS4N,EAAWtT,QAAQ,KAAM,KAC9C6T,EAAcnO,SAAS8N,EAAaxT,QAAQ,KAAM,KAClD8T,EAAgBpO,SAASgO,EAAe1T,QAAQ,KAAM,IAEtDtF,GAAE6Y,GAAUpX,UACV4X,MAASH,EAAY,IAAM,OACzBvX,SAAU,IAAKC,MAAO,IAAKE,QAAS,IAAI,IAAI,GAAG,OAEnD9B,EAAE+Y,GAAYtX,UACZ4X,MAASF,EAAc,IAAM,OAC3BxX,SAAU,IAAKC,MAAO,EAAGE,QAAS,IAAI,IAAI,GAAG,OAEjD9B,EAAEiZ,GAAcxX,UACd4X,MAASD,EAAgB,IAAM,OAC7BzX,SAAU,IAAKC,MAAO,IAAKE,QAAS,IAAI,IAAI,GAAG,OAGzD,QAAS6W,KACH3Y,EAAE6Y,GAAUpX,UACV4X,MAAS,KACP1X,SAAU,IAAKC,MAAO,IAAKE,QAAS,IAAI,IAAI,GAAG,OAEnD9B,EAAE+Y,GAAYtX,UACZ4X,MAAS,MACP1X,SAAU,IAAKC,MAAO,IAAKE,QAAS,IAAI,IAAI,GAAG,OAEnD9B,EAAEiZ,GAAcxX,UACd4X,MAAS,KACP1X,SAAU,IAAKC,MAAO,IAAKE,QAAS,IAAI,IAAI,GAAG,OAGzD,QAAS1B,KACPJ,EAAEsZ,GAAW7Y,GAAG,QAAS,SAAS8B,GAChCA,EAAE4C,gBACF,IAAIoU,GAASvZ,EAAEW,MAAMoB,KAAK,KACtBsC,EAAOrE,EAAEuZ,GAAO3Y,KAAK,OAEzBZ,GAAEsZ,GAAWhZ,KAAK,SAASgC,EAAG9B,GAC5B,GAAIoB,GAAY,GAAJU,CAEZtC,GAAEQ,GAAMiB,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKC,MAAOA,EAAOE,OAAQ,oBAI3C9B,EAAEwZ,GAAalZ,KAAK,SAASgC,EAAG9B,GAC9B,GAAIoB,GAAY,GAAJU,CAEZtC,GAAEQ,GAAMiB,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKC,MAAOA,EAAOE,OAAQ,oBAG3CN,WAAWiY,EAASpV,GAAO,QAI/B,QAASoV,GAASpV,GAChB7C,WAAW,WACTxB,EAAE0Z,GAASlX,YAAY,QACvBxC,EAAE8S,GAAU/P,SAAS,UACrB4V,KACC,KAEHnX,WAAW,WACTiB,OAAO6B,SAASD,KAAOA,GACtB,MAlHT,GAAIqV,GAAU1Z,EAAE,QAAQ+B,KAAK,cACzB+Q,EAAW9S,EAAE,QAAQ+B,KAAK,cAC1BuX,EAAYtZ,EAAE8S,GAAU/Q,KAAK,MAC7ByX,EAAcxZ,EAAE8S,GAAU/Q,KAAK,MAC/BgX,EAAa/Y,EAAE,QAAQ+B,KAAK,gBAC5B8W,EAAW7Y,EAAE,QAAQ+B,KAAK,cAC1BkX,EAAejZ,EAAE,QAAQ+B,KAAK,6BAC9BW,EAAQ1C,EAAEyC,QAAQC,OAClBwM,iBAEAlP,EAAE0Z,GAASjZ,GAAG,QAASgY,IA4GzBxF,eAAiB,WACnB,GAAI4F,GAAW7Y,EAAE,QAAQ+B,KAAK,cAC1B4X,EAAgB3Z,EAAE,QAAQ+B,KAAK,oBAC/BkX,EAAejZ,EAAE,QAAQ+B,KAAK,mCAC9BW,OAAQ1C,EAAEyC,QAAQC,QAEtB1C,EAAE6Y,GAAUpY,GAAG,QAAS,SAAS8B,GAC1BG,MAAQ,KACNiX,EAAc7W,SAAS,UAC1B9C,EAAEiZ,GAAc9V,KACdgP,IAAO,SAGTnS,EAAEiZ,GAAc9V,KACdgP,IAAO,SAGXnS,EAAEiZ,GAAc7W,YAAY,WAE5BK,OAAO6B,SAASD,KAAOM,KAAKC,SAAW","file":"main.min.js","sourcesContent":["// Test if ie10 - adds class \"ie10\" to HTML tag, if true. - Excludes IE11\nif (/*@cc_on!@*/false && document.documentMode === 10) {\n    document.documentElement.className+=' ie10';\n}\n\njQuery(document).on('ready', function() {\n  $ = jQuery;\n\n  new CartController();\n  new MenuController();\n  new removeFromCartController();\n  // new gridCartController();\n  new reserveFormController();\n  new scrollHeaderController();\n  new embedVidController();\n  // new fpVideoController();\n  new fpBackgroundController();\n  urlListener();\n  searchFormController();\n  menuLeftController();\n  thumbController();\n\n  // labels for input fields\n  $(\"form :input\").focus(function() {\n    $(\"label[for='\" + this.id + \"']\").addClass(\"focus\");\n  }).blur(function() {\n    $(\"label\").removeClass(\"focus\");\n  });\n}); // End Ready\n\nvar documentHeight;\n\nfunction scrollTo(value) {\n  $('html, body').animate({\n    scrollTop: value\n  }, 700);\n}\n\nfunction thumbController() {\n  var mainImage = $('body').find('.main-image > img');\n  var mainCont = $('body').find('.main-image');\n  var thumbObj = $('body').find('.product-image');\n  var thumbImg = $('body').find('.product-image > img');\n\n  function addEventListener() {\n    $(thumbImg).each(function(index, elem) {\n\n      $(elem).on('click', function() {\n        var src = $(this).attr('src');\n        var mainSrc = $(mainImage).attr('src');\n        var parent = $(this).parent('.product-image');\n\n        var image1 = new Image();\n        image1.src = mainSrc;\n        var image2 = new Image();\n        image2.src = src;\n\n        animateOut(parent);\n\n        $(mainCont).html('');\n        $(mainCont).append(image2);\n        $(parent).html('');\n        $(parent).append(image1);\n\n        animateIn(this);\n\n        setTimeout(function() {\n          thumbController();\n        });\n      });\n\n    });\n  }\n\n  function animateIn(parent) {\n    $(mainCont).velocity({\n      'opacity': 1\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(parent).velocity({\n      'opacity': 1\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function animateOut(elem) {\n    $(mainImage).velocity({\n      'opacity': 0\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(parent).velocity({\n      'opacity': 0\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  addEventListener()\n}\n\nfunction menuLeftController() {\n  var width = $(window).width(),\n      menuLeft = $('body').find('.menu-left'),\n      links = $(menuLeft).find('p');\n      menuLeftBtn = $('body').find('.menu-left-button');\n\n  function addEventListeners() {\n    $(menuLeftBtn).on('click', function() {\n      $(menuLeft).toggleClass('showing');\n    });\n\n    $(links).each(function(i,e) {\n      $(e).on('click', function() {\n       $(menuLeft).removeClass('showing');\n      });\n    });\n  }\n\n  addEventListeners();\n}\n\nfunction show404(type) {\n  var container = $('body').find('.product-list-grid'),\n      spinner = $('body').find('.spinner');\n      html404;\n\n  if ( type === 'search' ) {\n    var message = 'Der er desværre ingen resultater, der matcher det du søger efter.';\n    var html404 = '<div class=\"contained-404 hidden\"><h3>' + message + '</h3></div>';\n    $(container).html(html404);\n\n    $(container).css({\n        'margin-bottom': 0\n      });\n\n    setTimeout(function() {\n      var mess = $(container).find('.contained-404');\n      animateIn(mess);\n    }, 200);\n  }\n\n  if ( type === 'remove' ) {\n    var mess = $(container).find('.contained-404');\n    if ( mess && !$(mess).hasClass('hidden') ) {\n      $(container).css({\n          'margin-bottom': 100\n        });\n\n      setTimeout(function() {\n\n        animateOut(mess);\n      }, 200);\n    }\n  }\n\n  function animateIn(elem) {\n    if ( !$(spinner).hasClass('hidden') ) {\n      $(spinner).addClass('hidden');\n    }\n    $(elem).removeClass('hidden');\n  }\n\n  function animateOut(elem) {\n    $(elem).addClass('hidden');\n  }\n}\n\nvar modalController = function() {\n  var prods = $('body').find('li.product'),\n      modal = $('body').find('.product-modal'),\n      content = $(modal).find('.modal-content');\n      modalOverlay = $('body').find('.product-modal-overlay'),\n      modalClose = $(modal).find('.modal-close-btn'),\n      spinner = $('body').find('.spinner');\n\n  $(prods).each(function(i,e) {\n    var clickArea = $(e).find('.click-area');\n\n    $(clickArea).on('click', function(event) {\n      var prod_id = $(e).data('singleid');\n      event.preventDefault();\n      animateSpinnerIn();\n\n      var getData = get_content(prod_id);\n\n      getData.done(function(data) {\n        animateSpinnerOut();\n        modalRender(data, modal);\n      })\n      .fail(function() {\n        return;\n      });\n    });\n  });\n\n  function modalRender(data) {\n    $(content).html(data);\n\n    setTimeout(function() {\n      new embedVidController();\n      gridCartController();\n      addEventListeners();\n      animateIn();\n    }, 200);\n  }\n\n  function addEventListeners() {\n    // $(modalOverlay).on('click', function() {\n    //   animateOut();\n    // });\n\n    $(modalClose).on('click', function() {\n      animateOut();\n    });\n  }\n\n  function get_content(id) {\n    var contentDef = $.Deferred(),\n        id = id;\n        url = site.ajax_url + '?action=sinus_getsinglehtml',\n        dataObject = {\n          id: id\n        }\n\n    var data = JSON.stringify(dataObject);\n\n    $.ajax({\n      url: url,\n      type: \"POST\",\n      data: data,\n      success: function(response) {\n        contentDef.resolve(response);\n      },\n      error: function(response) {\n        contentDef.reject(response);\n      }\n    });\n    return contentDef;\n  }\n\n  function animateSpinnerIn() {\n    $(modalOverlay).removeClass('hidden');\n    $(spinner).removeClass('hidden');\n  }\n\n  function animateSpinnerOut() {\n    $(modalOverlay).addClass('hidden');\n    $(spinner).addClass('hidden');\n  }\n\n  function animateIn() {\n    $(modal).removeClass('hidden');\n  }\n\n  function animateOut() {\n    $(modal).addClass('hidden');\n  }\n\n}\n\nfunction productsController() {\n  var promise = productsSupplyer();\n  promise.then(function(products) {\n    render(products);\n  });\n  sortPriceController('asc');\n}\n\nfunction urlListener() {\n  var href = window.location.href,\n      hash = window.location.hash,\n      type = href.indexOf('/type/'),\n      brands = href.indexOf('/brands/'),\n      productsUrl = href.indexOf('/products/'),\n      search = href.indexOf('#s='),\n      initParams,\n      base_url;\n\n  if ( type === -1 && brands === -1 && productsUrl === -1 ) {\n\n  } else {\n    if ( hash ) {\n      if ( search !== -1 ) {\n        if ( productsUrl === -1 ) {\n          window.location.href = site.site_url + '/products/' + hash;\n        }\n        getSearchParams(hash);\n      } else {\n        sortHash(hash);\n      }\n    } else {\n      if ( type !== -1 || brands !== -1 ) {\n          productsController();\n          // console.log('products');\n        }\n      }\n    }\n\n  window.onhashchange = function(event) {\n    hash = window.location.hash;\n    search = hash.indexOf('#s=');\n\n    if ( search !== -1 ) {\n      if ( productsUrl === -1 ) {\n        window.location.href = site.site_url + '/products/' + hash;\n      }\n      getSearchParams(hash);\n    } else {\n      sortHash(hash);\n    }\n  }\n\n  function getSearchParams(hash) {\n    var parts = hash.split('#s=');\n\n    var getParams = parts[1].split('&');\n    var searchParams = getParams[0].split('+');\n    searchController(searchParams);\n  }\n}\n\nfunction searchFormController() {\n  var form = $('body').find('form.sinus-search'),\n      input = $(form).find('input[type=text]');\n\n  $(form).on('submit', function(event) {\n    event.preventDefault();\n    var val = $(input).val();\n\n    if ( val.length < 1 ) {\n      $(input).attr('placeholder', 'Mindst 3 tegn...');\n      return;\n    }\n\n    if ( val.length > 1 ) {\n      if ( val.indexOf(' ') !== -1 ) {\n        val.replace(' ', '+');\n      }\n\n      var encoded = encodeURI(val);\n      var hash = '#s=' + encoded;\n\n      setUrl(hash);\n    }\n  });\n}\n\nfunction searchController(searchParams) {\n  if ( searchParams ) {\n    var decodedParams = [];\n    $(searchParams).each(function(i,e) {\n      var p = decodeURIComponent(e);\n\n        if ( p.indexOf(' ') !== -1 ) {\n          var split = p.split(' ');\n          $(split).each(function(i, par) {\n            decodedParams.push(par);\n          });\n        } else {\n          decodedParams.push(p);\n        }\n    });\n\n    var getSearchProducts = returnSortedSearch(decodedParams);\n\n    getSearchProducts.then(function(products) {\n      render(products);\n    });\n\n  } else {\n    return;\n  }\n}\n\nfunction returnSortedSearch(params, products) {\n  var sorted = [],\n      defer = $.Deferred();\n\n  if ( !products ) {\n    var newProductsPromise = productsSupplyer();\n    newProductsPromise.then(function(newProducts) {\n      var results = sort(newProducts);\n    });\n  } else {\n    sort(products);\n  }\n\n  function sort(products) {\n    $(products).each(function(i,e) {\n      var cats = e.categories,\n          tags = e.tags,\n          title = e.title,\n          desc = e.description,\n          stripped = desc.replace(/<(?:.|\\n)*?>/gm, '').toLowerCase(),\n          lowerCats = [],\n          lowerTags = [];\n\n      var lowerTitle = title.toLowerCase();\n      var lowerDesc = desc.toLowerCase();\n\n      $(cats).each(function(i, a) {\n        var b = a.toLowerCase();\n        lowerCats.push(b);\n      });\n\n      $(tags).each(function(i, a) {\n        var b = a.toLowerCase();\n        lowerTags.push(b);\n      });\n\n\n      for (var i = 0; i < params.length; i++) {\n        par = params[i].toLowerCase();\n\n        if ( lowerCats.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n\n        if ( lowerTags.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n\n        if ( title.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n\n        if ( stripped.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n      }\n\n    });\n\n    function sortByFrequency(array) {\n      var frequency = {};\n\n      array.forEach(function(value) { frequency[value] = 0; });\n\n      var uniques = array.filter(function(value) {\n          return ++frequency[value] == 1;\n      });\n\n      return uniques.sort(function(a, b) {\n          return frequency[b] - frequency[a];\n      });\n    }\n\n    var getTopHits = sorted.sort(sortByFrequency(sorted));\n    var uniq = _.uniq(getTopHits, true);\n\n    defer.resolve(uniq);\n  }\n\n  return defer;\n}\n\nfunction sortHash(hash) {\n  var price, param, paramtype, splitHash, splitParams, newDirection;\n\n  if ( hash.indexOf('#s=') !== -1 ) {\n    return;\n  }\n\n  if ( hash.indexOf('price_asc') !== -1 ) {\n    price = 'price_asc';\n    newDirection = 'price_desc';\n    sortPriceController(newDirection);\n  }\n\n  if ( hash.indexOf('price_desc') !== -1 ) {\n    price = 'price_desc';\n    newDirection = 'price_asc';\n    sortPriceController(newDirection);\n  }\n\n  if ( hash.indexOf('category') !== -1 ) {\n    paramtype = 'category';\n  }\n\n  if ( hash.indexOf('brand') !== -1 ) {\n    paramtype = 'brand';\n  }\n\n  if ( paramtype ) {\n    splitHash = hash.split('=');\n    splitParams = splitHash[1].split('+');\n    var pAsc = splitParams.indexOf('price_asc');\n    var pDesc = splitParams.indexOf('price_desc');\n\n    if ( pAsc === 0 || pDesc === 0 ) {\n      param = splitParams[2];\n    } else {\n      param = splitParams[1];\n    }\n  }\n\n  // console.log(price, paramtype, param);\n\n  sortUrl(price, param, paramtype);\n}\n\nfunction sortUrl(price, param, paramtype) {\n  var h = window.location.hash,\n      href = window.location.href,\n      pri, par, pt,\n      hashBase = '#sort=',\n      paramArray = [],\n      base_url;\n\n  if ( h ) {\n    var base = href.split('#');\n    base_url = base[0];\n\n    if ( price ) {\n      pri = price;\n      paramArray.push(pri);\n    } else {\n      if ( h.indexOf('price_asc') !== -1 ) {\n        pri = 'price_asc';\n        paramArray.push(pri);\n      }\n      if ( h.indexOf('price_desc') !== -1 ) {\n        pri = 'price_desc';\n        paramArray.push(pri);\n      }\n    }\n\n    if ( param ) {\n      par = param;\n      pt = paramtype;\n      paramArray.push(pt);\n      paramArray.push(par);\n    } else {\n      if ( h.indexOf('category') !== -1 ) {\n        paramtype = 'category';\n        var getParam = h.split('category');\n        var cat = getParam[1].replace('+', '');\n        par = cat;\n        paramArray.push(paramtype);\n        paramArray.push(par);\n      }\n\n      if ( h.indexOf('brand') !== -1 ) {\n        paramtype = 'brand';\n        var getParam = h.split('brand');\n        var cat = getParam[1].replace('+', '');\n        par = cat;\n        paramArray.push(paramtype);\n        paramArray.push(par);\n      }\n    }\n\n  } else {\n    base_url = href;\n\n    if ( price ) {\n      pri = price;\n      paramArray.push(pri);\n    }\n\n    if ( param ) {\n      par = param;\n      pt = paramtype;\n      paramArray.push(pt);\n      paramArray.push(par);\n    }\n  }\n\n  var string = '';\n      string = hashBase;\n\n  var paramsLength = paramArray.length;\n  $(paramArray).each(function(i, e) {\n    if ( i < (paramsLength-1) ) {\n      string += e.toLowerCase() + '+';\n    }\n    if ( i === (paramsLength-1) ) {\n      string += e.toLowerCase();\n    }\n  });\n\n  setUrl(string, base_url);\n  urlDataController(pri, par, pt);\n}\n\nfunction setUrl(hash, href) {\n  if ( !href ) {\n    window.location.hash = hash;\n  } else {\n    window.location.href = href + hash;\n  }\n}\n\nfunction urlDataController(price, param, paramtype) {\n  if ( price && param === undefined && param === undefined ) {\n\n    if ( price === 'price_asc' ) {\n      var dataPromise = returnSortedPriceLow();\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          // console.log('failed!');\n      });\n    }\n\n    if ( price === 'price_desc' ) {\n      var dataPromise = returnSortedPriceHigh();\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          // console.log('failed!');\n      });\n    }\n  }\n\n  if ( price === undefined && param && paramtype ) {\n    if ( paramtype === 'category' ) {\n      var dataPromise = returnSortedCat(param);\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          // console.log('failed!');\n      });\n    }\n\n    if ( paramtype === 'brand' ) {\n      var dataPromise = returnSortedBrand(param);\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          // console.log('failed!');\n      });\n    }\n  }\n\n  if ( price && param && paramtype) {\n    var dataPromise = returnSortedMultiple(price, param, paramtype);\n\n    dataPromise.done(function(products) {\n      render(products);\n    })\n    .fail(function() {\n        // console.log('failed!');\n    });\n  }\n\n  sortPriceController();\n}\n\nfunction returnSortedMultiple(price, param, paramtype) {\n  var sortdef = $.Deferred();\n\n  function getFirstList() {\n    var getFirst = $.Deferred();\n\n    if ( price ) {\n      if ( price === 'price_asc' ) {\n        var init = returnSortedPriceLow();\n\n        init.then(function(sortedPrice) {\n          getFirst.resolve(sortedPrice);\n        });\n      }\n\n      if ( price === 'price_desc' ) {\n        var init = returnSortedPriceHigh();\n\n        init.then(function(sortedPrice) {\n          getFirst.resolve(sortedPrice);\n        });\n      }\n\n    } else {\n      getFirst.reject('first rejected');\n    }\n    return getFirst;\n  }\n\n  function getSecondList() {\n    var getSecond = $.Deferred();\n    var firstPromise = getFirstList();\n\n    firstPromise.then(function(sortedPrice) {\n      if ( sortedPrice ) {\n\n        if ( param ) {\n          var par = param.toLowerCase();\n          if ( paramtype === 'brand' ) {\n            var finalSort = returnSortedBrand(par, sortedPrice);\n            finalSort.then(function(brandSorted) {\n              getSecond.resolve(brandSorted);\n            });\n          }\n\n          if ( paramtype === 'category' ) {\n            var finalSort = returnSortedCat(par, sortedPrice);\n            finalSort.then(function(catSorted) {\n              getSecond.resolve(catSorted);\n            });\n          }\n        } else {\n          getSecond.reject('rejected - no param', sortedPrice);\n        }\n      }\n\n      if ( !sortedPrice && param ) {\n        var par = param.toLowerCase();\n        if ( paramtype === 'brand' ) {\n            var finalSort = returnSortedBrand(par);\n            finalSort.then(function(brandSorted) {\n              getSecond.resolve(brandSorted);\n            });\n          }\n\n          if ( paramtype === 'category' ) {\n            var finalSort = returnSortedCat(par);\n            finalSort.then(function(catSorted) {\n              getSecond.resolve(catSorted);\n            });\n          }\n      } else {\n        getSecond.reject('rejected !products && param');\n      }\n    });\n\n    return getSecond;\n  }\n\n  $.when( getSecondList() ).then(function(data) {\n    sortdef.resolve(data);\n  });\n\n  return sortdef;\n}\n\n\n\nfunction returnSortedCat(param, products) {\n  var sorted = [],\n      defer = $.Deferred();\n\n  if ( !products ) {\n    var newProductsPromise = productsSupplyer();\n\n    newProductsPromise.then(function(newProducts) {\n      var par = param.toLowerCase();\n      $(newProducts).each(function(i,e) {\n        var cats = e.categories;\n        var lower = [];\n\n        $(cats).each(function(j,c) {\n          lower.push(c.toLowerCase());\n        });\n\n        if ( lower.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    });\n  } else {\n    function sort() {\n      var par = param.toLowerCase();\n      $(products).each(function(i,e) {\n        var cats = e.categories;\n        var lower = [];\n\n        $(cats).each(function(j,c) {\n          lower.push(c.toLowerCase());\n        });\n\n        if ( lower.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    }\n\n    sort();\n  }\n\n  return defer;\n}\n\nfunction returnSortedBrand(param, products) {\n  var sorted = [];\n  var defer = $.Deferred();\n\n  if ( !products ) {\n    var newProductsPromise = productsSupplyer();\n\n    newProductsPromise.then(function(newProducts) {\n      var par = param.toLowerCase();\n\n      $(newProducts).each(function(i,e) {\n        var brands = e.tags;\n        var lower = [];\n\n        $(brands).each(function(j,b) {\n          lower.push(b.toLowerCase());\n        });\n\n        if ( lower.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    });\n  } else {\n    function sort() {\n      var par = param.toLowerCase();\n      $(products).each(function(i,e) {\n        var brands = e.tags;\n        var lower = [];\n\n        $(brands).each(function(j,c) {\n          lower.push(c.toLowerCase());\n        });\n\n        if ( lower.indexOf(par) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    }\n\n    sort();\n  }\n\n  return defer;\n}\n\nfunction returnSortedPriceLow() {\n  var newProductsPromise = productsSupplyer(),\n      defer = $.Deferred();\n\n  newProductsPromise.then(function(newProducts) {\n    var initArray = [],\n        sorted = [];\n\n    $(newProducts).each(function(i,e) {\n      var object = {\n        price: parseInt(e['regular_price']),\n        element: e\n      }\n      initArray.push(object);\n    });\n\n    function sortPrice(a,b) {\n      return a.price - b.price;\n    }\n\n    var initialSort = initArray.sort(sortPrice);\n\n    $(initialSort).each(function(j,f) {\n      sorted.push(f.element);\n    });\n\n    defer.resolve(sorted);\n  });\n\n  return defer;\n}\n\nfunction returnSortedPriceHigh() {\n  var newProductsPromise = productsSupplyer(),\n      defer = $.Deferred();\n\n  newProductsPromise.then(function(newProducts) {\n    var initArray = [],\n        sorted = [];\n\n    $(newProducts).each(function(i,e) {\n      var object = {\n        price: parseInt(e['regular_price']),\n        element: e\n      }\n      initArray.push(object);\n    });\n\n    function sortPrice(a,b) {\n      return a.price - b.price;\n    }\n\n    var initialSort = initArray.sort(sortPrice).reverse();\n\n    $(initialSort).each(function(j,f) {\n      sorted.push(f.element);\n    });\n\n    defer.resolve(sorted);\n  });\n\n  return defer;\n}\n\n\nfunction productsSupplyer() {\n  var url = window.location.href;\n  var hash = window.location.hash;\n  var def = $.Deferred();\n  var urlType = url.indexOf('/type/'),\n      urlBrands = url.indexOf('/brands/'),\n      urlSearch = hash.indexOf('#s='),\n      urlProducts = url.indexOf('/products/');\n\n  if ( urlType === -1 && urlBrands === -1 && urlSearch === -1 && urlProducts === -1 ) {\n    // console.log('Exited from productsModel');\n    return;\n  }\n\n  var productsCache,\n      products,\n      storage = storageAvailable('localStorage'),\n      target = $('body').find('.product-list-grid'),\n      pageIndex,\n      maxPages,\n      type,\n      brand,\n      key,\n      query = {};\n      tags = {\n        brands: [],\n        categories: []\n      };\n      initialize();\n\n  function storageAvailable(type) {\n    try {\n      var storage = window[type],\n        x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return false;\n    }\n  }\n\n  function setPageIndex(index) {\n    pageIndex = index;\n  }\n\n  function getPageIndex() {\n    var p = pageIndex;\n    return p;\n  }\n\n  function setMaxPages(max) {\n    maxPages = max;\n  }\n\n  function getMaxPages() {\n    var p = maxPages;\n    return p;\n  }\n\n  function setQueryType() {\n    var parts;\n\n    if ( urlSearch !== -1 ) {\n      parts = [];\n\n      query = {\n        type: 'all',\n        param: 'null'\n      }\n    } else {\n\n      if ( urlType !== -1 ) {\n        parts = url.split('/');\n\n        query = {\n          type: 'type',\n          param: parts[4]\n        }\n      }\n\n      if ( urlBrands !== -1 ) {\n        parts = url.split('/');\n\n        query = {\n          type: 'brand',\n          param: parts[4]\n        }\n      }\n\n      if ( urlProducts !== -1 ) {\n        parts = [];\n\n        query = {\n          type: 'all',\n          param: 'null'\n        }\n      }\n    }\n  }\n\n  function getQueryType() {\n    return query;\n  }\n\n  function initialize() {\n    var container = $('body').find('.products-container'),\n        pageIndex = $(container).data('page'),\n        maxPages = $(container).data('maxpages'),\n        type = $(container).data('cat'),\n        brand = $(container).data('tag');\n        setQueryType();\n        setMaxPages(maxPages);\n\n    if ( !pageIndex || pageIndex > maxPages ) {\n      setPageIndex(1);\n    } else {\n      setPageIndex(pageIndex);\n    }\n\n    var int = getPageIndex();\n    var queryParams = getQueryType();\n    key = queryParams.type + '_' + queryParams.param;\n\n    if ( storage ) {\n      productsCache = localStorage,\n      products = JSON.parse(productsCache.getItem(key));\n      if (products) {\n        def.resolve(products);\n      } else {\n        getPosts();\n      }\n    }\n  }\n\n  function getPosts() {\n    var queryType = getQueryType(),\n        action,\n        type = queryType.type;\n\n    if ( type === 'type' ) {\n      action = '?action=sinus_type';\n    }\n    if ( type === 'brand' ) {\n      action = '?action=sinus_brand';\n    }\n\n    if ( type === 'all' ) {\n      action = '?action=sinus_products';\n    }\n\n    // console.log(queryType);\n\n    var queryParams = {\n        offset: 0,\n        limit: -1,\n        param: queryType.param\n    },\n    dataObj = JSON.stringify(queryParams);\n\n    $.ajax({\n      url: site.ajax_url + action,\n      type: \"POST\",\n      data: dataObj,\n      dataType: 'json',\n      success: function(response) {\n        products = response.products;\n        productsCache.setItem(key, JSON.stringify(products));\n        def.resolve(products);\n      },\n      error: function(response) {\n        console.log(response);\n      }\n    });\n  }\n\n  return def;\n}\n\nfunction render(products) {\n  if ( products.length > 0 ) {\n    show404('remove');\n  } else {\n    show404('search');\n    return;\n  }\n\n  var grid = $('body').find('.product-list-grid'),\n      spinner = $('body').find('.spinner'),\n      pages = $('body').find('.page.products'),\n      length = products.length;\n\n  if ( !$(spinner).hasClass('hidden') ) {\n    $(spinner).addClass('hidden');\n  }\n\n  if ( pages ) {\n    $(pages).each(function(pi,pe) {\n      $(pe).remove();\n    });\n  }\n\n  function loop() {\n    loopDef = $.Deferred();\n\n    var pageIndex = 1;\n    var html = '<div class=\"page products page-1 hidden\">';\n        html += '<ul class=\"products\">';\n\n    $(products).each(function(i, e) {\n      var k = i + 1;\n\n      var getTemplate = setTemplate(e);\n\n      getTemplate.then(function(template) {\n        html += template;\n      });\n\n      $(e.tags).each(function(ti, te) {\n        tags.brands.push(te);\n      });\n\n      $(e.categories).each(function(ci, ce) {\n        tags.categories.push(ce);\n      });\n\n      if ( k % 24 === 0 && i < length ) {\n        pageIndex++;\n        html += '</ul>';\n        html += '</div>';\n        html += '<div class=\"page products page-' + pageIndex + ' hidden\">';\n        html += '<ul class=\"products\">';\n      }\n    });\n\n    html += '</ul>';\n    html += '</div>';\n\n    loopDef.resolve(html);\n    return loopDef;\n  }\n\n  var loopPromise = loop();\n\n  loopPromise.then(function(html) {\n    $(grid).append(html);\n    sortTags(tags);\n    scrollController();\n    setMenuHeight();\n    var page = $('body').find('.page.page-1');\n    $(page).removeClass('hidden');\n    setTimeout(function() {\n      gridCartController();\n      new modalController();\n    }, 1500);\n  });\n\n}\n\n\nfunction setTemplate(e) {\n  var stockIcon, template;\n      tempDefer = $.Deferred();\n\n  function prepare() {\n    if ( e.stock_quantity === 0 ) {\n      stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-minus-square\"></i></span></div>';\n    }\n\n    if ( e.stock_quantity > 0 ) {\n      stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-check-square\"></i></span></div>';\n    }\n\n    var desc = e.description;\n    var stripped = desc.replace(/<(?:.|\\n)*?>/gm, '');\n\n    var template = '<li class=\"product\" itemscope itemtype=\"http://schema.org/Product\" data-singleid=\"' + e.id + '\">';\n        template += '<div class=\"click-area\"></div>';\n        template += stockIcon;\n        template += '<img src=\"' + e.featured_src + '\" alt=\"' + e.title + ' product image produkt billede Sinus-store Copenhagen København Denmark\" />';\n        template += '<div class=\"product-title\" itemprop=\"name\"><h3>' + e.title + '</h3></div>';\n        template += '<div class=\"product-price\">' + e.price_html + '<div class=\"add-button\" data-href=\"' + e.id + '\" data-title=\"' + e.title + '\"><svg version=\"1.1\" baseProfile=\"tiny\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"x=\"0px\" y=\"0px\" viewBox=\"0 0 60 60\" xml:space=\"preserve\"><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"30\" y1=\"6\" x2=\"30\" y2=\"54\"/><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"6\" y1=\"30\" x2=\"54\" y2=\"30\"/></svg><span class=\"add-info\">Tilføj til kurv</span></div></div>';\n        template += '<div class=\"sinus-product-info\"><div class=\"short-desc\" itemprop=\"description\"><p>' + stripped.split(\" \").splice(0, 40).join(\" \") + '... </p><i class=\"fa fa-chevron-circle-up\"></i></div></div>';\n        template += '</li>';\n\n    tempDefer.resolve(template);\n  }\n\n  prepare();\n  return tempDefer;\n}\n\n\nfunction sortTags(tags) {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      categories = _.uniq(tags.categories),\n      brands = _.uniq(tags.brands),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      catHtml,\n      brandHtml;\n\n  if ( pCat.length !== 0 || pBrand.length !== 0 ) {\n    return\n  } else {\n    $(categories).each(function(i, cat) {\n      catHtml = '<p data-cat=\"' + cat + '\"><i class=\"fa fa-search-plus\"></i>' + cat + '</p>';\n      $(categoryContainer).append(catHtml);\n    });\n\n    $(brands).each(function(i, brand) {\n      brandHtml = '<p data-brand=\"' + brand + '\"><i class=\"fa fa-search-plus\"></i>' + brand + '</p>';\n      $(brandContainer).append(brandHtml);\n    });\n\n    setTimeout(function() {\n      sortController();\n    }, 1500);\n  }\n}\n\nfunction sortController() {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      products = $('body').find('li.product'),\n      pages = $('body').find('.page.products'),\n      href = window.location.href;\n\n  $(pCat).each(function(i,e) {\n    var param = $(e).data('cat');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      var paramtype = 'category';\n      var price = null;\n      sortUrl(price, param, paramtype);\n\n    });\n  });\n\n  $(pBrand).each(function(i,e) {\n    var param = $(e).data('brand');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      var paramtype = 'brand';\n      var price = null;\n      sortUrl(price, param, paramtype);\n    });\n  });\n}\n\nfunction sortPriceController(initDirection) {\n  function setDirection(dir) {\n    direction = dir;\n  }\n\n  function getDirection() {\n    return direction;\n  }\n\n  var priceSorter = $('.menu-left').find('.sort-links > .price-sorter');\n\n  if ( !priceSorter ) {\n    return;\n  }\n\n  $(priceSorter).on('click', function() {\n    if ( initDirection ) {\n      currentDir = initDirection;\n      setDirection(initDirection);\n    } else {\n      var currentDir = 'asc';\n    }\n\n    if ( currentDir === 'asc' ) {\n      changeDirection('desc');\n      var price = 'price_asc';\n      sortUrl(price);\n    }\n\n    if ( currentDir === 'desc' ) {\n      changeDirection('asc');\n      var price = 'price_desc';\n      sortUrl(price);\n    }\n\n    function changeDirection(newDir) {\n      setTimeout(function () {\n        setDirection(newDir);\n      }, 1500);\n    }\n  });\n}\n\nfunction scrollController() {\n  var pages = $('body').find('.page.products.hidden'),\n      content = $('body').find('.site-content'),\n      height = $(content).height(),\n      windowHeight = $(window).height();\n\n  if ( !pages ) {\n    return;\n  }\n\n  $(window).on('scroll', function() {\n    var scroll = $(document).scrollTop(),\n        height = $(content).height();\n\n    if ( scroll >= ((height - windowHeight) - 700) ) {\n      window.requestAnimationFrame(function() {\n        updateView();\n      });\n    }\n  });\n\n  function updateView() {\n    var trig = 0;\n    if (!pages[0] || trig > 0 ) {\n      return;\n    } else {\n      $(pages[0]).removeClass('hidden');\n      trig++;\n      setTimeout(function() {\n        scrollController();\n      }, 1000);\n    }\n  }\n}\n\nvar fpBackgroundController = function() {\n  var bgContainer = $('body').find('.bg-container'),\n      firstImg = $(bgContainer).find('img'),\n      index;\n\n  if ( !bgContainer ) {\n    return;\n  }\n\n  if ( firstImg && firstImg[0] ) {\n    if (firstImg[0].complete) {\n      imagesHandler();\n    } else {\n      firstImg.load(imagesHandler);\n    }\n  }\n\n  function imagesHandler() {\n    setIndex(1);\n    $(firstImg).velocity({\n      'opacity': 1\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    for( var i = 2; i < 7; i++ ) {\n      var img = $('<img />').attr('src', site.theme_path + '/img/bg/bg' + i + '.png').attr('class', 'bg-' + i);\n      $(bgContainer).append(img);\n    }\n\n    setTimeout(controller, 8000);\n  }\n\n  function controller() {\n    var j = getIndex(),\n        k = j+1;\n\n    if ( k > 6 ) {\n      k = 1;\n    }\n\n    var curImg = $(bgContainer).find('img.bg-' + j),\n        newImg = $(bgContainer).find('img.bg-' + k);\n\n    animateIn(newImg);\n    animateOut(curImg);\n\n    setIndex(k);\n\n    setTimeout(controller, 4000);\n  }\n\n  function animateIn(image) {\n    $(image).velocity({\n      'opacity': 1\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function animateOut(image) {\n    $(image).velocity({\n      'opacity': 0\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function getIndex() {\n    n = index;\n    return n;\n  }\n\n  function setIndex(newIndex) {\n    index = newIndex;\n  }\n}\n\nvar fpVideoController = function() {\n  var vid = document.getElementById('frontpage-video');\n\n  if (!vid) {\n    return;\n  } else {\n    var spinner = $('body').find('.spinner'),\n        container = $('body').find('.front-video-container'),\n        vidElement = $(container).find('#frontpage-video'),\n        movingContent = $('body').find('.moving-content'),\n        width = $(window).width(),\n        vidHeight = ((width/100*80)/16)*9;\n\n    addEventListeners();\n  }\n\n  function addEventListeners() {\n    vid.addEventListener('canplaythrough', animShowVideo);\n    vid.addEventListener('ended', animOutVideo);\n  }\n\n  function animShowVideo() {\n    $(spinner).addClass('hidden');\n\n    $(container).velocity({\n      'height': vidHeight\n    }, {duration: 700, delay: 0, easing: [.24,.63,.5,.99]});\n\n    $(vidElement).velocity({\n      'opacity': 1\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': vidHeight + 30\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    setTimeout(function() {\n      if ( vid.paused ) {\n        vid.play();\n      }\n    }, 700);\n  }\n\n  function animOutVideo() {\n    $(vidElement).velocity({\n      'opacity': 0\n    }, {duration: 300, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(container).velocity({\n      'height': 60\n    }, {duration: 1000, delay: 400, easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': 85\n    }, {duration: 1000, delay: 400, display: 'block', easing: [.24,.63,.5,.99]});\n\n    scrollTo(0);\n  }\n}\n\n\nvar scrollHeaderController = function() {\n  var linkHeader = $('body').find('.header-link-row'),\n      width = $(window).width(),\n      scroll;\n\n  $(window).on('scroll', modifyHeader);\n\n  function modifyHeader() {\n    scroll = $(window).scrollTop();\n\n    if ( scroll > 500 ) {\n      $(linkHeader).addClass('hidden');\n    }\n    if ( scroll < 500 ) {\n      $(linkHeader).removeClass('hidden');\n    }\n  }\n}\n\nfunction validateEmail(email) {\n  var regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n  return regex.test(email);\n}\n\nfunction validateInput(input) {\n  var allowedChars = /^[\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w&.,\\- ]+$/;\n  return allowedChars.test(input);\n}\n\nfunction validateNumber(input) {\n  var isNumber = /^(?=.*[0-9])[+()0-9]+$/;\n  return isNumber.test(input);\n}\n\nvar reserveFormController = function() {\n  var form = $('body').find('form.reserve'),\n      emailInput = $(form).find('input[type=email]'),\n      nameInput = $(form).find('input[type=text].name'),\n      phoneInput = $(form).find('input[type=text].phone'),\n      submitBtn = $(form).find('.submit-btn > a');\n\n  function validateEmailOnBlur() {\n    $(emailInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isEmail = validateEmail(value);\n\n        if( !isEmail && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isEmail && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNameOnBlur() {\n    $(nameInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isTrustedCharacters = validateInput(value);\n\n        if( !isTrustedCharacters && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isTrustedCharacters && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNumberOnBlur() {\n    $(phoneInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isNumber = validateNumber(value);\n\n        if ( !isNumber && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if ( isNumber && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function submitListener() {\n    $(submitBtn).on('click', function(event) {\n      event.preventDefault(),\n      inputs = $(form).find('input'),\n      validSuccess = $('body').find('.validation.success');\n      dataObject = {},\n      inputArray = [];\n\n      $(inputs).each(function(i, e) {\n        if ( $(e).hasClass('error') || $(e).val().length === 0 ) {\n          return;\n        } else {\n          var object = {\n            name: e.name,\n            value: $(e).val()\n          }\n          inputArray.push(object);\n        }\n      });\n\n      var data = packData();\n      sendForm(data);\n    });\n\n    function packData() {\n      dataObject.customer_html = '<h4>Navn:</h4><h2>' + inputArray[0].value + '</h2>';\n      dataObject.customer_html += '<h4>TLF:</h4><h2>' + inputArray[1].value + '</h2>';\n      dataObject.customer_html += '<h4>EMAIL:</h4><h2>' + inputArray[2].value + '</h2>';\n      dataObject.customer_email = inputArray[2].value;\n\n      return dataObject;\n    }\n\n    function sendForm(data) {\n      var customerData = JSON.stringify(data);\n\n        $.ajax({\n          url: site.ajax_url + '?action=reserve',\n          type: 'POST',\n          data: customerData,\n          success: function(response) {\n            var stripResponse = $.trim(response);\n            // console.log(stripResponse);\n            if ( stripResponse === 'Success' ) {\n              animateSuccess();\n            }\n            if ( stripResponse === 'Error' ) {\n\n            }\n          },\n          error: function(response) {\n            console.log(response);\n          }\n        });\n    }\n\n    function animateSuccess() {\n      $(form).velocity({\n        'opacity': [0, 1]\n      }, {duration: 300, delay: 0, easing: [.24,.63,.5,.99], display: 'none'});\n\n      $(validSuccess).velocity({\n        'opacity': [1, 0]\n      }, {duration: 300, delay: 350, easing: [.24,.63,.5,.99], display: 'block'});\n\n      setTimeout(function() {\n        window.location.href = window.location.href;\n      }, 1000);\n    }\n  }\n\n  validateNumberOnBlur();\n  validateEmailOnBlur();\n  validateNameOnBlur();\n  submitListener();\n}\n\n\nfunction shopMsg(title, msg) {\n  var atcModal = $('body').find('.atc-modal');\n\n  if ( !msg ) {\n    var msg = '<span>- blev tilføjet til kurven.</span>';\n  } else {\n    var msg = msg;\n  }\n\n  var html = '<h3>' + title + '</h3>' + msg;\n\n  $(atcModal).append(html);\n\n  function animate() {\n    $(atcModal).velocity({\n      'opacity': [1, 0],\n      'top': [150, 300],\n      'z-index': [999999999998, 999999999998]\n    }, {duration: 400, delay: 0, easing: 'easeInOutSine'});\n\n    $(atcModal).velocity({\n      'opacity': [0, 1],\n      'top': [300, 150],\n      'z-index': [999999999998, 99999999998]\n    }, {duration: 400, delay: 1400, easing: 'easeInOutSine'});\n  }\n\n  setTimeout(function() {\n    animate();\n  }, 100);\n\n  setTimeout(function() {\n    $(atcModal).html('');\n    $(atcModal).css({\n      'z-index': -1000\n    });\n  }, 2500);\n}\n\n\nvar productTextController = function() {\n  var textIcon = $('body').find('.text-icon'),\n      productLeft = $('body').find('.product-left'),\n      productRight = $('body').find('.product-right');\n\n  $(textIcon).on('click', function() {\n    toggleClass();\n  });\n\n  function toggleClass() {\n    $(textIcon).toggleClass('off');\n    $(productLeft).toggleClass('off');\n    $(productRight).toggleClass('off');\n  }\n\n  setTimeout(toggleClass, 800);\n}\n\nvar singleProductHeightController = function() {\n  var mainImage = $('.main-image img'),\n      iFrame = $('body').find('iframe');\n\n  if ( mainImage && mainImage[0] ) {\n    if (mainImage[0].complete) {\n      handler();\n    } else {\n      mainImage.load(handler);\n    }\n  } else {\n    return;\n  }\n\n  function handler() {\n    var contentHeight = $('.product-content').height(),\n        imageHeight = $('.main-image img').height();\n\n    if ( contentHeight && imageHeight < contentHeight ) {\n      $('.main-image').css({\n        'height': contentHeight + 'px'\n      });\n    } else {\n      return;\n    }\n    setMenuHeight();\n  }\n}\n\nvar embedVidController = function() {\n  var vidFrame = $('body').find('.youtube-frame');\n\n  if ( vidFrame.length > 0 ) {\n    initVideo();\n  } else {\n    return;\n  }\n\n  function initVideo() {\n    var vidUrl = $(vidFrame).attr('data-href');\n        if ( vidUrl.indexOf('=') !== -1 ) {\n          var vidId = vidUrl.split('='),\n              id = vidId[1];\n        } else {\n          var vidId = vidUrl.split('/');\n          id = vidId[3];\n        }\n\n    var width = $(window).width(),\n        height = (((width/100)*90) / 16) * 9;\n\n    var constructedHtml = '<iframe width=\"' + width + '\" height=\"' + height + '\" src=\"https://www.youtube.com/embed/' + id + '?rel=0&amp;showinfo=0\" frameborder=\"0\" allowfullscreen></iframe>';\n\n    $(vidFrame).html(constructedHtml);\n  }\n};\n\n\nfunction gridCartController() {\n  var addBtn = $('body').find('.add-button'),\n      cart = $('body').find('.cart-contents');\n\n  $(addBtn).each(function(i, e) {\n    var id = $(this).attr('data-href'),\n        prodTitle = $(this).attr('data-title');\n\n    $(this).on('click', function(event) {\n      event.preventDefault();\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_add',\n          dataObject = {\n            'product_id': id\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt + 1;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          shopMsg(prodTitle);\n\n          // setTimeout(function() {\n          //   window.location.href = window.location.href;\n          // }, 1000);\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nvar removeFromCartController = function() {\n    var cart = $('body').find('.cart-contents'),\n        remBtn = $(cart).find('.remove-icon');\n\n  $(remBtn).each(function(i, e) {\n    var id = $(this).attr('data-id'),\n        qtyElem = $(this).siblings('.elem-qty-total'),\n        qty = parseInt($(qtyElem).attr('data-qty'));\n\n\n    $(this).on('click', function() {\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_remove',\n          dataObject = {\n            'product_id': id,\n            'quantity': qty\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt - qty;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          window.location.href = window.location.href;\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nfunction setMenuHeight() {\n  setTimeout(function() {\n    var mainMenu = $('body').find('.main-menu'),\n        siteContent = $('body').find('.site-content'),\n        documentHeight = $('.site-content').height();\n\n     // set menu height, relative to content height (minus footer)\n    $(mainMenu).css({\n      'height': documentHeight - 325 + 'px'\n    });\n  }, 1000);\n}\n\nvar MenuController = function() {\n  var menuBtn = $('body').find('.menu-icon'),\n      mainMenu = $('body').find('.main-menu'),\n      menuLinks = $(mainMenu).find('li'),\n      menuHeaders = $(mainMenu).find('h3'),\n      searchForm = $('body').find('.search-form'),\n      cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents'),\n      width = $(window).width();\n      setMenuHeight();\n\n      $(menuBtn).on('click', animateMenu);\n\n      function animateMenu() {\n        if ( $(mainMenu).hasClass('hidden') ) {\n          $(mainMenu).css({\n            'display': 'block'\n          });\n          setTimeout(function() {\n            $(mainMenu).removeClass('hidden');\n            $(this).addClass('open');\n            scrollTo('0px');\n            addEventListener();\n            if ( width > 767 ) {\n              updateHeaderOpen();\n            }\n\n          }, 100);\n\n        } else {\n          $(mainMenu).addClass('hidden');\n          $(this).removeClass('open');\n          if ( width > 767 ) {\n              updateHeaderClose();\n            }\n\n          setTimeout(function() {\n            $(mainMenu).css({\n              'display': 'none'\n            }, 700);\n          });\n        }\n      }\n\n      function updateHeaderOpen() {\n        var rawIconCss = $(cartIcon).css('right'),\n            rawSearchCss = $(searchForm).css('right'),\n            rawCartContCss = $(cartContents).css('right'),\n            iconRight = parseInt(rawIconCss.replace('px', '')),\n            searchRight = parseInt(rawSearchCss.replace('px', '')),\n            cartContRight = parseInt(rawCartContCss.replace('px', ''));\n\n            $(cartIcon).velocity({\n              'right': iconRight + 230 + 'px'\n            }, {duration: 400, delay: 100, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': searchRight + 230 + 'px'\n            }, {duration: 400, delay: 0, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': cartContRight + 230 + 'px'\n            }, {duration: 400, delay: 150, easing: [.24,.63,.5,.99]});\n      }\n\n      function updateHeaderClose() {\n            $(cartIcon).velocity({\n              'right': 90\n            }, {duration: 300, delay: 200, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': 165\n            }, {duration: 300, delay: 300, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': 80\n            }, {duration: 300, delay: 250, easing: [.24,.63,.5,.99]});\n      }\n\n      function addEventListener() {\n        $(menuLinks).on('click', function(e) {\n          e.preventDefault();\n          var aHref =  $(this).find('a');\n          var href = $(aHref).attr('href');\n\n          $(menuLinks).each(function(i, elem) {\n            var delay = i * 20;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n\n          });\n\n          $(menuHeaders).each(function(i, elem) {\n            var delay = i * 30;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n          });\n\n          setTimeout(navigate(href), 1200);\n        });\n      }\n\n      function navigate(href) {\n        setTimeout(function() {\n          $(menuBtn).removeClass('open');\n          $(mainMenu).addClass('hidden');\n          updateHeaderClose();\n        }, 1000);\n\n        setTimeout(function() {\n          window.location.href = href;\n        }, 1300);\n      }\n};\n\nvar CartController = function() {\n  var cartIcon = $('body').find('.cart-icon'),\n      headerLinkRow = $('body').find('.header-link-row'),\n      cartContents = $('body').find('.cart-modal.cart-contents.hidden');\n      width = $(window).width();\n\n  $(cartIcon).on('click', function(e) {\n    if ( width > 768 ) {\n      if ( headerLinkRow.hasClass('hidden') ) {\n        $(cartContents).css({\n          'top': 65 + 'px'\n        });\n      } else {\n        $(cartContents).css({\n          'top': 95 + 'px'\n        });\n      }\n      $(cartContents).toggleClass('hidden');\n    } else {\n      window.location.href = site.site_url + '/kurv/';\n    }\n  });\n}\n\n\n// http://sin.us/wp-json/posts?type=product&filter[product_cat]=hifi&filter[orderby]=price&filter[order]=asc\n\n"],"sourceRoot":"/source/"}