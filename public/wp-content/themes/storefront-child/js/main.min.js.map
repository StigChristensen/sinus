{"version":3,"sources":["main.js"],"names":["scrollTo","value","$","animate","scrollTop","productsController","promise","productsSupplyer","then","products","render","sortPriceController","urlListener","href","window","location","hash","indexOf","sortHash","onhashchange","inf","price","param","paramtype","split","console","log","sortUrl","urlDataController","pri","par","pt","base_url","h","hashBase","paramArray","base","push","getParam","cat","replace","string","paramsLength","length","each","i","e","setUrl","undefined","dataPromise","returnSortedPriceLow","done","fail","returnSortedPriceHigh","returnSortedCat","returnSortedBrand","returnSortedMultiple","getFirstList","getFirst","Deferred","init","sortedPrice","resolve","reject","getSecondList","getSecond","firstPromise","finalSort","brandSorted","catSorted","sortdef","when","data","sort","categories","sorted","defer","newProductsPromise","newProducts","cats","brands","tags","sortPrice","a","b","initArray","object","parseInt","element","initialSort","j","f","reverse","storageAvailable","type","storage","x","setItem","removeItem","setPageIndex","index","pageIndex","getPageIndex","p","setMaxPages","max","maxPages","setQueryType","parts","url","query","getQueryType","initialize","container","find","queryParams","key","productsCache","localStorage","JSON","parse","getItem","def","getPosts","action","queryType","offset","limit","dataObj","stringify","ajax","site","ajax_url","dataType","success","response","error","grid","spinner","pages","hasClass","addClass","remove","html","k","template","setTemplate","append","sortTags","scrollController","setMenuHeight","page","removeClass","setTimeout","gridCartController","stockIcon","in_stock","desc","description","trunc","splice","join","featured_src","title","price_html","id","catHtml","brandHtml","menuLeft","categoryContainer","brandContainer","_","uniq","pCat","pBrand","brand","sortController","on","delay","velocity","opacity","duration","display","easing","detach","setDirection","dir","direction","getDirection","priceSorter","currentDir","updateView","trig","content","windowHeight","height","scroll","document","requestAnimationFrame","validateEmail","email","regex","test","validateInput","input","allowedChars","validateNumber","isNumber","shopMsg","msg","atcModal","top","z-index","css","mainMenu","documentHeight","jQuery","CartController","MenuController","embedVidController","productTextController","singleProductHeightController","removeFromCartController","reserveFormController","scrollHeaderController","fpVideoController","fpBackgroundController","focus","this","blur","imagesHandler","setIndex","firstImg","img","attr","theme_path","bgContainer","controller","getIndex","curImg","newImg","animateIn","animateOut","image","n","newIndex","complete","load","addEventListeners","vid","addEventListener","animShowVideo","animOutVideo","vidHeight","vidElement","movingContent","paused","play","getElementById","width","modifyHeader","linkHeader","validateEmailOnBlur","emailInput","val","isEmail","validateNameOnBlur","nameInput","isTrustedCharacters","validateNumberOnBlur","phoneInput","submitListener","packData","dataObject","customer_html","inputArray","customer_email","sendForm","customerData","stripResponse","trim","animateSuccess","form","validSuccess","submitBtn","event","preventDefault","inputs","name","toggleClass","textIcon","productLeft","productRight","handler","contentHeight","imageHeight","mainImage","initVideo","vidUrl","vidFrame","vidId","constructedHtml","addBtn","cart","prodTitle","cartNumber","cartInt","text","product_id","updatedNum","remBtn","qtyElem","siblings","qty","quantity","animateMenu","updateHeaderOpen","updateHeaderClose","rawIconCss","cartIcon","rawSearchCss","searchForm","rawCartContCss","cartContents","iconRight","searchRight","cartContRight","right","menuLinks","aHref","elem","menuHeaders","navigate","menuBtn"],"mappings":"AA+BA,QAASA,UAASC,GAChBC,EAAE,cAAcC,SACdC,UAAWH,GACV,KAGL,QAASI,sBACP,GAAIC,GAAUC,kBACdD,GAAQE,KAAK,SAASC,GACpBC,OAAOD,KAETE,sBAGF,QAASC,eACP,GAAIC,GAAOC,OAAOC,SAASF,KACvBG,EAAOF,OAAOC,SAASC,MAIK,KAA3BH,EAAKI,QAAQ,WAAgD,KAA5BJ,EAAKI,QAAQ,cAG3CD,EAGJE,SAASF,GAFTX,qBAMJS,OAAOK,aAAe,SAASC,GAC7B,GAAIJ,GAAOD,SAASC,IACpBE,UAASF,KAIb,QAASE,UAASF,GAChB,GAAIK,GAAOC,EAAOC,CAEiB,MAA9BP,EAAKC,QAAQ,eAChBI,EAAQ,aAG0B,KAA/BL,EAAKC,QAAQ,gBAChBI,EAAQ,cAGwB,KAA7BL,EAAKC,QAAQ,cAChBM,EAAY,WACZC,MAAQR,EAAKQ,MAAM,KAEjBF,EADGN,EAAKC,SAAQ,IAAwBD,EAAKC,SAAQ,GAC7CO,MAAM,GAENA,MAAM,IAIa,KAA1BR,EAAKC,QAAQ,WAChBM,EAAY,QACZC,MAAQR,EAAKQ,MAAM,KAEjBF,EADGN,EAAKC,SAAQ,IAAwBD,EAAKC,SAAQ,GAC7CO,MAAM,GAENA,MAAM,IAIlBC,QAAQC,IAAIL,EAAOC,EAAOC,GAC1BI,QAAQN,EAAOC,EAAOC,GACtBK,kBAAkBP,EAAOC,EAAOC,GAGlC,QAASI,SAAQN,EAAOC,EAAOC,GAC7B,GAEIM,GAAKC,EAAKC,EAGVC,EALAC,EAAInB,OAAOC,SAASC,KACpBH,EAAOC,OAAOC,SAASF,KAEvBqB,EAAW,SACXC,IAGJ,IAAKF,EAAI,CACP,GAAIG,GAAOvB,EAAKW,MAAM,IAiBtB,IAhBAQ,EAAWI,EAAK,GAEXf,GACHQ,EAAMR,EACNc,EAAWE,KAAKR,KAEgB,KAA3BI,EAAEhB,QAAQ,eACbY,EAAM,YACNM,EAAWE,KAAKR,IAEe,KAA5BI,EAAEhB,QAAQ,gBACbY,EAAM,aACNM,EAAWE,KAAKR,KAIfP,EACHQ,EAAMR,EACNS,EAAKR,EACLY,EAAWE,KAAKN,GAChBI,EAAWE,KAAKP,OACX,CACL,GAA+B,KAA1BG,EAAEhB,QAAQ,YAAqB,CAClCM,EAAY,UACZ,IAAIe,GAAWL,EAAET,MAAM,YACnBe,EAAMD,EAAS,GAAGE,QAAQ,IAAK,GACnCV,GAAMS,EACNJ,EAAWE,KAAKd,GAChBY,EAAWE,KAAKP,GAGlB,GAA4B,KAAvBG,EAAEhB,QAAQ,SAAkB,CAC/BM,EAAY,OACZ,IAAIe,GAAWL,EAAET,MAAM,SACnBe,EAAMD,EAAS,GAAGE,QAAQ,IAAK,GACnCV,GAAMS,EACNJ,EAAWE,KAAKd,GAChBY,EAAWE,KAAKP,SAMpBE,GAAWnB,EAENQ,IACHQ,EAAMR,EACNc,EAAWE,KAAKR,IAGbP,IACHQ,EAAMR,EACNS,EAAKR,EACLY,EAAWE,KAAKN,GAChBI,EAAWE,KAAKP,GAIpB,IAAIW,GAAS,EACTA,GAASP,CAEb,IAAIQ,GAAeP,EAAWQ,MAC9BzC,GAAEiC,GAAYS,KAAK,SAASC,EAAGC,GACnBJ,EAAa,EAAlBG,IACHJ,GAAUK,EAAI,KAEXD,IAAOH,EAAa,IACvBD,GAAUK,KAIdC,OAAON,EAAQT,GACfJ,kBAAkBC,EAAKC,EAAKC,GAG9B,QAASgB,QAAO/B,EAAMH,GAEdA,EAGJC,OAAOC,SAASF,KAAOA,EAAOG,EAF9BF,OAAOC,SAASC,KAAOA,EAM3B,QAASY,mBAAkBP,EAAOC,EAAOC,GACvC,GAAKF,GAAmB2B,SAAV1B,GAAiC0B,SAAV1B,EAAsB,CAEzD,GAAe,cAAVD,EAAwB,CAC3B,GAAI4B,GAAcC,sBAElBD,GAAYE,KAAK,SAAS1C,GACxBC,OAAOD,KAER2C,KAAK,WACF3B,QAAQC,IAAI,aAIlB,GAAe,eAAVL,EAAyB,CAC5B,GAAI4B,GAAcI,uBAElBJ,GAAYE,KAAK,SAAS1C,GACxBC,OAAOD,KAER2C,KAAK,WACF3B,QAAQC,IAAI,cAKpB,GAAesB,SAAV3B,GAAuBC,GAASC,EAAY,CAC/C,GAAmB,aAAdA,EAA2B,CAC9B,GAAI0B,GAAcK,gBAAgBhC,EAElC2B,GAAYE,KAAK,SAAS1C,GACxBC,OAAOD,KAER2C,KAAK,WACF3B,QAAQC,IAAI,aAIlB,GAAmB,UAAdH,EAAwB,CAC3B,GAAI0B,GAAcM,kBAAkBjC,EAEpC2B,GAAYE,KAAK,SAAS1C,GACxBC,OAAOD,KAER2C,KAAK,WACF3B,QAAQC,IAAI,cAKpB,GAAKL,GAASC,GAASC,EAAW,CAChC,GAAI0B,GAAcO,qBAAqBnC,EAAOC,EAAOC,EAErD0B,GAAYE,KAAK,SAAS1C,GACxBC,OAAOD,KAER2C,KAAK,WACF3B,QAAQC,IAAI,aAIlBf,sBAGF,QAAS6C,sBAAqBnC,EAAOC,EAAOC,GAG1C,QAASkC,KACP,GAAIC,GAAWxD,EAAEyD,UAEjB,IAAKtC,EAAQ,CACX,GAAe,cAAVA,EAAwB,CAC3B,GAAIuC,GAAOV,sBAEXU,GAAKpD,KAAK,SAASqD,GACjBH,EAASI,QAAQD,KAIrB,GAAe,eAAVxC,EAAyB,CAC5B,GAAIuC,GAAOP,uBAEXO,GAAKpD,KAAK,SAASqD,GACjBH,EAASI,QAAQD,UAKrBH,GAASK,OAAO,iBAElB,OAAOL,GAGT,QAASM,KACP,GAAIC,GAAY/D,EAAEyD,WACdO,EAAeT,GA2CnB,OAzCAS,GAAa1D,KAAK,SAASqD,GACzB,GAAKA,EAEH,GAAKvC,EAAQ,CACX,GAAmB,UAAdC,EAAwB,CAC3B,GAAI4C,GAAYZ,kBAAkBjC,EAAOuC,EACzCM,GAAU3D,KAAK,SAAS4D,GACtBH,EAAUH,QAAQM,KAItB,GAAmB,aAAd7C,EAA2B,CAC9B,GAAI4C,GAAYb,gBAAgBhC,EAAOuC,EACvCM,GAAU3D,KAAK,SAAS6D,GACtBJ,EAAUH,QAAQO,UAItBJ,GAAUF,OAAO,sBAAuBF,EAI5C,KAAMA,GAAevC,EAAQ,CAC3B,GAAmB,UAAdC,EAAwB,CACzB,GAAI4C,GAAYZ,kBAAkBjC,EAClC6C,GAAU3D,KAAK,SAAS4D,GACtBH,EAAUH,QAAQM,KAItB,GAAmB,aAAd7C,EAA2B,CAC9B,GAAI4C,GAAYb,gBAAgBhC,EAChC6C,GAAU3D,KAAK,SAAS6D,GACtBJ,EAAUH,QAAQO,UAIxBJ,GAAUF,OAAO,iCAIdE,EAzET,GAAIK,GAAUpE,EAAEyD,UAgFhB,OAJAzD,GAAEqE,KAAMP,KAAkBxD,KAAK,SAASgE,GACtCF,EAAQR,QAAQU,KAGXF,EAGT,QAAShB,iBAAgBhC,EAAOb,GAkB5B,QAASgE,KACPvE,EAAEO,GAAUmC,KAAK,SAASC,EAAEC,GAC1B,GAAI4B,GAAa5B,EAAE4B,UACgB,MAA9BA,EAAWzD,QAAQK,IACtBqD,EAAOtC,KAAKS,KAIhB8B,EAAMd,QAAQa,GAzBlB,GAAIA,MACAC,EAAQ1E,EAAEyD,UAEd,IAAMlD,EAyBJgE,QAzBe,CACf,GAAII,GAAqBtE,kBAEzBsE,GAAmBrE,KAAK,SAASsE,GAC/B5E,EAAE4E,GAAalC,KAAK,SAASC,EAAEC,GAC7B,GAAIiC,GAAOjC,EAAE4B,UACgB,MAAxBK,EAAK9D,QAAQK,IAChBqD,EAAOtC,KAAKS,KAIhB8B,EAAMd,QAAQa,KAiBlB,MAAOC,GAGT,QAASrB,mBAAkBjC,EAAOb,GAkB9B,QAASgE,KACPvE,EAAEO,GAAUmC,KAAK,SAASC,EAAEC,GAC1B,GAAIkC,GAASlC,EAAEmC,IACgB,MAA1BD,EAAO/D,QAAQK,IAClBqD,EAAOtC,KAAKS,KAIhB8B,EAAMd,QAAQa,GAzBlB,GAAIA,MACAC,EAAQ1E,EAAEyD,UAEd,IAAMlD,EAyBJgE,QAzBe,CACf,GAAII,GAAqBtE,kBAEzBsE,GAAmBrE,KAAK,SAASsE,GAC/B5E,EAAE4E,GAAalC,KAAK,SAASC,EAAEC,GAC7B,GAAIkC,GAASlC,EAAEmC,IACgB,MAA1BD,EAAO/D,QAAQK,IAClBqD,EAAOtC,KAAKS,KAIhB8B,EAAMd,QAAQa,KAiBlB,MAAOC,GAGT,QAAS1B,wBACP,GAAI2B,GAAqBtE,mBACrBqE,EAAQ1E,EAAEyD,UA2Bd,OAzBAkB,GAAmBrE,KAAK,SAASsE,GAY/B,QAASI,GAAUC,EAAEC,GACnB,MAAOD,GAAE9D,MAAQ+D,EAAE/D,MAZrB,GAAIgE,MACAV,IAEJzE,GAAE4E,GAAalC,KAAK,SAASC,EAAEC,GAC7B,GAAIwC,IACFjE,MAAOkE,SAASzC,EAAiB,eACjC0C,QAAS1C,EAEXuC,GAAUhD,KAAKiD,IAOjB,IAAIG,GAAcJ,EAAUZ,KAAKS,EAEjChF,GAAEuF,GAAa7C,KAAK,SAAS8C,EAAEC,GAC7BhB,EAAOtC,KAAKsD,EAAEH,WAGhBZ,EAAMd,QAAQa,KAGTC,EAGT,QAASvB,yBACP,GAAIwB,GAAqBtE,mBACrBqE,EAAQ1E,EAAEyD,UA2Bd,OAzBAkB,GAAmBrE,KAAK,SAASsE,GAY/B,QAASI,GAAUC,EAAEC,GACnB,MAAOD,GAAE9D,MAAQ+D,EAAE/D,MAZrB,GAAIgE,MACAV,IAEJzE,GAAE4E,GAAalC,KAAK,SAASC,EAAEC,GAC7B,GAAIwC,IACFjE,MAAOkE,SAASzC,EAAiB,eACjC0C,QAAS1C,EAEXuC,GAAUhD,KAAKiD,IAOjB,IAAIG,GAAcJ,EAAUZ,KAAKS,GAAWU,SAE5C1F,GAAEuF,GAAa7C,KAAK,SAAS8C,EAAEC,GAC7BhB,EAAOtC,KAAKsD,EAAEH,WAGhBZ,EAAMd,QAAQa,KAGTC,EAIT,QAASrE,oBAyBP,QAASsF,GAAiBC,GACxB,IACE,GAAIC,GAAUjF,OAAOgF,GACnBE,EAAI,kBAGN,OAFAD,GAAQE,QAAQD,EAAGA,GACnBD,EAAQG,WAAWF,IACZ,EAET,MAAMlD,GACJ,OAAO,GAIX,QAASqD,GAAaC,GACpBC,EAAYD,EAGd,QAASE,KACP,GAAIC,GAAIF,CACR,OAAOE,GAGT,QAASC,GAAYC,GACnBC,EAAWD,EAQb,QAASE,KACP,GAAIC,EAC2B,MAA1BC,EAAI5F,QAAQ,YACf2F,EAAQC,EAAIrF,MAAM,KAElBsF,GACEhB,KAAM,OACNxE,MAAOsF,EAAM,KAIgB,KAA5BC,EAAI5F,QAAQ,cACf2F,EAAQC,EAAIrF,MAAM,KAElBsF,GACEhB,KAAM,QACNxE,MAAOsF,EAAM,KAKnB,QAASG,KACP,MAAOD,GAGT,QAASE,KACP,GAAIC,GAAY/G,EAAE,QAAQgH,KAAK,uBAC3Bb,EAAYnG,EAAE+G,GAAWzC,KAAK,QAC9BkC,EAAWxG,EAAE+G,GAAWzC,KAAK,WACtBtE,GAAE+G,GAAWzC,KAAK,OACjBtE,EAAE+G,GAAWzC,KAAK,MAC1BmC,KACAH,EAAYE,GAGdP,GADIE,GAAaA,EAAYK,EAChB,EAEAL,EAGf,IACIc,IADMb,IACQS,IAClBK,GAAMD,EAAYrB,KAAO,IAAMqB,EAAY7F,MAEtCyE,GACHsB,EAAgBC,aAChB7G,EAAW8G,KAAKC,MAAMH,EAAcI,QAAQL,IACxC3G,EACFiH,EAAI5D,QAAQrD,GAEZkH,KAIFlG,QAAQC,IAAI,0BAIhB,QAASiG,KACP,GACIC,GADAC,EAAYd,IAEZjB,EAAO+B,EAAU/B,IAEP,UAATA,IACH8B,EAAS,sBAEG,UAAT9B,IACH8B,EAAS,sBAGX,IAAIT,IACAW,OAAQ,EACRC,MAAO,GACPzG,MAAOuG,EAAUvG,OAErB0G,EAAUT,KAAKU,UAAUd,EAEzBjH,GAAEgI,MACArB,IAAKsB,KAAKC,SAAWR,EACrB9B,KAAM,OACNtB,KAAMwD,EACNK,SAAU,OACVC,QAAS,SAASC,GAChB9H,EAAW8H,EAAS9H,SACpB4G,EAAcpB,QAAQmB,EAAKG,KAAKU,UAAUxH,IAC1CiH,EAAI5D,QAAQrD,IAEd+H,MAAO,SAASD,GACd9G,QAAQC,IAAI6G,MA/IlB,GAAI1B,GAAM/F,OAAOC,SAASF,KACtB6G,EAAMxH,EAAEyD,UAEZ,IAA+B,KAA1BkD,EAAI5F,QAAQ,WAAgD,KAA5B4F,EAAI5F,QAAQ,YAE/C,WADAQ,SAAQC,IAAI,4BAId,IAAI2F,GACA5G,EAGA4F,EACAK,EAGAU,EANArB,EAAUF,EAAiB,gBAO3BiB,GANS5G,EAAE,QAAQgH,KAAK,yBAyI5B,OAlIIjC,OACED,UACAN,eAEFsC,IA8HGU,EAGT,QAAShH,QAAOD,GACd,GAAIgI,GAAOvI,EAAE,QAAQgH,KAAK,sBACtBwB,EAAUxI,EAAE,QAAQgH,KAAK,YACzByB,EAAQzI,EAAE,QAAQgH,KAAK,kBACvBvE,EAASlC,EAASkC,MAEhBzC,GAAEwI,GAASE,SAAS,WACxB1I,EAAEwI,GAASG,SAAS,UAGjBF,GACHzI,EAAEyI,GAAO/F,KAAK,SAASC,EAAEC,GACvB5C,EAAE4C,GAAGgG,UAIT,IAAIzC,GAAY,EACZ0C,EAAO,2CACPA,IAAQ,wBAEZ7I,EAAEO,GAAUmC,KAAK,SAASC,EAAGC,GAC3B,GAAIkG,GAAInG,EAAI,CAEZ3C,GAAE4C,EAAEmC,MAAMrC,KAAK,SAASC,EAAGC,GACzBmC,KAAKD,OAAO3C,KAAKS,KAGnB5C,EAAE4C,EAAE4B,YAAY9B,KAAK,SAASC,EAAGC,GAC/BmC,KAAKP,WAAWrC,KAAKS,IAGvB,IAAImG,GAAWC,YAAYpG,EAC3BiG,IAAQE,EAEHD,EAAI,KAAO,GAASrG,EAAJE,IACnBwD,IACA0C,GAAQ,QACRA,GAAQ,SACRA,GAAQ,kCAAoC1C,EAAY,YACxD0C,GAAQ,2BAIZA,GAAQ,QACRA,GAAQ,SAER7I,EAAEuI,GAAMU,OAAOJ,GACfK,SAASnE,MACToE,mBACAC,eACA,IAAIC,GAAOrJ,EAAE,QAAQgH,KAAK,eAC1BhH,GAAEqJ,GAAMC,YAAY,UACpBC,WAAW,WACT,GAAIC,qBACH,MAIL,QAASR,aAAYpG,GACnB,GAAI6G,EAGFA,GADkB,UAAf7G,EAAE8G,SACO,yFAEA,4FAGd,IAAIC,GAAO/G,EAAEgH,YACTC,EAAQF,EAAKrI,MAAM,KAAKwI,OAAO,EAAG,IAAIC,KAAK,KAE3ChB,EAAW,sEAAwEU,CAMvF,OALIV,IAAY,aAAenG,EAAEoH,aAAe,UAAYpH,EAAEqH,MAAQ,6EAClElB,GAAY,8BAAgCnG,EAAEsH,WAAa,sCAAwCtH,EAAEuH,GAAK,iBAAmBvH,EAAEqH,MAAQ,ufACvIlB,GAAY,kFAAoFnG,EAAEqH,MAAQ,6DAA+DJ,EAAQ,eACjLd,GAAY,QAMlB,QAASG,UAASnE,GAChB,GAOIqF,GACAC,EARAC,EAAWtK,EAAE,QAAQgH,KAAK,cAC1BuD,EAAoBvK,EAAEsK,GAAUtD,KAAK,eACrCwD,EAAiBxK,EAAEsK,GAAUtD,KAAK,WAClCxC,EAAaiG,EAAEC,KAAK3F,EAAKP,YACzBM,EAAS2F,EAAEC,KAAK3F,EAAKD,QACrB6F,EAAO3K,EAAEuK,GAAmBvD,KAAK,KACjC4D,EAAS5K,EAAEwK,GAAgBxD,KAAK,IAIf,KAAhB2D,EAAKlI,QAAkC,IAAlBmI,EAAOnI,SAG/BzC,EAAEwE,GAAY9B,KAAK,SAASC,EAAGN,GAC7B+H,EAAU,gBAAkB/H,EAAM,sCAAwCA,EAAM,OAChFrC,EAAEuK,GAAmBtB,OAAOmB,KAG9BpK,EAAE8E,GAAQpC,KAAK,SAASC,EAAGkI,GACzBR,EAAY,kBAAoBQ,EAAQ,sCAAwCA,EAAQ,OACxF7K,EAAEwK,GAAgBvB,OAAOoB,KAG3Bd,WAAW,WACTuB,kBACC,OAIP,QAASA,kBACP,GAAIR,GAAWtK,EAAE,QAAQgH,KAAK,cAC1BuD,EAAoBvK,EAAEsK,GAAUtD,KAAK,eACrCwD,EAAiBxK,EAAEsK,GAAUtD,KAAK,WAClC2D,EAAO3K,EAAEuK,GAAmBvD,KAAK,KACjC4D,EAAS5K,EAAEwK,GAAgBxD,KAAK,KAEhCyB,GADWzI,EAAE,QAAQgH,KAAK,cAClBhH,EAAE,QAAQgH,KAAK,kBAChBpG,QAAOC,SAASF,IAE3BX,GAAE2K,GAAMjI,KAAK,SAASC,EAAEC,GACtB,GAAIxB,GAAQpB,EAAE4C,GAAG0B,KAAK,MAEtBtE,GAAE4C,GAAGmI,GAAG,QAAS,WACf/K,EAAEyI,GAAO/F,KAAK,SAASC,EAAEC,GACvB,GAAIoI,GAAQ,GAAKrI,CACjB3C,GAAE4C,GAAGqI,UAAUC,QAAW,IAAKC,SAAU,IAAKH,MAAOA,EAAOI,QAAS,OAAQC,QAAS,IAAI,IAAI,GAAG,OACjG9B,WAAW,WACTvJ,EAAE4C,GAAG0I,UACJ,IAAIN,IAET,IAAI3J,GAAY,WACZF,EAAQ,IACZM,SAAQN,EAAOC,EAAOC,OAK1BrB,EAAE4K,GAAQlI,KAAK,SAASC,EAAEC,GACxB,GAAIxB,GAAQpB,EAAE4C,GAAG0B,KAAK,QAEtBtE,GAAE4C,GAAGmI,GAAG,QAAS,WACf/K,EAAEyI,GAAO/F,KAAK,SAASC,EAAEC,GACvB,GAAIoI,GAAQ,GAAKrI,CACjB3C,GAAE4C,GAAGqI,UAAUC,QAAW,IAAKC,SAAU,IAAKH,MAAOA,EAAOI,QAAS,OAAQC,QAAS,IAAI,IAAI,GAAG,OACjG9B,WAAW,WACTvJ,EAAE4C,GAAG0I,UACJ,IAAIN,IAET,IAAI3J,GAAY,QACZF,EAAQ,IACZM,SAAQN,EAAOC,EAAOC,OAK5B,QAASZ,uBAGP,QAAS8K,GAAaC,GACpBC,EAAYD,EAGd,QAASE,KACP,MAAOD,GAPT,GAAIA,GAAY,MAUZE,EAAc3L,EAAE,cAAcgH,KAAK,8BAEjC2E,IAIN3L,EAAE2L,GAAaZ,GAAG,QAAS,WACzB,GAAIa,GAAaF,GAEjB,IAAoB,QAAfE,EAAuB,CAC1BL,EAAa,OACb,IAAIpK,GAAQ,WACZM,SAAQN,GAIV,GAAoB,SAAfyK,EAAwB,CAC3BL,EAAa,MACb,IAAIpK,GAAQ,YACZM,SAAQN,MAKd,QAASgI,oBAqBP,QAAS0C,KACP,GAAIC,GAAO,GACNrD,EAAM,IAAMqD,EAAO,IAGtB9L,EAAEyI,EAAM,IAAIa,YAAY,UACxBwC,IACAvC,WAAW,WACTJ,oBACC,MA7BP,GAAIV,GAAQzI,EAAE,QAAQgH,KAAK,yBACvB+E,EAAU/L,EAAE,QAAQgH,KAAK,iBAEzBgF,GADShM,EAAE+L,GAASE,SACLjM,EAAEY,QAAQqL,SAEvBxD,IAINzI,EAAEY,QAAQmK,GAAG,SAAU,WACrB,GAAImB,GAASlM,EAAEmM,UAAUjM,YACrB+L,EAASjM,EAAE+L,GAASE,QAEnBC,IAAYD,EAASD,EAAgB,KACxCpL,OAAOwL,sBAAsB,WAC3BP,QA2KR,QAASQ,eAAcC,GACrB,GAAIC,GAAQ,sHACZ,OAAOA,GAAMC,KAAKF,GAGpB,QAASG,eAAcC,GACrB,GAAIC,GAAe,yCACnB,OAAOA,GAAaH,KAAKE,GAG3B,QAASE,gBAAeF,GACtB,GAAIG,GAAW,wBACf,OAAOA,GAASL,KAAKE,GAmKvB,QAASI,SAAQ7C,EAAO8C,GAatB,QAAS9M,KACPD,EAAEgN,GAAU/B,UACVC,SAAY,EAAG,GACf+B,KAAQ,IAAK,KACbC,WAAY,IAAM,OAChB/B,SAAU,IAAKH,MAAO,EAAGK,OAAQ,kBAErCrL,EAAEgN,GAAU/B,UACVC,SAAY,EAAG,GACf+B,KAAQ,IAAK,KACbC,UAAW,MACT/B,SAAU,IAAKH,MAAO,KAAMK,OAAQ,kBAvB1C,GAAI2B,GAAWhN,EAAE,QAAQgH,KAAK,aAE9B,IAAM+F,EAGJ,GAAIA,GAAMA,MAFV,IAAIA,GAAM,0CAKZ,IAAIlE,GAAO,OAASoB,EAAQ,QAAU8C,CAEtC/M,GAAEgN,GAAU/D,OAAOJ,GAgBnBU,WAAW,WACTtJ,KACC,KAEHsJ,WAAW,WACTvJ,EAAEgN,GAAUnE,KAAK,IACjB7I,EAAEgN,GAAUG,KACVD,UAAW,QAEZ,KAoKL,QAAS9D,iBACPG,WAAW,WACT,GAAI6D,GAAWpN,EAAE,QAAQgH,KAAK,cAE1BqG,GADcrN,EAAE,QAAQgH,KAAK,iBACZhH,EAAE,iBAAiBiM,SAGxCjM,GAAEoN,GAAUD,KACVlB,OAAUoB,EAAiB,IAAM,QAElC,KA92CLC,OAAOnB,UAAUpB,GAAG,QAAS,WAC3B/K,EAAIsN,OAGJ,GAAIC,gBACJ,GAAIC,gBACJ,GAAIC,oBACJ,GAAIC,uBACJ,GAAIC,+BACJ,GAAIC,0BACJ,GAAIC,uBACJ,GAAIC,wBACJ,GAAIC,mBACJ,GAAIC,wBACJtN,cAGAV,EAAE,eAAeiO,MAAM,WACrBjO,EAAE,cAAgBkO,KAAK/D,GAAK,MAAMxB,SAAS,WAC1CwF,KAAK,WACNnO,EAAE,SAASsJ,YAAY,YAI3B,IAAI+D,gBA6zBAW,uBAAyB,WAiB3B,QAASI,KACPC,EAAS,GACTrO,EAAEsO,GAAUrD,UACVC,QAAW,IACTC,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,MAEnE,KAAK,GAAI1I,GAAI,EAAO,EAAJA,EAAOA,IAAM,CAC3B,GAAI4L,GAAMvO,EAAE,WAAWwO,KAAK,MAAOvG,KAAKwG,WAAa,aAAe9L,EAAI,QAAQ6L,KAAK,QAAS,MAAQ7L,EACtG3C,GAAE0O,GAAazF,OAAOsF,GAGxBhF,WAAWoF,EAAY,KAGzB,QAASA,KACP,GAAInJ,GAAIoJ,IACJ9F,EAAItD,EAAE,CAELsD,GAAI,IACPA,EAAI,EAGN,IAAI+F,GAAS7O,EAAE0O,GAAa1H,KAAK,UAAYxB,GACzCsJ,EAAS9O,EAAE0O,GAAa1H,KAAK,UAAY8B,EAE7ClI,QAAOwL,sBAAsB2C,EAAUD,IACvClO,OAAOwL,sBAAsB4C,EAAWH,IAExCR,EAASvF,GAETS,WAAWoF,EAAY,KAGzB,QAASI,GAAUE,GACjBjP,EAAEiP,GAAOhE,UACPC,QAAW,IACTC,SAAU,IAAMH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAGtE,QAAS2D,GAAWC,GAClBjP,EAAEiP,GAAOhE,UACPC,QAAW,IACTC,SAAU,IAAMH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAGtE,QAASuD,KAEP,MADAM,GAAIhJ,EACGgJ,EAGT,QAASb,GAASc,GAChBjJ,EAAQiJ,EAnEV,GAEIjJ,GAFAwI,EAAc1O,EAAE,QAAQgH,KAAK,iBAC7BsH,EAAWtO,EAAE0O,GAAa1H,KAAK,MAG7B0H,IAIDJ,GAAYA,EAAS,KACpBA,EAAS,GAAGc,SACdhB,IAEAE,EAASe,KAAKjB,KA2DhBL,kBAAoB,WAgBtB,QAASuB,KACPC,EAAIC,iBAAiB,iBAAkBC,GACvCF,EAAIC,iBAAiB,QAASE,GAGhC,QAASD,KACPzP,EAAEwI,GAASG,SAAS,UAEpB3I,EAAE+G,GAAWkE,UACXgB,OAAU0D,IACRxE,SAAU,IAAKH,MAAO,EAAGK,QAAS,IAAI,IAAI,GAAG,OAEjDrL,EAAE4P,GAAY3E,UACZC,QAAW,IACTC,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnErL,EAAE6P,GAAe5E,UACfgC,IAAO0C,EAAY,KACjBxE,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9B,WAAW,WACJgG,EAAIO,QACPP,EAAIQ,QAEL,KAGL,QAASL,KACP1P,EAAE4P,GAAY3E,UACZC,QAAW,IACTC,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnErL,EAAE+G,GAAWkE,UACXgB,OAAU,KACRd,SAAU,IAAMH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEpDrL,EAAE6P,GAAe5E,UACfgC,IAAO,KACL9B,SAAU,IAAMH,MAAO,IAAKI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEtEvL,SAAS,GAvDX,GAAIyP,GAAMpD,SAAS6D,eAAe,kBAElC,IAAKT,EAAL,CAGE,GAAI/G,GAAUxI,EAAE,QAAQgH,KAAK,YACzBD,EAAY/G,EAAE,QAAQgH,KAAK,0BAC3B4I,EAAa5P,EAAE+G,GAAWC,KAAK,oBAC/B6I,EAAgB7P,EAAE,QAAQgH,KAAK,mBAC/BiJ,EAAQjQ,EAAEY,QAAQqP,QAClBN,EAAcM,EAAM,IAAI,GAAI,GAAI,CAEpCX,OAgDAxB,uBAAyB,WAO3B,QAASoC,KACPhE,EAASlM,EAAEY,QAAQV,YAEdgM,EAAS,KACZlM,EAAEmQ,GAAYxH,SAAS,UAEX,IAATuD,GACHlM,EAAEmQ,GAAY7G,YAAY,UAb9B,GAEI4C,GAFAiE,EAAanQ,EAAE,QAAQgH,KAAK,mBACpBhH,GAAEY,QAAQqP,OAGtBjQ,GAAEY,QAAQmK,GAAG,SAAUmF,IA6BrBrC,sBAAwB,WAO1B,QAASuC,KACPpQ,EAAEqQ,GAAYtF,GAAG,OAAQ,WACvB,GAAIhL,GAAQC,EAAEkO,MAAMoC,KAEpB,IAAsB,IAAjBvQ,EAAM0C,OAIT,YAHKzC,EAAEkO,MAAMxF,SAAS,UACpB1I,EAAEkO,MAAM5E,YAAY,SAKxB,IAAsB,IAAjBvJ,EAAM0C,OAAe,CACxB,GAAI8N,GAAUlE,cAActM,EAEvBwQ,IAAYvQ,EAAEkO,MAAMxF,SAAS,UAChC1I,EAAEkO,MAAMvF,SAAS,SAGf4H,GAAWvQ,EAAEkO,MAAMxF,SAAS,UAC9B1I,EAAEkO,MAAM5E,YAAY,YAM5B,QAASkH,KACPxQ,EAAEyQ,GAAW1F,GAAG,OAAQ,WACtB,GAAIhL,GAAQC,EAAEkO,MAAMoC,KAEpB,IAAsB,IAAjBvQ,EAAM0C,OAIT,YAHKzC,EAAEkO,MAAMxF,SAAS,UACpB1I,EAAEkO,MAAM5E,YAAY,SAKxB,IAAsB,IAAjBvJ,EAAM0C,OAAe,CACxB,GAAIiO,GAAsBjE,cAAc1M,EAEnC2Q,IAAwB1Q,EAAEkO,MAAMxF,SAAS,UAC5C1I,EAAEkO,MAAMvF,SAAS,SAGf+H,GAAuB1Q,EAAEkO,MAAMxF,SAAS,UAC1C1I,EAAEkO,MAAM5E,YAAY,YAM5B,QAASqH,KACP3Q,EAAE4Q,GAAY7F,GAAG,OAAQ,WACvB,GAAIhL,GAAQC,EAAEkO,MAAMoC,KAEpB,IAAsB,IAAjBvQ,EAAM0C,OAIT,YAHKzC,EAAEkO,MAAMxF,SAAS,UACpB1I,EAAEkO,MAAM5E,YAAY,SAKxB,IAAsB,IAAjBvJ,EAAM0C,OAAe,CACxB,GAAIoK,GAAWD,eAAe7M,EAExB8M,IAAa7M,EAAEkO,MAAMxF,SAAS,UAClC1I,EAAEkO,MAAMvF,SAAS,SAGdkE,GAAY7M,EAAEkO,MAAMxF,SAAS,UAChC1I,EAAEkO,MAAM5E,YAAY,YAM5B,QAASuH,KAwBP,QAASC,KAMP,MALAC,YAAWC,cAAgB,qBAAuBC,WAAW,GAAGlR,MAAQ,QACxEgR,WAAWC,eAAiB,oBAAsBC,WAAW,GAAGlR,MAAQ,QACxEgR,WAAWC,eAAiB,sBAAwBC,WAAW,GAAGlR,MAAQ,QAC1EgR,WAAWG,eAAiBD,WAAW,GAAGlR,MAEnCgR,WAGT,QAASI,GAAS7M,GAChB,GAAI8M,GAAe/J,KAAKU,UAAUzD,EAEhCtE,GAAEgI,MACArB,IAAKsB,KAAKC,SAAW,kBACrBtC,KAAM,OACNtB,KAAM8M,EACNhJ,QAAS,SAASC,GAChB,GAAIgJ,GAAgBrR,EAAEsR,KAAKjJ,EAC3B9G,SAAQC,IAAI6P,GACW,YAAlBA,GACHE,KAMJjJ,MAAO,SAASD,GACd9G,QAAQC,IAAI6G,MAKpB,QAASkJ,KACPvR,EAAEwR,GAAMvG,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAO,EAAGK,QAAS,IAAI,IAAI,GAAG,KAAMD,QAAS,SAEhEpL,EAAEyR,cAAcxG,UACdC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,KAAMD,QAAS,UAElE7B,WAAW,WACT3I,OAAOC,SAASF,KAAOC,OAAOC,SAASF,MACtC,KAlELX,EAAE0R,GAAW3G,GAAG,QAAS,SAAS4G,GAChCA,EAAMC,iBACNC,OAAS7R,EAAEwR,GAAMxK,KAAK,SACtByK,aAAezR,EAAE,QAAQgH,KAAK,uBAC9B+J,cACAE,cAEAjR,EAAE6R,QAAQnP,KAAK,SAASC,EAAGC,GACzB,IAAK5C,EAAE4C,GAAG8F,SAAS,UAAkC,IAAtB1I,EAAE4C,GAAG0N,MAAM7N,OAA1C,CAGE,GAAI2C,IACF0M,KAAMlP,EAAEkP,KACR/R,MAAOC,EAAE4C,GAAG0N,MAEdW,YAAW9O,KAAKiD,KAIpB,IAAId,GAAOwM,GACXK,GAAS7M,KAtGb,GAAIkN,GAAOxR,EAAE,QAAQgH,KAAK,gBACtBqJ,EAAarQ,EAAEwR,GAAMxK,KAAK,qBAC1ByJ,EAAYzQ,EAAEwR,GAAMxK,KAAK,yBACzB4J,EAAa5Q,EAAEwR,GAAMxK,KAAK,0BAC1B0K,EAAY1R,EAAEwR,GAAMxK,KAAK,kBAoJ7B2J,KACAP,IACAI,IACAK,KA4CEnD,sBAAwB,WAS1B,QAASqE,KACP/R,EAAEgS,GAAUD,YAAY,OACxB/R,EAAEiS,GAAaF,YAAY,OAC3B/R,EAAEkS,GAAcH,YAAY,OAX9B,GAAIC,GAAWhS,EAAE,QAAQgH,KAAK,cAC1BiL,EAAcjS,EAAE,QAAQgH,KAAK,iBAC7BkL,EAAelS,EAAE,QAAQgH,KAAK,iBAElChH,GAAEgS,GAAUjH,GAAG,QAAS,WACtBgH,MASFxI,WAAWwI,EAAa,MAGtBpE,8BAAgC,WAclC,QAASwE,KACP,GAAIC,GAAgBpS,EAAE,oBAAoBiM,SACtCoG,EAAcrS,EAAE,mBAAmBiM,QAElCmG,IAA+BA,EAAdC,IACpBrS,EAAE,eAAemN,KACflB,OAAUmG,EAAgB,OAK9BhJ,iBAxBF,GAAIkJ,GAAYtS,EAAE,kBACLA,GAAE,QAAQgH,KAAK,SAEvBsL,IAAaA,EAAU,KACtBA,EAAU,GAAGlD,SACf+C,IAEAG,EAAUjD,KAAK8C,KAqBjB1E,mBAAqB,WASvB,QAAS8E,KACP,GAAIC,GAASxS,EAAEyS,GAAUjE,KAAK,YAC1B,IAA6B,KAAxBgE,EAAOzR,QAAQ,KAClB,GAAI2R,GAAQF,EAAOlR,MAAM,KACrB6I,EAAKuI,EAAM,OACV,CACL,GAAIA,GAAQF,EAAOlR,MAAM,IACzB6I,GAAKuI,EAAM,GAGjB,GAAIzC,GAAQjQ,EAAEY,QAAQqP,QAClBhE,EAAUgE,EAAQ,GAAM,EAExB0C,EAAkB,kBAAoB1C,EAAQ,aAAehE,EAAS,wCAA0C9B,EAAK,kEAEzHnK,GAAEyS,GAAU5J,KAAK8J,GAvBnB,GAAIF,GAAWzS,EAAE,QAAQgH,KAAK,iBAEzByL,GAAShQ,OAAS,GACrB8P,KAyBA/I,mBAAqB,WACvB,GAAIoJ,GAAS5S,EAAE,QAAQgH,KAAK,eACxB6L,EAAO7S,EAAE,QAAQgH,KAAK,iBAG1BhH,GAAE4S,GAAQlQ,KAAK,SAASC,EAAGC,GACzB,GAAIuH,GAAKnK,EAAEkO,MAAMM,KAAK,aAClBsE,EAAY9S,EAAEkO,MAAMM,KAAK,aAE7BxO,GAAEkO,MAAMnD,GAAG,QAAS,SAAS4G,GAC3BA,EAAMC,gBACN,IAAImB,GAAa/S,EAAE,QAAQgH,KAAK,iBAC5BgM,EAAU3N,SAASrF,EAAE,QAAQgH,KAAK,iBAAiBiM,QACnDtM,EAAMsB,KAAKC,SAAW,oBACtB6I,GACEmC,WAAc/I,EAGpB7F,MAAO+C,KAAKU,UAAUgJ,GAEtB/Q,EAAEgI,MACArB,IAAKA,EACLf,KAAM,OACNtB,KAAMA,KACN6D,SAAU,OACVC,QAAS,SAASC,GAChB,GAAI8K,GAAaH,EAAU,CAC3BD,GAAWlK,KAAKsK,GAChBnT,EAAE6S,GAAMhK,KAAKR,GACbyE,QAAQgG,GAERvJ,WAAW,WACT3I,OAAOC,SAASF,KAAOC,OAAOC,SAASF,MACtC,MAEL2H,MAAO,SAASD,GACd9G,QAAQC,IAAI,UAAW6G,WAO7BuF,yBAA2B,WAC3B,GAAIiF,GAAO7S,EAAE,QAAQgH,KAAK,kBACtBoM,EAASpT,EAAE6S,GAAM7L,KAAK,eAE5BhH,GAAEoT,GAAQ1Q,KAAK,SAASC,EAAGC,GACzB,GAAIuH,GAAKnK,EAAEkO,MAAMM,KAAK,WAClB6E,EAAUrT,EAAEkO,MAAMoF,SAAS,mBAC3BC,EAAMlO,SAASrF,EAAEqT,GAAS7E,KAAK,YAGnCxO,GAAEkO,MAAMnD,GAAG,QAAS,WAClBxJ,QAAQC,IAAI+R,EAAKpJ,EACjB,IAAI4I,GAAa/S,EAAE,QAAQgH,KAAK,iBAC5BgM,EAAU3N,SAASrF,EAAE,QAAQgH,KAAK,iBAAiBiM,QACnDtM,EAAMsB,KAAKC,SAAW,uBACtB6I,GACEmC,WAAc/I,EACdqJ,SAAYD,EAGlBjP,MAAO+C,KAAKU,UAAUgJ,GAEtB/Q,EAAEgI,MACArB,IAAKA,EACLf,KAAM,OACNtB,KAAMA,KACN6D,SAAU,OACVC,QAAS,SAASC,GAChB,GAAI8K,GAAaH,EAAUO,CAC3BR,GAAWlK,KAAKsK,GAChBnT,EAAE6S,GAAMhK,KAAKR,GACbzH,OAAOC,SAASF,KAAOC,OAAOC,SAASF,MAEzC2H,MAAO,SAASD,GACd9G,QAAQC,IAAI,UAAW6G,WAoB7BmF,eAAiB,WAaf,QAASiG,KACFzT,EAAEoN,GAAU1E,SAAS,WACxB1I,EAAEoN,GAAU9D,YAAY,UACxBtJ,EAAEkO,MAAMvF,SAAS,QACjB7I,SAAS,OACT4T,IACAlE,MAEAxP,EAAEoN,GAAUzE,SAAS,UACrB3I,EAAEkO,MAAM5E,YAAY,QACpBqK,KAKJ,QAASD,KACP,GAAIE,GAAa5T,EAAE6T,GAAU1G,IAAI,SAC7B2G,EAAe9T,EAAE+T,GAAY5G,IAAI,SACjC6G,EAAiBhU,EAAEiU,GAAc9G,IAAI,SACrC+G,EAAY7O,SAASuO,EAAWtR,QAAQ,KAAM,KAC9C6R,EAAc9O,SAASyO,EAAaxR,QAAQ,KAAM,KAClD8R,EAAgB/O,SAAS2O,EAAe1R,QAAQ,KAAM,IAGtDtC,GAAE6T,GAAU5I,UACVoJ,MAASH,EAAY,IAAM,OACzB/I,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEnDrL,EAAE+T,GAAY9I,UACZoJ,MAASF,EAAc,IAAM,OAC3BhJ,SAAU,IAAKH,MAAO,EAAGK,QAAS,IAAI,IAAI,GAAG,OAEjDrL,EAAEiU,GAAchJ,UACdoJ,MAASD,EAAgB,IAAM,OAC7BjJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAGzD,QAASsI,KACH3T,EAAE6T,GAAU5I,UACVoJ,MAAS,KACPlJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEnDrL,EAAE+T,GAAY9I,UACZoJ,MAAS,MACPlJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEnDrL,EAAEiU,GAAchJ,UACdoJ,MAAS,KACPlJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAGzD,QAASmE,KACPxP,EAAEsU,GAAWvJ,GAAG,QAAS,SAASnI,GAChCA,EAAEgP,gBACF,IAAI2C,GAASvU,EAAEkO,MAAMlH,KAAK,KACtBrG,EAAOX,EAAEuU,GAAO/F,KAAK,OAEzBxO,GAAEsU,GAAW5R,KAAK,SAASC,EAAG6R,GAC5B,GAAIxJ,GAAY,GAAJrI,CAEZ3C,GAAEwU,GAAMvJ,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAOA,EAAOK,OAAQ,oBAI3CrL,EAAEyU,GAAa/R,KAAK,SAASC,EAAG6R,GAC9B,GAAIxJ,GAAY,GAAJrI,CAEZ3C,GAAEwU,GAAMvJ,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAOA,EAAOK,OAAQ,oBAG3C9B,WAAWmL,EAAS/T,GAAO,QAI/B,QAAS+T,GAAS/T,GAChB4I,WAAW,WACTvJ,EAAE2U,GAASrL,YAAY,QACvBtJ,EAAEoN,GAAUzE,SAAS,UACrBgL,KACC,KAEHpK,WAAW,WACT3I,OAAOC,SAASF,KAAOA,GACtB,MAnGT,GAAIgU,GAAU3U,EAAE,QAAQgH,KAAK,cACzBoG,EAAWpN,EAAE,QAAQgH,KAAK,cAC1BsN,EAAYtU,EAAEoN,GAAUpG,KAAK,MAC7ByN,EAAczU,EAAEoN,GAAUpG,KAAK,MAC/B+M,EAAa/T,EAAE,QAAQgH,KAAK,gBAC5B6M,EAAW7T,EAAE,QAAQgH,KAAK,cAC1BiN,EAAejU,EAAE,QAAQgH,KAAK,4BACtBhH,GAAEY,QAAQqP,OAClB7G,iBAEApJ,EAAE2U,GAAS5J,GAAG,QAAS0I,IA6FzBlG,eAAiB,WACnB,GAAIsG,GAAW7T,EAAE,QAAQgH,KAAK,cAC1BiN,EAAejU,EAAE,QAAQgH,KAAK,4BAElChH,GAAE6T,GAAU9I,GAAG,QAAS,SAASnI,GAC/B5C,EAAEiU,GAAclC,YAAY","file":"main.min.js","sourcesContent":["// Test if ie10 - adds class \"ie10\" to HTML tag, if true. - Excludes IE11\nif (/*@cc_on!@*/false && document.documentMode === 10) {\n    document.documentElement.className+=' ie10';\n}\n\njQuery(document).on('ready', function() {\n  $ = jQuery;\n\n\n  new CartController();\n  new MenuController();\n  new embedVidController();\n  new productTextController();\n  new singleProductHeightController();\n  new removeFromCartController();\n  new reserveFormController();\n  new scrollHeaderController();\n  new fpVideoController();\n  new fpBackgroundController();\n  urlListener();\n\n  // labels for input fields\n  $(\"form :input\").focus(function() {\n    $(\"label[for='\" + this.id + \"']\").addClass(\"focus\");\n  }).blur(function() {\n    $(\"label\").removeClass(\"focus\");\n  });\n}); // End Ready\n\nvar documentHeight;\n\nfunction scrollTo(value) {\n  $('html, body').animate({\n    scrollTop: value\n  }, 700);\n}\n\nfunction productsController() {\n  var promise = productsSupplyer();\n  promise.then(function(products) {\n    render(products);\n  });\n  sortPriceController();\n}\n\nfunction urlListener() {\n  var href = window.location.href,\n      hash = window.location.hash,\n      initParams,\n      base_url;\n\n  if ( href.indexOf('/type/') === -1 && href.indexOf('/brand/') === -1 ) {\n    return;\n  } else {\n    if ( !hash ) {\n      productsController();\n    } else {\n      sortHash(hash);\n    }\n  }\n\n  window.onhashchange = function(inf) {\n    var hash = location.hash;\n    sortHash(hash);\n  }\n}\n\nfunction sortHash(hash) {\n  var price, param, paramtype;\n\n  if ( hash.indexOf('price_asc') !== -1 ) {\n    price = 'price_asc';\n  }\n\n  if ( hash.indexOf('price_desc') !== -1 ) {\n    price = 'price_desc';\n  }\n\n  if ( hash.indexOf('category') !== -1 ) {\n    paramtype = 'category';\n    split = hash.split('+');\n    if ( hash.indexOf('price_asc' !== -1 ) || hash.indexOf('price_desc' !== -1 ) ) {\n      param = split[2];\n    } else {\n      param = split[1];\n    }\n  }\n\n  if ( hash.indexOf('brand') !== -1 ) {\n    paramtype = 'brand';\n    split = hash.split('+');\n    if ( hash.indexOf('price_asc' !== -1 ) || hash.indexOf('price_desc' !== -1 ) ) {\n      param = split[2];\n    } else {\n      param = split[1];\n    }\n  }\n\n  console.log(price, param, paramtype);\n  sortUrl(price, param, paramtype);\n  urlDataController(price, param, paramtype);\n}\n\nfunction sortUrl(price, param, paramtype) {\n  var h = window.location.hash,\n      href = window.location.href,\n      pri, par, pt,\n      hashBase = '#sort=',\n      paramArray = [],\n      base_url;\n\n  if ( h ) {\n    var base = href.split('#');\n    base_url = base[0];\n\n    if ( price ) {\n      pri = price;\n      paramArray.push(pri);\n    } else {\n      if ( h.indexOf('price_asc') !== -1 ) {\n        pri = 'price_asc';\n        paramArray.push(pri);\n      }\n      if ( h.indexOf('price_desc') !== -1 ) {\n        pri = 'price_desc';\n        paramArray.push(pri);\n      }\n    }\n\n    if ( param ) {\n      par = param;\n      pt = paramtype;\n      paramArray.push(pt);\n      paramArray.push(par);\n    } else {\n      if ( h.indexOf('category') !== -1 ) {\n        paramtype = 'category';\n        var getParam = h.split('category');\n        var cat = getParam[1].replace('+', '');\n        par = cat;\n        paramArray.push(paramtype);\n        paramArray.push(par);\n      }\n\n      if ( h.indexOf('brand') !== -1 ) {\n        paramtype = 'brand';\n        var getParam = h.split('brand');\n        var cat = getParam[1].replace('+', '');\n        par = cat;\n        paramArray.push(paramtype);\n        paramArray.push(par);\n      }\n    }\n\n\n  } else {\n    base_url = href;\n\n    if ( price ) {\n      pri = price;\n      paramArray.push(pri);\n    }\n\n    if ( param ) {\n      par = param;\n      pt = paramtype;\n      paramArray.push(pt);\n      paramArray.push(par);\n    }\n  }\n\n  var string = '';\n      string = hashBase;\n\n  var paramsLength = paramArray.length;\n  $(paramArray).each(function(i, e) {\n    if ( i < (paramsLength-1) ) {\n      string += e + '+';\n    }\n    if ( i === (paramsLength-1) ) {\n      string += e;\n    }\n  });\n\n  setUrl(string, base_url);\n  urlDataController(pri, par, pt);\n}\n\nfunction setUrl(hash, href) {\n\n  if ( !href ) {\n    window.location.hash = hash;\n  } else {\n    window.location.href = href + hash;\n  }\n}\n\nfunction urlDataController(price, param, paramtype) {\n  if ( price && param === undefined && param === undefined ) {\n\n    if ( price === 'price_asc' ) {\n      var dataPromise = returnSortedPriceLow();\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          console.log('failed!');\n      });\n    }\n\n    if ( price === 'price_desc' ) {\n      var dataPromise = returnSortedPriceHigh();\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          console.log('failed!');\n      });\n    }\n  }\n\n  if ( price === undefined && param && paramtype ) {\n    if ( paramtype === 'category' ) {\n      var dataPromise = returnSortedCat(param);\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          console.log('failed!');\n      });\n    }\n\n    if ( paramtype === 'brand' ) {\n      var dataPromise = returnSortedBrand(param);\n\n      dataPromise.done(function(products) {\n        render(products);\n      })\n      .fail(function() {\n          console.log('failed!');\n      });\n    }\n  }\n\n  if ( price && param && paramtype) {\n    var dataPromise = returnSortedMultiple(price, param, paramtype);\n\n    dataPromise.done(function(products) {\n      render(products);\n    })\n    .fail(function() {\n        console.log('failed!');\n    });\n  }\n\n  sortPriceController();\n}\n\nfunction returnSortedMultiple(price, param, paramtype) {\n  var sortdef = $.Deferred();\n\n  function getFirstList() {\n    var getFirst = $.Deferred();\n\n    if ( price ) {\n      if ( price === 'price_asc' ) {\n        var init = returnSortedPriceLow();\n\n        init.then(function(sortedPrice) {\n          getFirst.resolve(sortedPrice);\n        });\n      }\n\n      if ( price === 'price_desc' ) {\n        var init = returnSortedPriceHigh();\n\n        init.then(function(sortedPrice) {\n          getFirst.resolve(sortedPrice);\n        });\n      }\n\n    } else {\n      getFirst.reject('first rejected');\n    }\n    return getFirst;\n  }\n\n  function getSecondList() {\n    var getSecond = $.Deferred();\n    var firstPromise = getFirstList();\n\n    firstPromise.then(function(sortedPrice) {\n      if ( sortedPrice ) {\n\n        if ( param ) {\n          if ( paramtype === 'brand' ) {\n            var finalSort = returnSortedBrand(param, sortedPrice);\n            finalSort.then(function(brandSorted) {\n              getSecond.resolve(brandSorted);\n            });\n          }\n\n          if ( paramtype === 'category' ) {\n            var finalSort = returnSortedCat(param, sortedPrice);\n            finalSort.then(function(catSorted) {\n              getSecond.resolve(catSorted);\n            });\n          }\n        } else {\n          getSecond.reject('rejected - no param', sortedPrice);\n        }\n      }\n\n      if ( !sortedPrice && param ) {\n        if ( paramtype === 'brand' ) {\n            var finalSort = returnSortedBrand(param);\n            finalSort.then(function(brandSorted) {\n              getSecond.resolve(brandSorted);\n            });\n          }\n\n          if ( paramtype === 'category' ) {\n            var finalSort = returnSortedCat(param);\n            finalSort.then(function(catSorted) {\n              getSecond.resolve(catSorted);\n            });\n          }\n      } else {\n        getSecond.reject('rejected !products && param');\n      }\n    });\n\n    return getSecond;\n  }\n\n  $.when( getSecondList() ).then(function(data) {\n    sortdef.resolve(data);\n  });\n\n  return sortdef;\n}\n\nfunction returnSortedCat(param, products) {\n  var sorted = [],\n      defer = $.Deferred();\n\n  if ( !products ) {\n    var newProductsPromise = productsSupplyer();\n\n    newProductsPromise.then(function(newProducts) {\n      $(newProducts).each(function(i,e) {\n        var cats = e.categories;\n        if ( cats.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    });\n  } else {\n    function sort() {\n      $(products).each(function(i,e) {\n        var categories = e.categories;\n        if ( categories.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    }\n\n    sort();\n  }\n\n  return defer;\n}\n\nfunction returnSortedBrand(param, products) {\n  var sorted = [];\n  var defer = $.Deferred();\n\n  if ( !products ) {\n    var newProductsPromise = productsSupplyer();\n\n    newProductsPromise.then(function(newProducts) {\n      $(newProducts).each(function(i,e) {\n        var brands = e.tags;\n        if ( brands.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    });\n  } else {\n    function sort() {\n      $(products).each(function(i,e) {\n        var brands = e.tags;\n        if ( brands.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    }\n\n    sort();\n  }\n\n  return defer;\n}\n\nfunction returnSortedPriceLow() {\n  var newProductsPromise = productsSupplyer(),\n      defer = $.Deferred();\n\n  newProductsPromise.then(function(newProducts) {\n    var initArray = [],\n        sorted = [];\n\n    $(newProducts).each(function(i,e) {\n      var object = {\n        price: parseInt(e['regular_price']),\n        element: e\n      }\n      initArray.push(object);\n    });\n\n    function sortPrice(a,b) {\n      return a.price - b.price;\n    }\n\n    var initialSort = initArray.sort(sortPrice);\n\n    $(initialSort).each(function(j,f) {\n      sorted.push(f.element);\n    });\n\n    defer.resolve(sorted);\n  });\n\n  return defer;\n}\n\nfunction returnSortedPriceHigh() {\n  var newProductsPromise = productsSupplyer(),\n      defer = $.Deferred();\n\n  newProductsPromise.then(function(newProducts) {\n    var initArray = [],\n        sorted = [];\n\n    $(newProducts).each(function(i,e) {\n      var object = {\n        price: parseInt(e['regular_price']),\n        element: e\n      }\n      initArray.push(object);\n    });\n\n    function sortPrice(a,b) {\n      return a.price - b.price;\n    }\n\n    var initialSort = initArray.sort(sortPrice).reverse();\n\n    $(initialSort).each(function(j,f) {\n      sorted.push(f.element);\n    });\n\n    defer.resolve(sorted);\n  });\n\n  return defer;\n}\n\n\nfunction productsSupplyer() {\n  var url = window.location.href;\n  var def = $.Deferred();\n\n  if ( url.indexOf('/type/') === -1 && url.indexOf('/brands/') === -1 ) {\n    console.log('Exited from productsModel');\n    return;\n  }\n\n  var productsCache,\n      products,\n      storage = storageAvailable('localStorage'),\n      target = $('body').find('.product-list-grid'),\n      pageIndex,\n      maxPages,\n      type,\n      brand,\n      key,\n      query = {};\n      tags = {\n        brands: [],\n        categories: []\n      };\n      initialize();\n\n  function storageAvailable(type) {\n    try {\n      var storage = window[type],\n        x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return false;\n    }\n  }\n\n  function setPageIndex(index) {\n    pageIndex = index;\n  }\n\n  function getPageIndex() {\n    var p = pageIndex;\n    return p;\n  }\n\n  function setMaxPages(max) {\n    maxPages = max;\n  }\n\n  function getMaxPages() {\n    var p = maxPages;\n    return p;\n  }\n\n  function setQueryType() {\n    var parts;\n    if ( url.indexOf('/type/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'type',\n        param: parts[4]\n      }\n    }\n\n    if ( url.indexOf('/brands/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'brand',\n        param: parts[4]\n      }\n    }\n  }\n\n  function getQueryType() {\n    return query;\n  }\n\n  function initialize() {\n    var container = $('body').find('.products-container'),\n        pageIndex = $(container).data('page'),\n        maxPages = $(container).data('maxpages'),\n        type = $(container).data('cat'),\n        brand = $(container).data('tag');\n        setQueryType();\n        setMaxPages(maxPages);\n\n    if ( !pageIndex || pageIndex > maxPages ) {\n      setPageIndex(1);\n    } else {\n      setPageIndex(pageIndex);\n    }\n\n    var int = getPageIndex();\n    var queryParams = getQueryType();\n    key = queryParams.type + '_' + queryParams.param;\n\n    if ( storage ) {\n      productsCache = localStorage,\n      products = JSON.parse(productsCache.getItem(key));\n      if (products) {\n        def.resolve(products);\n      } else {\n        getPosts();\n      }\n    } else {\n      // load something else, maybe\n      console.log('no localStorage for us');\n    }\n  }\n\n  function getPosts() {\n    var queryType = getQueryType(),\n        action,\n        type = queryType.type;\n\n    if ( type === 'type' ) {\n      action = '?action=sinus_type';\n    }\n    if ( type === 'brand' ) {\n      action = '?action=sinus_brand';\n    }\n\n    var queryParams = {\n        offset: 0,\n        limit: -1,\n        param: queryType.param\n    },\n    dataObj = JSON.stringify(queryParams);\n\n    $.ajax({\n      url: site.ajax_url + action,\n      type: \"POST\",\n      data: dataObj,\n      dataType: 'json',\n      success: function(response) {\n        products = response.products;\n        productsCache.setItem(key, JSON.stringify(products));\n        def.resolve(products);\n      },\n      error: function(response) {\n        console.log(response);\n      }\n    });\n  }\n\n  return def;\n}\n\nfunction render(products) {\n  var grid = $('body').find('.product-list-grid'),\n      spinner = $('body').find('.spinner'),\n      pages = $('body').find('.page.products'),\n      length = products.length;\n\n  if ( !$(spinner).hasClass('hidden') ) {\n    $(spinner).addClass('hidden');\n  }\n\n  if ( pages ) {\n    $(pages).each(function(i,e) {\n      $(e).remove();\n    });\n  }\n\n  var pageIndex = 1;\n  var html = '<div class=\"page products page-1 hidden\">';\n      html += '<ul class=\"products\">';\n\n  $(products).each(function(i, e) {\n    var k = i + 1;\n\n    $(e.tags).each(function(i, e) {\n      tags.brands.push(e);\n    });\n\n    $(e.categories).each(function(i, e) {\n      tags.categories.push(e);\n    });\n\n    var template = setTemplate(e);\n    html += template;\n\n    if ( k % 24 === 0 && i < length ) {\n      pageIndex++;\n      html += '</ul>';\n      html += '</div>';\n      html += '<div class=\"page products page-' + pageIndex + ' hidden\">';\n      html += '<ul class=\"products\">';\n    }\n  });\n\n  html += '</ul>';\n  html += '</div>';\n\n  $(grid).append(html);\n  sortTags(tags);\n  scrollController();\n  setMenuHeight();\n  var page = $('body').find('.page.page-1');\n  $(page).removeClass('hidden');\n  setTimeout(function() {\n    new gridCartController();\n  }, 1500);\n}\n\n\nfunction setTemplate(e) {\n  var stockIcon;\n\n  if ( e.in_stock === 'false' ) {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-minus-square\"></span></div>';\n  } else {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-check-square\"></i></span></div>';\n  }\n\n  var desc = e.description;\n  var trunc = desc.split(\" \").splice(0, 23).join(\" \");\n\n  var template = '<li class=\"product\" itemscope itemtype=\"http://schema.org/Product\">' + stockIcon;\n      template += '<img src=\"' + e.featured_src + '\" alt=\"' + e.title + ' product image produktbillede Sinus-store Copenhagen København Denmark\" />';\n      template += '<div class=\"product-price\">' + e.price_html + '<div class=\"add-button\" data-href=\"' + e.id + '\" data-title=\"' + e.title + '\"><svg version=\"1.1\" baseProfile=\"tiny\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"x=\"0px\" y=\"0px\" viewBox=\"0 0 60 60\" xml:space=\"preserve\"><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"30\" y1=\"6\" x2=\"30\" y2=\"54\"/><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"6\" y1=\"30\" x2=\"54\" y2=\"30\"/></svg><span class=\"add-info\">Tilføj til kurv</span></div></div>';\n      template += '<div class=\"sinus-product-info\"><div class=\"product-title\" itemprop=\"name\"><h3>' + e.title + '</h3></div><div class=\"short-desc\" itemprop=\"description\">' + trunc + '</div></div>';\n      template += '</li>';\n\n  return template;\n}\n\n\nfunction sortTags(tags) {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      categories = _.uniq(tags.categories),\n      brands = _.uniq(tags.brands),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      catHtml,\n      brandHtml;\n\n  if ( pCat.length !== 0 || pBrand.length !== 0 ) {\n    return\n  } else {\n    $(categories).each(function(i, cat) {\n      catHtml = '<p data-cat=\"' + cat + '\"><i class=\"fa fa-search-plus\"></i>' + cat + '</p>';\n      $(categoryContainer).append(catHtml);\n    });\n\n    $(brands).each(function(i, brand) {\n      brandHtml = '<p data-brand=\"' + brand + '\"><i class=\"fa fa-search-plus\"></i>' + brand + '</p>';\n      $(brandContainer).append(brandHtml);\n    });\n\n    setTimeout(function() {\n      sortController();\n    }, 1500);\n  }\n}\n\nfunction sortController() {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      products = $('body').find('li.product'),\n      pages = $('body').find('.page.products'),\n      href = window.location.href;\n\n  $(pCat).each(function(i,e) {\n    var param = $(e).data('cat');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      var paramtype = 'category';\n      var price = null;\n      sortUrl(price, param, paramtype);\n\n    });\n  });\n\n  $(pBrand).each(function(i,e) {\n    var param = $(e).data('brand');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      var paramtype = 'brand';\n      var price = null;\n      sortUrl(price, param, paramtype);\n    });\n  });\n}\n\nfunction sortPriceController() {\n  var direction = 'asc';\n\n  function setDirection(dir) {\n    direction = dir;\n  }\n\n  function getDirection() {\n    return direction;\n  }\n\n  var priceSorter = $('.menu-left').find('.sort-links > .price-sorter');\n\n  if ( !priceSorter ) {\n    return;\n  }\n\n  $(priceSorter).on('click', function() {\n    var currentDir = getDirection();\n\n    if ( currentDir === 'asc' ) {\n      setDirection('desc');\n      var price = 'price_asc';\n      sortUrl(price);\n\n    }\n\n    if ( currentDir === 'desc' ) {\n      setDirection('asc');\n      var price = 'price_desc';\n      sortUrl(price);\n    }\n  });\n}\n\nfunction scrollController() {\n  var pages = $('body').find('.page.products.hidden'),\n      content = $('body').find('.site-content'),\n      height = $(content).height(),\n      windowHeight = $(window).height();\n\n  if ( !pages ) {\n    return;\n  }\n\n  $(window).on('scroll', function() {\n    var scroll = $(document).scrollTop(),\n        height = $(content).height();\n\n    if ( scroll >= ((height - windowHeight) - 500) ) {\n      window.requestAnimationFrame(function() {\n        updateView();\n      });\n    }\n  });\n\n  function updateView() {\n    var trig = 0;\n    if (!pages[0] || trig > 0 ) {\n      return;\n    } else {\n      $(pages[0]).removeClass('hidden');\n      trig++;\n      setTimeout(function() {\n        scrollController();\n      }, 1000);\n    }\n  }\n}\n\nvar fpBackgroundController = function() {\n  var bgContainer = $('body').find('.bg-container'),\n      firstImg = $(bgContainer).find('img'),\n      index;\n\n  if ( !bgContainer ) {\n    return;\n  }\n\n  if ( firstImg && firstImg[0] ) {\n    if (firstImg[0].complete) {\n      imagesHandler();\n    } else {\n      firstImg.load(imagesHandler);\n    }\n  }\n\n  function imagesHandler() {\n    setIndex(1);\n    $(firstImg).velocity({\n      'opacity': 1\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    for( var i = 2; i < 7; i++ ) {\n      var img = $('<img />').attr('src', site.theme_path + '/img/bg/bg' + i + '.png').attr('class', 'bg-' + i);\n      $(bgContainer).append(img);\n    }\n\n    setTimeout(controller, 8000);\n  }\n\n  function controller() {\n    var j = getIndex(),\n        k = j+1;\n\n    if ( k > 6 ) {\n      k = 1;\n    }\n\n    var curImg = $(bgContainer).find('img.bg-' + j),\n        newImg = $(bgContainer).find('img.bg-' + k);\n\n    window.requestAnimationFrame(animateIn(newImg));\n    window.requestAnimationFrame(animateOut(curImg));\n\n    setIndex(k);\n\n    setTimeout(controller, 4000);\n  }\n\n  function animateIn(image) {\n    $(image).velocity({\n      'opacity': 1\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function animateOut(image) {\n    $(image).velocity({\n      'opacity': 0\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function getIndex() {\n    n = index;\n    return n;\n  }\n\n  function setIndex(newIndex) {\n    index = newIndex;\n  }\n}\n\nvar fpVideoController = function() {\n  var vid = document.getElementById('frontpage-video');\n\n  if (!vid) {\n    return;\n  } else {\n    var spinner = $('body').find('.spinner'),\n        container = $('body').find('.front-video-container'),\n        vidElement = $(container).find('#frontpage-video'),\n        movingContent = $('body').find('.moving-content'),\n        width = $(window).width(),\n        vidHeight = ((width/100*80)/16)*9;\n\n    addEventListeners();\n  }\n\n  function addEventListeners() {\n    vid.addEventListener('canplaythrough', animShowVideo);\n    vid.addEventListener('ended', animOutVideo);\n  }\n\n  function animShowVideo() {\n    $(spinner).addClass('hidden');\n\n    $(container).velocity({\n      'height': vidHeight\n    }, {duration: 700, delay: 0, easing: [.24,.63,.5,.99]});\n\n    $(vidElement).velocity({\n      'opacity': 1\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': vidHeight + 30\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    setTimeout(function() {\n      if ( vid.paused ) {\n        vid.play();\n      }\n    }, 700);\n  }\n\n  function animOutVideo() {\n    $(vidElement).velocity({\n      'opacity': 0\n    }, {duration: 300, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(container).velocity({\n      'height': 60\n    }, {duration: 1000, delay: 400, easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': 90\n    }, {duration: 1000, delay: 400, display: 'block', easing: [.24,.63,.5,.99]});\n\n    scrollTo(0);\n  }\n}\n\n\nvar scrollHeaderController = function() {\n  var linkHeader = $('body').find('.header-link-row'),\n      width = $(window).width(),\n      scroll;\n\n  $(window).on('scroll', modifyHeader);\n\n  function modifyHeader() {\n    scroll = $(window).scrollTop();\n\n    if ( scroll > 500 ) {\n      $(linkHeader).addClass('hidden');\n    }\n    if ( scroll < 500 ) {\n      $(linkHeader).removeClass('hidden');\n    }\n  }\n}\n\nfunction validateEmail(email) {\n  var regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n  return regex.test(email);\n}\n\nfunction validateInput(input) {\n  var allowedChars = /^[\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w&.,\\- ]+$/;\n  return allowedChars.test(input);\n}\n\nfunction validateNumber(input) {\n  var isNumber = /^(?=.*[0-9])[+()0-9]+$/;\n  return isNumber.test(input);\n}\n\nvar reserveFormController = function() {\n  var form = $('body').find('form.reserve'),\n      emailInput = $(form).find('input[type=email]'),\n      nameInput = $(form).find('input[type=text].name'),\n      phoneInput = $(form).find('input[type=text].phone'),\n      submitBtn = $(form).find('.submit-btn > a');\n\n  function validateEmailOnBlur() {\n    $(emailInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isEmail = validateEmail(value);\n\n        if( !isEmail && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isEmail && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNameOnBlur() {\n    $(nameInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isTrustedCharacters = validateInput(value);\n\n        if( !isTrustedCharacters && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isTrustedCharacters && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNumberOnBlur() {\n    $(phoneInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isNumber = validateNumber(value);\n\n        if ( !isNumber && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if ( isNumber && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function submitListener() {\n    $(submitBtn).on('click', function(event) {\n      event.preventDefault(),\n      inputs = $(form).find('input'),\n      validSuccess = $('body').find('.validation.success');\n      dataObject = {},\n      inputArray = [];\n\n      $(inputs).each(function(i, e) {\n        if ( $(e).hasClass('error') || $(e).val().length === 0 ) {\n          return;\n        } else {\n          var object = {\n            name: e.name,\n            value: $(e).val()\n          }\n          inputArray.push(object);\n        }\n      });\n\n      var data = packData();\n      sendForm(data);\n    });\n\n    function packData() {\n      dataObject.customer_html = '<h4>Navn:</h4><h2>' + inputArray[0].value + '</h2>';\n      dataObject.customer_html += '<h4>TLF:</h4><h2>' + inputArray[1].value + '</h2>';\n      dataObject.customer_html += '<h4>EMAIL:</h4><h2>' + inputArray[2].value + '</h2>';\n      dataObject.customer_email = inputArray[2].value;\n\n      return dataObject;\n    }\n\n    function sendForm(data) {\n      var customerData = JSON.stringify(data);\n\n        $.ajax({\n          url: site.ajax_url + '?action=reserve',\n          type: 'POST',\n          data: customerData,\n          success: function(response) {\n            var stripResponse = $.trim(response);\n            console.log(stripResponse);\n            if ( stripResponse === 'Success' ) {\n              animateSuccess();\n            }\n            if ( stripResponse === 'Error' ) {\n\n            }\n          },\n          error: function(response) {\n            console.log(response);\n          }\n        });\n    }\n\n    function animateSuccess() {\n      $(form).velocity({\n        'opacity': [0, 1]\n      }, {duration: 300, delay: 0, easing: [.24,.63,.5,.99], display: 'none'});\n\n      $(validSuccess).velocity({\n        'opacity': [1, 0]\n      }, {duration: 300, delay: 350, easing: [.24,.63,.5,.99], display: 'block'});\n\n      setTimeout(function() {\n        window.location.href = window.location.href;\n      }, 1000);\n    }\n  }\n\n  validateNumberOnBlur();\n  validateEmailOnBlur();\n  validateNameOnBlur();\n  submitListener();\n}\n\n\nfunction shopMsg(title, msg) {\n  var atcModal = $('body').find('.atc-modal');\n\n  if ( !msg ) {\n    var msg = '<span>- blev tilføjet til kurven.</span>';\n  } else {\n    var msg = msg;\n  }\n\n  var html = '<h3>' + title + '</h3>' + msg;\n\n  $(atcModal).append(html);\n\n  function animate() {\n    $(atcModal).velocity({\n      'opacity': [1, 0],\n      'top': [150, 300],\n      'z-index': [5000, 5000]\n    }, {duration: 400, delay: 0, easing: 'easeInOutSine'});\n\n    $(atcModal).velocity({\n      'opacity': [0, 1],\n      'top': [300, 150],\n      'z-index': 5000\n    }, {duration: 400, delay: 1400, easing: 'easeInOutSine'});\n  }\n\n  setTimeout(function() {\n    animate();\n  }, 100);\n\n  setTimeout(function() {\n    $(atcModal).html('');\n    $(atcModal).css({\n      'z-index': -1000\n    });\n  }, 2000);\n}\n\n\nvar productTextController = function() {\n  var textIcon = $('body').find('.text-icon'),\n      productLeft = $('body').find('.product-left'),\n      productRight = $('body').find('.product-right');\n\n  $(textIcon).on('click', function() {\n    toggleClass();\n  });\n\n  function toggleClass() {\n    $(textIcon).toggleClass('off');\n    $(productLeft).toggleClass('off');\n    $(productRight).toggleClass('off');\n  }\n\n  setTimeout(toggleClass, 800);\n}\n\nvar singleProductHeightController = function() {\n  var mainImage = $('.main-image img'),\n      iFrame = $('body').find('iframe');\n\n  if ( mainImage && mainImage[0] ) {\n    if (mainImage[0].complete) {\n      handler();\n    } else {\n      mainImage.load(handler);\n    }\n  } else {\n    return;\n  }\n\n  function handler() {\n    var contentHeight = $('.product-content').height(),\n        imageHeight = $('.main-image img').height();\n\n    if ( contentHeight && imageHeight < contentHeight ) {\n      $('.main-image').css({\n        'height': contentHeight + 'px'\n      });\n    } else {\n      return;\n    }\n    setMenuHeight();\n  }\n}\n\nvar embedVidController = function() {\n  var vidFrame = $('body').find('.youtube-frame');\n\n  if ( vidFrame.length > 0 ) {\n    initVideo();\n  } else {\n    return;\n  }\n\n  function initVideo() {\n    var vidUrl = $(vidFrame).attr('data-href');\n        if ( vidUrl.indexOf('=') !== -1 ) {\n          var vidId = vidUrl.split('='),\n              id = vidId[1];\n        } else {\n          var vidId = vidUrl.split('/');\n          id = vidId[3];\n        }\n\n    var width = $(window).width(),\n        height = (width / 16) * 9;\n\n    var constructedHtml = '<iframe width=\"' + width + '\" height=\"' + height + '\" src=\"https://www.youtube.com/embed/' + id + '?rel=0&amp;showinfo=0\" frameborder=\"0\" allowfullscreen></iframe>';\n\n    $(vidFrame).html(constructedHtml);\n  }\n};\n\n\nvar gridCartController = function() {\n  var addBtn = $('body').find('.add-button'),\n      cart = $('body').find('.cart-contents');\n\n\n  $(addBtn).each(function(i, e) {\n    var id = $(this).attr('data-href'),\n        prodTitle = $(this).attr('data-title');\n\n    $(this).on('click', function(event) {\n      event.preventDefault();\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_add',\n          dataObject = {\n            'product_id': id\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt + 1;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          shopMsg(prodTitle);\n\n          setTimeout(function() {\n            window.location.href = window.location.href;\n          }, 1000);\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nvar removeFromCartController = function() {\n    var cart = $('body').find('.cart-contents'),\n        remBtn = $(cart).find('.remove-icon');\n\n  $(remBtn).each(function(i, e) {\n    var id = $(this).attr('data-id'),\n        qtyElem = $(this).siblings('.elem-qty-total'),\n        qty = parseInt($(qtyElem).attr('data-qty'));\n\n\n    $(this).on('click', function() {\n      console.log(qty, id);\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_remove',\n          dataObject = {\n            'product_id': id,\n            'quantity': qty\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt - qty;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          window.location.href = window.location.href;\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nfunction setMenuHeight() {\n  setTimeout(function() {\n    var mainMenu = $('body').find('.main-menu'),\n        siteContent = $('body').find('.site-content'),\n        documentHeight = $('.site-content').height();\n\n     // set menu height, relative to content height (minus footer)\n    $(mainMenu).css({\n      'height': documentHeight - 325 + 'px'\n    });\n  }, 1000);\n}\n\nvar MenuController = function() {\n  var menuBtn = $('body').find('.menu-icon'),\n      mainMenu = $('body').find('.main-menu'),\n      menuLinks = $(mainMenu).find('li'),\n      menuHeaders = $(mainMenu).find('h3'),\n      searchForm = $('body').find('.search-form'),\n      cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents'),\n      width = $(window).width();\n      setMenuHeight();\n\n      $(menuBtn).on('click', animateMenu);\n\n      function animateMenu() {\n        if ( $(mainMenu).hasClass('hidden') ) {\n          $(mainMenu).removeClass('hidden');\n          $(this).addClass('open');\n          scrollTo('0px');\n          updateHeaderOpen();\n          addEventListener();\n        } else {\n          $(mainMenu).addClass('hidden');\n          $(this).removeClass('open');\n          updateHeaderClose();\n        }\n      }\n\n\n      function updateHeaderOpen() {\n        var rawIconCss = $(cartIcon).css('right'),\n            rawSearchCss = $(searchForm).css('right'),\n            rawCartContCss = $(cartContents).css('right'),\n            iconRight = parseInt(rawIconCss.replace('px', '')),\n            searchRight = parseInt(rawSearchCss.replace('px', '')),\n            cartContRight = parseInt(rawCartContCss.replace('px', ''));\n\n\n            $(cartIcon).velocity({\n              'right': iconRight + 230 + 'px'\n            }, {duration: 400, delay: 100, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': searchRight + 230 + 'px'\n            }, {duration: 400, delay: 0, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': cartContRight + 230 + 'px'\n            }, {duration: 400, delay: 150, easing: [.24,.63,.5,.99]});\n      }\n\n      function updateHeaderClose() {\n            $(cartIcon).velocity({\n              'right': 90\n            }, {duration: 300, delay: 200, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': 165\n            }, {duration: 300, delay: 300, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': 80\n            }, {duration: 300, delay: 250, easing: [.24,.63,.5,.99]});\n      }\n\n      function addEventListener() {\n        $(menuLinks).on('click', function(e) {\n          e.preventDefault();\n          var aHref =  $(this).find('a');\n          var href = $(aHref).attr('href');\n\n          $(menuLinks).each(function(i, elem) {\n            var delay = i * 20;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n\n          });\n\n          $(menuHeaders).each(function(i, elem) {\n            var delay = i * 30;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n          });\n\n          setTimeout(navigate(href), 1200);\n        });\n      }\n\n      function navigate(href) {\n        setTimeout(function() {\n          $(menuBtn).removeClass('open');\n          $(mainMenu).addClass('hidden');\n          updateHeaderClose();\n        }, 1000);\n\n        setTimeout(function() {\n          window.location.href = href;\n        }, 1300);\n      }\n};\n\nvar CartController = function() {\n  var cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents');\n\n  $(cartIcon).on('click', function(e) {\n    $(cartContents).toggleClass('hidden');\n  });\n}\n\n\n// http://sin.us/wp-json/posts?type=product&filter[product_cat]=hifi&filter[orderby]=price&filter[order]=asc\n\n"],"sourceRoot":"/source/"}