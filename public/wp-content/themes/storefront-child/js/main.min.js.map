{"version":3,"sources":["main.js"],"names":["scrollTo","value","$","animate","scrollTop","productsController","promise","productsSupplyer","then","products","render","storageAvailable","type","storage","window","x","setItem","removeItem","e","setPageIndex","index","pageIndex","getPageIndex","p","setMaxPages","max","maxPages","setQueryType","parts","url","indexOf","split","query","param","getQueryType","initialize","container","find","data","queryParams","key","productsCache","localStorage","JSON","parse","getItem","def","resolve","getPosts","console","log","action","queryType","offset","limit","dataObj","stringify","ajax","site","ajax_url","dataType","success","response","error","location","href","Deferred","tags","brands","categories","grid","spinner","pages","length","hasClass","addClass","each","i","remove","html","k","push","template","setTemplate","append","sortTags","scrollController","page","removeClass","catHtml","brandHtml","menuLeft","categoryContainer","brandContainer","_","uniq","pCat","pBrand","cat","brand","setTimeout","sortController","on","delay","velocity","opacity","duration","display","easing","detach","returnSortedCat","returnSortedBrand","newProductsPromise","sorted","newProducts","cats","updateView","trig","content","height","scroll","document","stockIcon","in_stock","featured_src","title","price_html","id","validateEmail","email","regex","test","validateInput","input","allowedChars","validateNumber","isNumber","shopMsg","msg","atcModal","top","z-index","css","setMenuHeight","mainMenu","documentHeight","jQuery","CartController","MenuController","gridCartController","embedVidController","productTextController","singleProductHeightController","removeFromCartController","reserveFormController","scrollHeaderController","fpVideoController","fpBackgroundController","focus","this","blur","imagesHandler","setIndex","firstImg","img","attr","theme_path","bgContainer","controller","j","getIndex","curImg","newImg","animateIn","animateOut","image","n","newIndex","complete","load","addEventListeners","vid","addEventListener","animShowVideo","animOutVideo","vidHeight","vidElement","movingContent","paused","play","getElementById","width","modifyHeader","linkHeader","validateEmailOnBlur","emailInput","val","isEmail","validateNameOnBlur","nameInput","isTrustedCharacters","validateNumberOnBlur","phoneInput","submitListener","packData","dataObject","customer_html","inputArray","customer_email","sendForm","customerData","stripResponse","trim","animateSuccess","form","validSuccess","submitBtn","event","preventDefault","inputs","object","name","toggleClass","textIcon","productLeft","productRight","handler","contentHeight","imageHeight","mainImage","initVideo","vidUrl","vidFrame","vidId","constructedHtml","addBtn","cart","prodTitle","cartNumber","cartInt","parseInt","text","product_id","updatedNum","remBtn","qtyElem","siblings","qty","quantity","animateMenu","updateHeaderOpen","updateHeaderClose","rawIconCss","cartIcon","rawSearchCss","searchForm","rawCartContCss","cartContents","iconRight","replace","searchRight","cartContRight","right","menuLinks","aHref","elem","menuHeaders","navigate","menuBtn"],"mappings":"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","file":"main.min.js","sourcesContent":["// Test if ie10 - adds class \"ie10\" to HTML tag, if true. - Excludes IE11\nif (/*@cc_on!@*/false && document.documentMode === 10) {\n    document.documentElement.className+=' ie10';\n}\n\njQuery(document).on('ready', function() {\n  $ = jQuery;\n\n\n  new CartController();\n  new MenuController();\n  new gridCartController();\n  new embedVidController();\n  new productTextController();\n  new singleProductHeightController();\n  new removeFromCartController();\n  new reserveFormController();\n  new scrollHeaderController();\n  new fpVideoController();\n  new fpBackgroundController();\n  productsController();\n\n  // labels for input fields\n  $(\"form :input\").focus(function() {\n    $(\"label[for='\" + this.id + \"']\").addClass(\"focus\");\n  }).blur(function() {\n    $(\"label\").removeClass(\"focus\");\n  });\n}); // End Ready\n\nvar documentHeight;\n\nfunction scrollTo(value) {\n  $('html, body').animate({\n    scrollTop: value\n  }, 700);\n}\n\nfunction productsController() {\n  var promise = productsSupplyer();\n\n  promise.then(function(products) {\n    render(products);\n  });\n}\n\n\nfunction productsSupplyer() {\n  var url = window.location.href;\n  var def = $.Deferred();\n\n  if ( url.indexOf('/type/') === -1 && url.indexOf('/brands/') === -1 ) {\n    console.log('Exited from productsModel');\n    return;\n  }\n\n  var productsCache,\n      products,\n      storage = storageAvailable('localStorage'),\n      target = $('body').find('.product-list-grid'),\n      pageIndex,\n      maxPages,\n      type,\n      brand,\n      key,\n      query = {};\n      tags = {\n        brands: [],\n        categories: []\n      };\n      initialize();\n\n  function storageAvailable(type) {\n    try {\n      var storage = window[type],\n        x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return false;\n    }\n  }\n\n  function setPageIndex(index) {\n    pageIndex = index;\n  }\n\n  function getPageIndex() {\n    var p = pageIndex;\n    return p;\n  }\n\n  function setMaxPages(max) {\n    maxPages = max;\n  }\n\n  function getMaxPages() {\n    var p = maxPages;\n    return p;\n  }\n\n  function setQueryType() {\n    var parts;\n    if ( url.indexOf('/type/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'type',\n        param: parts[4]\n      }\n    }\n\n    if ( url.indexOf('/brands/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'brand',\n        param: parts[4]\n      }\n    }\n  }\n\n  function getQueryType() {\n    return query;\n  }\n\n  function initialize() {\n    var container = $('body').find('.products-container'),\n        pageIndex = $(container).data('page'),\n        maxPages = $(container).data('maxpages'),\n        type = $(container).data('cat'),\n        brand = $(container).data('tag');\n        setQueryType();\n        setMaxPages(maxPages);\n\n    if ( !pageIndex || pageIndex > maxPages ) {\n      setPageIndex(1);\n    } else {\n      setPageIndex(pageIndex);\n    }\n\n    var int = getPageIndex();\n    var queryParams = getQueryType();\n    key = queryParams.type + '_' + queryParams.param;\n\n    if ( storage ) {\n      productsCache = localStorage,\n      products = JSON.parse(productsCache.getItem(key));\n      if (products) {\n        def.resolve(products);\n      } else {\n        getPosts();\n      }\n    } else {\n      // load something else, maybe\n      console.log('no localStorage for us');\n    }\n  }\n\n  function getPosts() {\n    var queryType = getQueryType(),\n        action,\n        type = queryType.type;\n\n    if ( type === 'type' ) {\n      action = '?action=sinus_type';\n    }\n    if ( type === 'brand' ) {\n      action = '?action=sinus_brand';\n    }\n\n    var queryParams = {\n        offset: 0,\n        limit: -1,\n        param: queryType.param\n    },\n    dataObj = JSON.stringify(queryParams);\n\n    $.ajax({\n      url: site.ajax_url + action,\n      type: \"POST\",\n      data: dataObj,\n      dataType: 'json',\n      success: function(response) {\n        products = response.products;\n        productsCache.setItem(key, JSON.stringify(products));\n        def.resolve(products);\n      },\n      error: function(response) {\n        console.log(response);\n      }\n    });\n  }\n\n  return def;\n}\n\nfunction render(products) {\n  var grid = $('body').find('.product-list-grid'),\n      spinner = $('body').find('.spinner'),\n      pages = $('body').find('.page.products'),\n      length = products.length;\n\n  if ( !$(spinner).hasClass('hidden') ) {\n    $(spinner).addClass('hidden');\n  }\n\n  if ( pages ) {\n    $(pages).each(function(i,e) {\n      $(e).remove();\n    });\n  }\n\n  var pageIndex = 1;\n  var html = '<div class=\"page products page-1 hidden\">';\n      html += '<ul class=\"products\">';\n\n  $(products).each(function(i, e) {\n    var k = i + 1;\n\n    $(e.tags).each(function(i, e) {\n      tags.brands.push(e);\n    });\n\n    $(e.categories).each(function(i, e) {\n      tags.categories.push(e);\n    });\n\n    var template = setTemplate(e);\n    html += template;\n\n    if ( k % 24 === 0 && i < length ) {\n      pageIndex++;\n      html += '</ul>';\n      html += '</div>';\n      html += '<div class=\"page products page-' + pageIndex + ' hidden\">';\n      html += '<ul class=\"products\">';\n    }\n  });\n\n  html += '</ul>';\n  html += '</div>';\n\n  $(grid).append(html);\n  sortTags(tags);\n  scrollController();\n  var page = $('body').find('.page.page-1');\n  $(page).removeClass('hidden');\n}\n\nfunction sortTags(tags) {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      categories = _.uniq(tags.categories),\n      brands = _.uniq(tags.brands),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      catHtml,\n      brandHtml;\n\n  if ( pCat.length !== 0 || pBrand.length !== 0 ) {\n    return\n  } else {\n    $(categories).each(function(i, cat) {\n      catHtml = '<p data-cat=\"' + cat + '\"><i class=\"fa fa-search-plus\"></i>' + cat + '</p>';\n      $(categoryContainer).append(catHtml);\n    });\n\n    $(brands).each(function(i, brand) {\n      brandHtml = '<p data-brand=\"' + brand + '\"><i class=\"fa fa-search-plus\"></i>' + brand + '</p>';\n      $(brandContainer).append(brandHtml);\n    });\n\n    setTimeout(function() {\n      sortController();\n    }, 1500);\n  }\n}\n\nfunction sortController() {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      products = $('body').find('li.product'),\n      pages = $('body').find('.page.products');\n\n  $(pCat).each(function(i,e) {\n    var param = $(e).data('cat');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      returnSortedCat(param);\n    });\n  });\n\n  $(pBrand).each(function(i,e) {\n    var param = $(e).data('brand');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n\n      returnSortedBrand(param);\n    });\n  });\n}\n\nfunction returnSortedCat(param) {\n  var newProductsPromise = productsSupplyer(),\n      sorted = [];\n\n  newProductsPromise.then(function(newProducts) {\n    $(newProducts).each(function(i,e) {\n      var cats = e.categories;\n\n      if ( cats.indexOf(param) !== -1 ) {\n        sorted.push(e);\n      }\n    });\n\n    render(sorted);\n  });\n}\n\nfunction returnSortedBrand(param) {\n  var newProductsPromise = productsSupplyer(),\n      sorted = [];\n\n  newProductsPromise.then(function(newProducts) {\n    $(newProducts).each(function(i,e) {\n      var brands = e.tags;\n      if ( brands.indexOf(param) !== -1 ) {\n        sorted.push(e);\n      }\n    });\n\n    render(sorted);\n  });\n}\n\n\nfunction scrollController() {\n  var pages = $('body').find('.page.hidden'),\n      content = $('body').find('.site-content'),\n      height = $(content).height(),\n      windowHeight = $(window).height();\n\n  if ( !pages ) {\n    return;\n  }\n\n  $(window).on('scroll', function() {\n    var scroll = $(document).scrollTop(),\n        height = $(content).height();\n\n    if ( scroll >= (height - 800) ) {\n      updateView();\n    }\n  });\n\n  function updateView() {\n    var trig = 0;\n    if (!pages[0] || trig > 0 ) {\n      return;\n    } else {\n      $(pages[0]).removeClass('hidden');\n      trig++;\n      setTimeout(function() {\n        scrollController();\n      }, 1000);\n    }\n  }\n}\n\nfunction setTemplate(e) {\n  var stockIcon;\n\n  if ( e.in_stock === 'false' ) {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-minus-square\"></span></div>';\n  } else {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-check-square\"></i></span></div>';\n  }\n\n  var template = '<li class=\"product\" itemscope itemtype=\"http://schema.org/Product\">' + stockIcon;\n      template += '<img src=\"' + e.featured_src + '\" alt=\"' + e.title + ' product image produktbillede Sinus-store Copenhagen København Denmark\" />';\n      template += '<div class=\"product-price\">' + e.price_html + '<div class=\"add-button\" data-href=\"' + e.id + '\" data-title=\"' + e.title + '\"><svg version=\"1.1\" baseProfile=\"tiny\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"x=\"0px\" y=\"0px\" viewBox=\"0 0 60 60\" xml:space=\"preserve\"><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"30\" y1=\"6\" x2=\"30\" y2=\"54\"/><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"6\" y1=\"30\" x2=\"54\" y2=\"30\"/></svg><span class=\"add-info\">Tilføj til kurv</span></div></div>';\n      template += '<div class=\"sinus-product-info\"><div class=\"product-title\" itemprop=\"name\"><h3>' + e.title + '</h3></div><div class=\"short-desc\" itemprop=\"description\">' + e.title + '</div></div>';\n      template += '</li>';\n\n  return template;\n}\n\nvar fpBackgroundController = function() {\n  var bgContainer = $('body').find('.bg-container'),\n      firstImg = $(bgContainer).find('img'),\n      index;\n\n  if ( !bgContainer ) {\n    return;\n  }\n\n  if ( firstImg && firstImg[0] ) {\n    if (firstImg[0].complete) {\n      imagesHandler();\n    } else {\n      firstImg.load(imagesHandler);\n    }\n  }\n\n  function imagesHandler() {\n    setIndex(1);\n    $(firstImg).velocity({\n      'opacity': 1\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    for( var i = 2; i < 7; i++ ) {\n      var img = $('<img />').attr('src', site.theme_path + '/img/bg/bg' + i + '.png').attr('class', 'bg-' + i);\n      $(bgContainer).append(img);\n    }\n\n    setTimeout(controller, 8000);\n  }\n\n  function controller() {\n    var j = getIndex(),\n        k = j+1;\n\n    if ( k > 6 ) {\n      k = 1;\n    }\n\n    var curImg = $(bgContainer).find('img.bg-' + j),\n        newImg = $(bgContainer).find('img.bg-' + k);\n\n    animateIn(newImg);\n    animateOut(curImg);\n\n    setIndex(k);\n\n    setTimeout(controller, 4000);\n  }\n\n  function animateIn(image) {\n    $(image).velocity({\n      'opacity': 1\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function animateOut(image) {\n    $(image).velocity({\n      'opacity': 0\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function getIndex() {\n    n = index;\n    return n;\n  }\n\n  function setIndex(newIndex) {\n    index = newIndex;\n  }\n}\n\nvar fpVideoController = function() {\n  var vid = document.getElementById('frontpage-video');\n\n  if (!vid) {\n    return;\n  } else {\n    var spinner = $('body').find('.spinner'),\n        container = $('body').find('.front-video-container'),\n        vidElement = $(container).find('#frontpage-video'),\n        movingContent = $('body').find('.moving-content'),\n        width = $(window).width(),\n        vidHeight = ((width/100*80)/16)*9;\n\n    addEventListeners();\n  }\n\n  function addEventListeners() {\n    vid.addEventListener('canplaythrough', animShowVideo);\n    vid.addEventListener('ended', animOutVideo);\n  }\n\n  function animShowVideo() {\n    $(spinner).addClass('hidden');\n\n    $(container).velocity({\n      'height': vidHeight\n    }, {duration: 700, delay: 0, easing: [.24,.63,.5,.99]});\n\n    $(vidElement).velocity({\n      'opacity': 1\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': vidHeight + 30\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    setTimeout(function() {\n      if ( vid.paused ) {\n        vid.play();\n      }\n    }, 700);\n  }\n\n  function animOutVideo() {\n    $(vidElement).velocity({\n      'opacity': 0\n    }, {duration: 300, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(container).velocity({\n      'height': 60\n    }, {duration: 1000, delay: 400, easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': 90\n    }, {duration: 1000, delay: 400, display: 'block', easing: [.24,.63,.5,.99]});\n\n    scrollTo(0);\n  }\n}\n\n\nvar scrollHeaderController = function() {\n  var linkHeader = $('body').find('.header-link-row'),\n      width = $(window).width(),\n      scroll;\n\n  $(window).on('scroll', modifyHeader);\n\n  function modifyHeader() {\n    scroll = $(window).scrollTop();\n\n    if ( scroll > 500 ) {\n      $(linkHeader).addClass('hidden');\n    }\n    if ( scroll < 500 ) {\n      $(linkHeader).removeClass('hidden');\n    }\n  }\n}\n\nfunction validateEmail(email) {\n  var regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n  return regex.test(email);\n}\n\nfunction validateInput(input) {\n  var allowedChars = /^[\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w&.,\\- ]+$/;\n  return allowedChars.test(input);\n}\n\nfunction validateNumber(input) {\n  var isNumber = /^(?=.*[0-9])[+()0-9]+$/;\n  return isNumber.test(input);\n}\n\nvar reserveFormController = function() {\n  var form = $('body').find('form.reserve'),\n      emailInput = $(form).find('input[type=email]'),\n      nameInput = $(form).find('input[type=text].name'),\n      phoneInput = $(form).find('input[type=text].phone'),\n      submitBtn = $(form).find('.submit-btn > a');\n\n  function validateEmailOnBlur() {\n    $(emailInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isEmail = validateEmail(value);\n\n        if( !isEmail && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isEmail && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNameOnBlur() {\n    $(nameInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isTrustedCharacters = validateInput(value);\n\n        if( !isTrustedCharacters && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isTrustedCharacters && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNumberOnBlur() {\n    $(phoneInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isNumber = validateNumber(value);\n\n        if ( !isNumber && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if ( isNumber && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function submitListener() {\n    $(submitBtn).on('click', function(event) {\n      event.preventDefault(),\n      inputs = $(form).find('input'),\n      validSuccess = $('body').find('.validation.success');\n      dataObject = {},\n      inputArray = [];\n\n      $(inputs).each(function(i, e) {\n        if ( $(e).hasClass('error') || $(e).val().length === 0 ) {\n          return;\n        } else {\n          var object = {\n            name: e.name,\n            value: $(e).val()\n          }\n          inputArray.push(object);\n        }\n      });\n\n      var data = packData();\n      sendForm(data);\n    });\n\n    function packData() {\n      dataObject.customer_html = '<h4>Navn:</h4><h2>' + inputArray[0].value + '</h2>';\n      dataObject.customer_html += '<h4>TLF:</h4><h2>' + inputArray[1].value + '</h2>';\n      dataObject.customer_html += '<h4>EMAIL:</h4><h2>' + inputArray[2].value + '</h2>';\n      dataObject.customer_email = inputArray[2].value;\n\n      return dataObject;\n    }\n\n    function sendForm(data) {\n      var customerData = JSON.stringify(data);\n\n        $.ajax({\n          url: site.ajax_url + '?action=reserve',\n          type: 'POST',\n          data: customerData,\n          success: function(response) {\n            var stripResponse = $.trim(response);\n            console.log(stripResponse);\n            if ( stripResponse === 'Success' ) {\n              animateSuccess();\n            }\n            if ( stripResponse === 'Error' ) {\n\n            }\n          },\n          error: function(response) {\n            console.log(response);\n          }\n        });\n    }\n\n    function animateSuccess() {\n      $(form).velocity({\n        'opacity': [0, 1]\n      }, {duration: 300, delay: 0, easing: [.24,.63,.5,.99], display: 'none'});\n\n      $(validSuccess).velocity({\n        'opacity': [1, 0]\n      }, {duration: 300, delay: 350, easing: [.24,.63,.5,.99], display: 'block'});\n\n      setTimeout(function() {\n        window.location.href = window.location.href;\n      }, 1000);\n    }\n  }\n\n  validateNumberOnBlur();\n  validateEmailOnBlur();\n  validateNameOnBlur();\n  submitListener();\n}\n\n\nfunction shopMsg(title, msg) {\n  var atcModal = $('body').find('.atc-modal');\n\n  if ( !msg ) {\n    var msg = '<span>- blev tilføjet til kurven.</span>';\n  } else {\n    var msg = msg;\n  }\n\n  var html = title + msg;\n\n  $(atcModal).append(html);\n\n  function animate() {\n    $(atcModal).velocity({\n      'opacity': [1, 0],\n      'top': [150, 300],\n      'z-index': [5000, 5000]\n    }, {duration: 400, delay: 0, easing: 'easeInOutSine'});\n\n    $(atcModal).velocity({\n      'opacity': [0, 1],\n      'top': [300, 150],\n      'z-index': 5000\n    }, {duration: 400, delay: 1400, easing: 'easeInOutSine'});\n  }\n\n  setTimeout(function() {\n    animate();\n  }, 100);\n\n  setTimeout(function() {\n    $(atcModal).html('');\n    $(atcModal).css({\n      'z-index': -1000\n    });\n  }, 2000);\n}\n\n\nvar productTextController = function() {\n  var textIcon = $('body').find('.text-icon'),\n      productLeft = $('body').find('.product-left'),\n      productRight = $('body').find('.product-right');\n\n  $(textIcon).on('click', function() {\n    toggleClass();\n  });\n\n  function toggleClass() {\n    $(textIcon).toggleClass('off');\n    $(productLeft).toggleClass('off');\n    $(productRight).toggleClass('off');\n  }\n\n  setTimeout(toggleClass, 800);\n}\n\nvar singleProductHeightController = function() {\n  var mainImage = $('.main-image img'),\n      iFrame = $('body').find('iframe');\n\n  if ( mainImage && mainImage[0] ) {\n    if (mainImage[0].complete) {\n      handler();\n    } else {\n      mainImage.load(handler);\n    }\n  } else {\n    return;\n  }\n\n  function handler() {\n    var contentHeight = $('.product-content').height(),\n        imageHeight = $('.main-image img').height();\n\n    if ( contentHeight && imageHeight < contentHeight ) {\n      $('.main-image').css({\n        'height': contentHeight + 'px'\n      });\n    } else {\n      return;\n    }\n    setMenuHeight();\n  }\n}\n\nvar embedVidController = function() {\n  var vidFrame = $('body').find('.youtube-frame');\n\n  if ( vidFrame.length > 0 ) {\n    initVideo();\n  } else {\n    return;\n  }\n\n  function initVideo() {\n    var vidUrl = $(vidFrame).attr('data-href');\n        if ( vidUrl.indexOf('=') !== -1 ) {\n          var vidId = vidUrl.split('='),\n              id = vidId[1];\n        } else {\n          var vidId = vidUrl.split('/');\n          id = vidId[3];\n        }\n\n    var width = $(window).width(),\n        height = (width / 16) * 9;\n\n    var constructedHtml = '<iframe width=\"' + width + '\" height=\"' + height + '\" src=\"https://www.youtube.com/embed/' + id + '?rel=0&amp;showinfo=0\" frameborder=\"0\" allowfullscreen></iframe>';\n\n    $(vidFrame).html(constructedHtml);\n  }\n};\n\n\nvar gridCartController = function() {\n  var addBtn = $('body').find('.add-button'),\n      cart = $('body').find('.cart-contents');\n\n\n  $(addBtn).each(function(i, e) {\n    var id = $(this).attr('data-href'),\n        prodTitle = $(this).attr('data-title');\n\n    $(this).on('click', function(event) {\n      event.preventDefault();\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_add',\n          dataObject = {\n            'product_id': id\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt + 1;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          shopMsg(prodTitle);\n\n          setTimeout(function() {\n            window.location.href = window.location.href;\n          }, 2000);\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nvar removeFromCartController = function() {\n    var cart = $('body').find('.cart-contents'),\n        remBtn = $(cart).find('.remove-icon');\n\n  $(remBtn).each(function(i, e) {\n    var id = $(this).attr('data-id'),\n        qtyElem = $(this).siblings('.elem-qty-total'),\n        qty = parseInt($(qtyElem).attr('data-qty'));\n\n\n    $(this).on('click', function() {\n      console.log(qty, id);\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_remove',\n          dataObject = {\n            'product_id': id,\n            'quantity': qty\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt - qty;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          window.location.href = window.location.href;\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nfunction setMenuHeight() {\n  setTimeout(function() {\n    var mainMenu = $('body').find('.main-menu'),\n        siteContent = $('body').find('.site-content'),\n        documentHeight = $('.site-content').height();\n\n     // set menu height, relative to content height (minus footer)\n    $(mainMenu).css({\n      'height': documentHeight - 325 + 'px'\n    });\n  }, 1000);\n}\n\nvar MenuController = function() {\n  var menuBtn = $('body').find('.menu-icon'),\n      mainMenu = $('body').find('.main-menu'),\n      menuLinks = $(mainMenu).find('li'),\n      menuHeaders = $(mainMenu).find('h3'),\n      searchForm = $('body').find('.search-form'),\n      cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents'),\n      width = $(window).width();\n      setMenuHeight();\n\n      $(menuBtn).on('click', animateMenu);\n\n      function animateMenu() {\n        if ( $(mainMenu).hasClass('hidden') ) {\n          $(mainMenu).removeClass('hidden');\n          $(this).addClass('open');\n          scrollTo('0px');\n          updateHeaderOpen();\n          addEventListener();\n        } else {\n          $(mainMenu).addClass('hidden');\n          $(this).removeClass('open');\n          updateHeaderClose();\n        }\n      }\n\n\n      function updateHeaderOpen() {\n        var rawIconCss = $(cartIcon).css('right'),\n            rawSearchCss = $(searchForm).css('right'),\n            rawCartContCss = $(cartContents).css('right'),\n            iconRight = parseInt(rawIconCss.replace('px', '')),\n            searchRight = parseInt(rawSearchCss.replace('px', '')),\n            cartContRight = parseInt(rawCartContCss.replace('px', ''));\n\n\n            $(cartIcon).velocity({\n              'right': iconRight + 230 + 'px'\n            }, {duration: 400, delay: 100, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': searchRight + 230 + 'px'\n            }, {duration: 400, delay: 0, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': cartContRight + 230 + 'px'\n            }, {duration: 400, delay: 150, easing: [.24,.63,.5,.99]});\n      }\n\n      function updateHeaderClose() {\n            $(cartIcon).velocity({\n              'right': 90\n            }, {duration: 300, delay: 200, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': 165\n            }, {duration: 300, delay: 300, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': 80\n            }, {duration: 300, delay: 250, easing: [.24,.63,.5,.99]});\n      }\n\n      function addEventListener() {\n        $(menuLinks).on('click', function(e) {\n          e.preventDefault();\n          var aHref =  $(this).find('a');\n          var href = $(aHref).attr('href');\n\n          $(menuLinks).each(function(i, elem) {\n            var delay = i * 20;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n\n          });\n\n          $(menuHeaders).each(function(i, elem) {\n            var delay = i * 30;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n          });\n\n          setTimeout(navigate(href), 1200);\n        });\n      }\n\n      function navigate(href) {\n        setTimeout(function() {\n          $(menuBtn).removeClass('open');\n          $(mainMenu).addClass('hidden');\n          updateHeaderClose();\n        }, 1000);\n\n        setTimeout(function() {\n          window.location.href = href;\n        }, 1300);\n      }\n};\n\n\nvar CartController = function() {\n  var cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents');\n\n  $(cartIcon).on('click', function(e) {\n    $(cartContents).toggleClass('hidden');\n  });\n}\n\n\n// http://sin.us/wp-json/posts?type=product&filter[product_cat]=hifi&filter[orderby]=price&filter[order]=asc\n\n"],"sourceRoot":"/source/"}