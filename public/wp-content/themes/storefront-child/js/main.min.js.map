{"version":3,"sources":["main.js"],"names":["scrollTo","value","$","animate","scrollTop","productsController","promise","productsSupplyer","then","products","render","storageAvailable","type","storage","window","x","setItem","removeItem","e","setPageIndex","index","pageIndex","getPageIndex","p","setMaxPages","max","maxPages","setQueryType","parts","url","indexOf","split","query","param","getQueryType","initialize","container","find","data","queryParams","key","productsCache","localStorage","JSON","parse","getItem","def","resolve","getPosts","console","log","action","queryType","offset","limit","dataObj","stringify","ajax","site","ajax_url","dataType","success","response","error","location","href","Deferred","tags","brands","categories","grid","spinner","pages","length","hasClass","addClass","each","i","remove","html","k","push","template","setTemplate","append","sortTags","scrollController","page","removeClass","setTimeout","gridCartController","catHtml","brandHtml","menuLeft","categoryContainer","brandContainer","_","uniq","pCat","pBrand","cat","brand","sortController","on","delay","velocity","opacity","duration","display","easing","detach","returnSortedCat","returnSortedBrand","newProductsPromise","sorted","newProducts","cats","requestAnimationFrame","updateView","trig","content","windowHeight","height","scroll","document","stockIcon","in_stock","desc","description","trunc","splice","join","featured_src","title","price_html","id","validateEmail","email","regex","test","validateInput","input","allowedChars","validateNumber","isNumber","shopMsg","msg","atcModal","top","z-index","css","setMenuHeight","mainMenu","documentHeight","jQuery","CartController","MenuController","embedVidController","productTextController","singleProductHeightController","removeFromCartController","reserveFormController","scrollHeaderController","fpVideoController","fpBackgroundController","focus","this","blur","imagesHandler","setIndex","firstImg","img","attr","theme_path","bgContainer","controller","j","getIndex","curImg","newImg","animateIn","animateOut","image","n","newIndex","complete","load","addEventListeners","vid","addEventListener","animShowVideo","animOutVideo","vidHeight","vidElement","movingContent","paused","play","getElementById","width","modifyHeader","linkHeader","validateEmailOnBlur","emailInput","val","isEmail","validateNameOnBlur","nameInput","isTrustedCharacters","validateNumberOnBlur","phoneInput","submitListener","packData","dataObject","customer_html","inputArray","customer_email","sendForm","customerData","stripResponse","trim","animateSuccess","form","validSuccess","submitBtn","event","preventDefault","inputs","object","name","toggleClass","textIcon","productLeft","productRight","handler","contentHeight","imageHeight","mainImage","initVideo","vidUrl","vidFrame","vidId","constructedHtml","addBtn","cart","prodTitle","cartNumber","cartInt","parseInt","text","product_id","updatedNum","remBtn","qtyElem","siblings","qty","quantity","animateMenu","updateHeaderOpen","updateHeaderClose","rawIconCss","cartIcon","rawSearchCss","searchForm","rawCartContCss","cartContents","iconRight","replace","searchRight","cartContRight","right","menuLinks","aHref","elem","menuHeaders","navigate","menuBtn"],"mappings":"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","file":"main.min.js","sourcesContent":["// Test if ie10 - adds class \"ie10\" to HTML tag, if true. - Excludes IE11\nif (/*@cc_on!@*/false && document.documentMode === 10) {\n    document.documentElement.className+=' ie10';\n}\n\njQuery(document).on('ready', function() {\n  $ = jQuery;\n\n\n  new CartController();\n  new MenuController();\n  // new gridCartController();\n  new embedVidController();\n  new productTextController();\n  new singleProductHeightController();\n  new removeFromCartController();\n  new reserveFormController();\n  new scrollHeaderController();\n  new fpVideoController();\n  new fpBackgroundController();\n  productsController();\n\n  // labels for input fields\n  $(\"form :input\").focus(function() {\n    $(\"label[for='\" + this.id + \"']\").addClass(\"focus\");\n  }).blur(function() {\n    $(\"label\").removeClass(\"focus\");\n  });\n}); // End Ready\n\nvar documentHeight;\n\nfunction scrollTo(value) {\n  $('html, body').animate({\n    scrollTop: value\n  }, 700);\n}\n\nfunction productsController() {\n  var promise = productsSupplyer();\n  promise.then(function(products) {\n    render(products);\n  });\n}\n\n\nfunction productsSupplyer() {\n  var url = window.location.href;\n  var def = $.Deferred();\n\n  if ( url.indexOf('/type/') === -1 && url.indexOf('/brands/') === -1 ) {\n    console.log('Exited from productsModel');\n    return;\n  }\n\n  var productsCache,\n      products,\n      storage = storageAvailable('localStorage'),\n      target = $('body').find('.product-list-grid'),\n      pageIndex,\n      maxPages,\n      type,\n      brand,\n      key,\n      query = {};\n      tags = {\n        brands: [],\n        categories: []\n      };\n      initialize();\n\n  function storageAvailable(type) {\n    try {\n      var storage = window[type],\n        x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return false;\n    }\n  }\n\n  function setPageIndex(index) {\n    pageIndex = index;\n  }\n\n  function getPageIndex() {\n    var p = pageIndex;\n    return p;\n  }\n\n  function setMaxPages(max) {\n    maxPages = max;\n  }\n\n  function getMaxPages() {\n    var p = maxPages;\n    return p;\n  }\n\n  function setQueryType() {\n    var parts;\n    if ( url.indexOf('/type/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'type',\n        param: parts[4]\n      }\n    }\n\n    if ( url.indexOf('/brands/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'brand',\n        param: parts[4]\n      }\n    }\n  }\n\n  function getQueryType() {\n    return query;\n  }\n\n  function initialize() {\n    var container = $('body').find('.products-container'),\n        pageIndex = $(container).data('page'),\n        maxPages = $(container).data('maxpages'),\n        type = $(container).data('cat'),\n        brand = $(container).data('tag');\n        setQueryType();\n        setMaxPages(maxPages);\n\n    if ( !pageIndex || pageIndex > maxPages ) {\n      setPageIndex(1);\n    } else {\n      setPageIndex(pageIndex);\n    }\n\n    var int = getPageIndex();\n    var queryParams = getQueryType();\n    key = queryParams.type + '_' + queryParams.param;\n\n    if ( storage ) {\n      productsCache = localStorage,\n      products = JSON.parse(productsCache.getItem(key));\n      if (products) {\n        def.resolve(products);\n      } else {\n        getPosts();\n      }\n    } else {\n      // load something else, maybe\n      console.log('no localStorage for us');\n    }\n  }\n\n  function getPosts() {\n    var queryType = getQueryType(),\n        action,\n        type = queryType.type;\n\n    if ( type === 'type' ) {\n      action = '?action=sinus_type';\n    }\n    if ( type === 'brand' ) {\n      action = '?action=sinus_brand';\n    }\n\n    var queryParams = {\n        offset: 0,\n        limit: -1,\n        param: queryType.param\n    },\n    dataObj = JSON.stringify(queryParams);\n\n    $.ajax({\n      url: site.ajax_url + action,\n      type: \"POST\",\n      data: dataObj,\n      dataType: 'json',\n      success: function(response) {\n        products = response.products;\n        productsCache.setItem(key, JSON.stringify(products));\n        def.resolve(products);\n      },\n      error: function(response) {\n        console.log(response);\n      }\n    });\n  }\n\n  return def;\n}\n\nfunction render(products) {\n  var grid = $('body').find('.product-list-grid'),\n      spinner = $('body').find('.spinner'),\n      pages = $('body').find('.page.products'),\n      length = products.length;\n\n  if ( !$(spinner).hasClass('hidden') ) {\n    $(spinner).addClass('hidden');\n  }\n\n  if ( pages ) {\n    $(pages).each(function(i,e) {\n      $(e).remove();\n    });\n  }\n\n  var pageIndex = 1;\n  var html = '<div class=\"page products page-1 hidden\">';\n      html += '<ul class=\"products\">';\n\n  $(products).each(function(i, e) {\n    var k = i + 1;\n\n    $(e.tags).each(function(i, e) {\n      tags.brands.push(e);\n    });\n\n    $(e.categories).each(function(i, e) {\n      tags.categories.push(e);\n    });\n\n    var template = setTemplate(e);\n    html += template;\n\n    if ( k % 24 === 0 && i < length ) {\n      pageIndex++;\n      html += '</ul>';\n      html += '</div>';\n      html += '<div class=\"page products page-' + pageIndex + ' hidden\">';\n      html += '<ul class=\"products\">';\n    }\n  });\n\n  html += '</ul>';\n  html += '</div>';\n\n  $(grid).append(html);\n  sortTags(tags);\n  scrollController();\n  var page = $('body').find('.page.page-1');\n  $(page).removeClass('hidden');\n  setTimeout(function() {\n    new gridCartController();\n  }, 1500);\n}\n\nfunction sortTags(tags) {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      categories = _.uniq(tags.categories),\n      brands = _.uniq(tags.brands),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      catHtml,\n      brandHtml;\n\n  if ( pCat.length !== 0 || pBrand.length !== 0 ) {\n    return\n  } else {\n    $(categories).each(function(i, cat) {\n      catHtml = '<p data-cat=\"' + cat + '\"><i class=\"fa fa-search-plus\"></i>' + cat + '</p>';\n      $(categoryContainer).append(catHtml);\n    });\n\n    $(brands).each(function(i, brand) {\n      brandHtml = '<p data-brand=\"' + brand + '\"><i class=\"fa fa-search-plus\"></i>' + brand + '</p>';\n      $(brandContainer).append(brandHtml);\n    });\n\n    setTimeout(function() {\n      sortController();\n    }, 1500);\n  }\n}\n\nfunction sortController() {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      products = $('body').find('li.product'),\n      pages = $('body').find('.page.products');\n\n  $(pCat).each(function(i,e) {\n    var param = $(e).data('cat');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      returnSortedCat(param);\n    });\n  });\n\n  $(pBrand).each(function(i,e) {\n    var param = $(e).data('brand');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n\n      returnSortedBrand(param);\n    });\n  });\n}\n\nfunction returnSortedCat(param) {\n  var newProductsPromise = productsSupplyer(),\n      sorted = [];\n\n  newProductsPromise.then(function(newProducts) {\n    $(newProducts).each(function(i,e) {\n      var cats = e.categories;\n\n      if ( cats.indexOf(param) !== -1 ) {\n        sorted.push(e);\n      }\n    });\n\n    window.requestAnimationFrame(function() {\n      scrollTo(0);\n    });\n    window.requestAnimationFrame(function() {\n      render(sorted);\n    });\n  });\n}\n\nfunction returnSortedBrand(param) {\n  var newProductsPromise = productsSupplyer(),\n      sorted = [];\n\n  newProductsPromise.then(function(newProducts) {\n    $(newProducts).each(function(i,e) {\n      var brands = e.tags;\n      if ( brands.indexOf(param) !== -1 ) {\n        sorted.push(e);\n      }\n    });\n\n    window.requestAnimationFrame(function() {\n      scrollTo(0);\n    });\n    window.requestAnimationFrame(function() {\n      render(sorted);\n    });\n  });\n}\n\n\nfunction scrollController() {\n  var pages = $('body').find('.page.products.hidden'),\n      content = $('body').find('.site-content'),\n      height = $(content).height(),\n      windowHeight = $(window).height();\n\n  if ( !pages ) {\n    return;\n  }\n\n  $(window).on('scroll', function() {\n    var scroll = $(document).scrollTop(),\n        height = $(content).height();\n\n    if ( scroll >= ((height - windowHeight) - 200) ) {\n      window.requestAnimationFrame(function() {\n        updateView();\n      });\n    }\n  });\n\n  function updateView() {\n    var trig = 0;\n    if (!pages[0] || trig > 0 ) {\n      return;\n    } else {\n      $(pages[0]).removeClass('hidden');\n      trig++;\n      setTimeout(function() {\n        scrollController();\n      }, 1000);\n    }\n  }\n}\n\nfunction setTemplate(e) {\n  var stockIcon;\n\n  if ( e.in_stock === 'false' ) {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-minus-square\"></span></div>';\n  } else {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-check-square\"></i></span></div>';\n  }\n\n  var desc = e.description;\n  var trunc = desc.split(\" \").splice(0, 25).join(\" \");\n\n  var template = '<li class=\"product\" itemscope itemtype=\"http://schema.org/Product\">' + stockIcon;\n      template += '<img src=\"' + e.featured_src + '\" alt=\"' + e.title + ' product image produktbillede Sinus-store Copenhagen København Denmark\" />';\n      template += '<div class=\"product-price\">' + e.price_html + '<div class=\"add-button\" data-href=\"' + e.id + '\" data-title=\"' + e.title + '\"><svg version=\"1.1\" baseProfile=\"tiny\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"x=\"0px\" y=\"0px\" viewBox=\"0 0 60 60\" xml:space=\"preserve\"><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"30\" y1=\"6\" x2=\"30\" y2=\"54\"/><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"6\" y1=\"30\" x2=\"54\" y2=\"30\"/></svg><span class=\"add-info\">Tilføj til kurv</span></div></div>';\n      template += '<div class=\"sinus-product-info\"><div class=\"product-title\" itemprop=\"name\"><h3>' + e.title + '</h3></div><div class=\"short-desc\" itemprop=\"description\">' + trunc + '</div></div>';\n      template += '</li>';\n\n  return template;\n}\n\nvar fpBackgroundController = function() {\n  var bgContainer = $('body').find('.bg-container'),\n      firstImg = $(bgContainer).find('img'),\n      index;\n\n  if ( !bgContainer ) {\n    return;\n  }\n\n  if ( firstImg && firstImg[0] ) {\n    if (firstImg[0].complete) {\n      imagesHandler();\n    } else {\n      firstImg.load(imagesHandler);\n    }\n  }\n\n  function imagesHandler() {\n    setIndex(1);\n    $(firstImg).velocity({\n      'opacity': 1\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    for( var i = 2; i < 7; i++ ) {\n      var img = $('<img />').attr('src', site.theme_path + '/img/bg/bg' + i + '.png').attr('class', 'bg-' + i);\n      $(bgContainer).append(img);\n    }\n\n    setTimeout(controller, 8000);\n  }\n\n  function controller() {\n    var j = getIndex(),\n        k = j+1;\n\n    if ( k > 6 ) {\n      k = 1;\n    }\n\n    var curImg = $(bgContainer).find('img.bg-' + j),\n        newImg = $(bgContainer).find('img.bg-' + k);\n\n    window.requestAnimationFrame(animateIn(newImg));\n    window.requestAnimationFrame(animateOut(curImg));\n\n    setIndex(k);\n\n    setTimeout(controller, 4000);\n  }\n\n  function animateIn(image) {\n    $(image).velocity({\n      'opacity': 1\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function animateOut(image) {\n    $(image).velocity({\n      'opacity': 0\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function getIndex() {\n    n = index;\n    return n;\n  }\n\n  function setIndex(newIndex) {\n    index = newIndex;\n  }\n}\n\nvar fpVideoController = function() {\n  var vid = document.getElementById('frontpage-video');\n\n  if (!vid) {\n    return;\n  } else {\n    var spinner = $('body').find('.spinner'),\n        container = $('body').find('.front-video-container'),\n        vidElement = $(container).find('#frontpage-video'),\n        movingContent = $('body').find('.moving-content'),\n        width = $(window).width(),\n        vidHeight = ((width/100*80)/16)*9;\n\n    addEventListeners();\n  }\n\n  function addEventListeners() {\n    vid.addEventListener('canplaythrough', animShowVideo);\n    vid.addEventListener('ended', animOutVideo);\n  }\n\n  function animShowVideo() {\n    $(spinner).addClass('hidden');\n\n    $(container).velocity({\n      'height': vidHeight\n    }, {duration: 700, delay: 0, easing: [.24,.63,.5,.99]});\n\n    $(vidElement).velocity({\n      'opacity': 1\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': vidHeight + 30\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    setTimeout(function() {\n      if ( vid.paused ) {\n        vid.play();\n      }\n    }, 700);\n  }\n\n  function animOutVideo() {\n    $(vidElement).velocity({\n      'opacity': 0\n    }, {duration: 300, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(container).velocity({\n      'height': 60\n    }, {duration: 1000, delay: 400, easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': 90\n    }, {duration: 1000, delay: 400, display: 'block', easing: [.24,.63,.5,.99]});\n\n    scrollTo(0);\n  }\n}\n\n\nvar scrollHeaderController = function() {\n  var linkHeader = $('body').find('.header-link-row'),\n      width = $(window).width(),\n      scroll;\n\n  $(window).on('scroll', modifyHeader);\n\n  function modifyHeader() {\n    scroll = $(window).scrollTop();\n\n    if ( scroll > 500 ) {\n      $(linkHeader).addClass('hidden');\n    }\n    if ( scroll < 500 ) {\n      $(linkHeader).removeClass('hidden');\n    }\n  }\n}\n\nfunction validateEmail(email) {\n  var regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n  return regex.test(email);\n}\n\nfunction validateInput(input) {\n  var allowedChars = /^[\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w&.,\\- ]+$/;\n  return allowedChars.test(input);\n}\n\nfunction validateNumber(input) {\n  var isNumber = /^(?=.*[0-9])[+()0-9]+$/;\n  return isNumber.test(input);\n}\n\nvar reserveFormController = function() {\n  var form = $('body').find('form.reserve'),\n      emailInput = $(form).find('input[type=email]'),\n      nameInput = $(form).find('input[type=text].name'),\n      phoneInput = $(form).find('input[type=text].phone'),\n      submitBtn = $(form).find('.submit-btn > a');\n\n  function validateEmailOnBlur() {\n    $(emailInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isEmail = validateEmail(value);\n\n        if( !isEmail && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isEmail && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNameOnBlur() {\n    $(nameInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isTrustedCharacters = validateInput(value);\n\n        if( !isTrustedCharacters && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isTrustedCharacters && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNumberOnBlur() {\n    $(phoneInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isNumber = validateNumber(value);\n\n        if ( !isNumber && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if ( isNumber && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function submitListener() {\n    $(submitBtn).on('click', function(event) {\n      event.preventDefault(),\n      inputs = $(form).find('input'),\n      validSuccess = $('body').find('.validation.success');\n      dataObject = {},\n      inputArray = [];\n\n      $(inputs).each(function(i, e) {\n        if ( $(e).hasClass('error') || $(e).val().length === 0 ) {\n          return;\n        } else {\n          var object = {\n            name: e.name,\n            value: $(e).val()\n          }\n          inputArray.push(object);\n        }\n      });\n\n      var data = packData();\n      sendForm(data);\n    });\n\n    function packData() {\n      dataObject.customer_html = '<h4>Navn:</h4><h2>' + inputArray[0].value + '</h2>';\n      dataObject.customer_html += '<h4>TLF:</h4><h2>' + inputArray[1].value + '</h2>';\n      dataObject.customer_html += '<h4>EMAIL:</h4><h2>' + inputArray[2].value + '</h2>';\n      dataObject.customer_email = inputArray[2].value;\n\n      return dataObject;\n    }\n\n    function sendForm(data) {\n      var customerData = JSON.stringify(data);\n\n        $.ajax({\n          url: site.ajax_url + '?action=reserve',\n          type: 'POST',\n          data: customerData,\n          success: function(response) {\n            var stripResponse = $.trim(response);\n            console.log(stripResponse);\n            if ( stripResponse === 'Success' ) {\n              animateSuccess();\n            }\n            if ( stripResponse === 'Error' ) {\n\n            }\n          },\n          error: function(response) {\n            console.log(response);\n          }\n        });\n    }\n\n    function animateSuccess() {\n      $(form).velocity({\n        'opacity': [0, 1]\n      }, {duration: 300, delay: 0, easing: [.24,.63,.5,.99], display: 'none'});\n\n      $(validSuccess).velocity({\n        'opacity': [1, 0]\n      }, {duration: 300, delay: 350, easing: [.24,.63,.5,.99], display: 'block'});\n\n      setTimeout(function() {\n        window.location.href = window.location.href;\n      }, 1000);\n    }\n  }\n\n  validateNumberOnBlur();\n  validateEmailOnBlur();\n  validateNameOnBlur();\n  submitListener();\n}\n\n\nfunction shopMsg(title, msg) {\n  var atcModal = $('body').find('.atc-modal');\n\n  if ( !msg ) {\n    var msg = '<span>- blev tilføjet til kurven.</span>';\n  } else {\n    var msg = msg;\n  }\n\n  var html = '<h3>' + title + '</h3>' + msg;\n\n  $(atcModal).append(html);\n\n  function animate() {\n    $(atcModal).velocity({\n      'opacity': [1, 0],\n      'top': [150, 300],\n      'z-index': [5000, 5000]\n    }, {duration: 400, delay: 0, easing: 'easeInOutSine'});\n\n    $(atcModal).velocity({\n      'opacity': [0, 1],\n      'top': [300, 150],\n      'z-index': 5000\n    }, {duration: 400, delay: 1400, easing: 'easeInOutSine'});\n  }\n\n  setTimeout(function() {\n    animate();\n  }, 100);\n\n  setTimeout(function() {\n    $(atcModal).html('');\n    $(atcModal).css({\n      'z-index': -1000\n    });\n  }, 2000);\n}\n\n\nvar productTextController = function() {\n  var textIcon = $('body').find('.text-icon'),\n      productLeft = $('body').find('.product-left'),\n      productRight = $('body').find('.product-right');\n\n  $(textIcon).on('click', function() {\n    toggleClass();\n  });\n\n  function toggleClass() {\n    $(textIcon).toggleClass('off');\n    $(productLeft).toggleClass('off');\n    $(productRight).toggleClass('off');\n  }\n\n  setTimeout(toggleClass, 800);\n}\n\nvar singleProductHeightController = function() {\n  var mainImage = $('.main-image img'),\n      iFrame = $('body').find('iframe');\n\n  if ( mainImage && mainImage[0] ) {\n    if (mainImage[0].complete) {\n      handler();\n    } else {\n      mainImage.load(handler);\n    }\n  } else {\n    return;\n  }\n\n  function handler() {\n    var contentHeight = $('.product-content').height(),\n        imageHeight = $('.main-image img').height();\n\n    if ( contentHeight && imageHeight < contentHeight ) {\n      $('.main-image').css({\n        'height': contentHeight + 'px'\n      });\n    } else {\n      return;\n    }\n    setMenuHeight();\n  }\n}\n\nvar embedVidController = function() {\n  var vidFrame = $('body').find('.youtube-frame');\n\n  if ( vidFrame.length > 0 ) {\n    initVideo();\n  } else {\n    return;\n  }\n\n  function initVideo() {\n    var vidUrl = $(vidFrame).attr('data-href');\n        if ( vidUrl.indexOf('=') !== -1 ) {\n          var vidId = vidUrl.split('='),\n              id = vidId[1];\n        } else {\n          var vidId = vidUrl.split('/');\n          id = vidId[3];\n        }\n\n    var width = $(window).width(),\n        height = (width / 16) * 9;\n\n    var constructedHtml = '<iframe width=\"' + width + '\" height=\"' + height + '\" src=\"https://www.youtube.com/embed/' + id + '?rel=0&amp;showinfo=0\" frameborder=\"0\" allowfullscreen></iframe>';\n\n    $(vidFrame).html(constructedHtml);\n  }\n};\n\n\nvar gridCartController = function() {\n  var addBtn = $('body').find('.add-button'),\n      cart = $('body').find('.cart-contents');\n\n\n  $(addBtn).each(function(i, e) {\n    var id = $(this).attr('data-href'),\n        prodTitle = $(this).attr('data-title');\n\n    $(this).on('click', function(event) {\n      event.preventDefault();\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_add',\n          dataObject = {\n            'product_id': id\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt + 1;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          shopMsg(prodTitle);\n\n          setTimeout(function() {\n            window.location.href = window.location.href;\n          }, 1000);\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nvar removeFromCartController = function() {\n    var cart = $('body').find('.cart-contents'),\n        remBtn = $(cart).find('.remove-icon');\n\n  $(remBtn).each(function(i, e) {\n    var id = $(this).attr('data-id'),\n        qtyElem = $(this).siblings('.elem-qty-total'),\n        qty = parseInt($(qtyElem).attr('data-qty'));\n\n\n    $(this).on('click', function() {\n      console.log(qty, id);\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_remove',\n          dataObject = {\n            'product_id': id,\n            'quantity': qty\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt - qty;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          window.location.href = window.location.href;\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nfunction setMenuHeight() {\n  setTimeout(function() {\n    var mainMenu = $('body').find('.main-menu'),\n        siteContent = $('body').find('.site-content'),\n        documentHeight = $('.site-content').height();\n\n     // set menu height, relative to content height (minus footer)\n    $(mainMenu).css({\n      'height': documentHeight - 325 + 'px'\n    });\n  }, 1000);\n}\n\nvar MenuController = function() {\n  var menuBtn = $('body').find('.menu-icon'),\n      mainMenu = $('body').find('.main-menu'),\n      menuLinks = $(mainMenu).find('li'),\n      menuHeaders = $(mainMenu).find('h3'),\n      searchForm = $('body').find('.search-form'),\n      cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents'),\n      width = $(window).width();\n      setMenuHeight();\n\n      $(menuBtn).on('click', animateMenu);\n\n      function animateMenu() {\n        if ( $(mainMenu).hasClass('hidden') ) {\n          $(mainMenu).removeClass('hidden');\n          $(this).addClass('open');\n          scrollTo('0px');\n          updateHeaderOpen();\n          addEventListener();\n        } else {\n          $(mainMenu).addClass('hidden');\n          $(this).removeClass('open');\n          updateHeaderClose();\n        }\n      }\n\n\n      function updateHeaderOpen() {\n        var rawIconCss = $(cartIcon).css('right'),\n            rawSearchCss = $(searchForm).css('right'),\n            rawCartContCss = $(cartContents).css('right'),\n            iconRight = parseInt(rawIconCss.replace('px', '')),\n            searchRight = parseInt(rawSearchCss.replace('px', '')),\n            cartContRight = parseInt(rawCartContCss.replace('px', ''));\n\n\n            $(cartIcon).velocity({\n              'right': iconRight + 230 + 'px'\n            }, {duration: 400, delay: 100, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': searchRight + 230 + 'px'\n            }, {duration: 400, delay: 0, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': cartContRight + 230 + 'px'\n            }, {duration: 400, delay: 150, easing: [.24,.63,.5,.99]});\n      }\n\n      function updateHeaderClose() {\n            $(cartIcon).velocity({\n              'right': 90\n            }, {duration: 300, delay: 200, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': 165\n            }, {duration: 300, delay: 300, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': 80\n            }, {duration: 300, delay: 250, easing: [.24,.63,.5,.99]});\n      }\n\n      function addEventListener() {\n        $(menuLinks).on('click', function(e) {\n          e.preventDefault();\n          var aHref =  $(this).find('a');\n          var href = $(aHref).attr('href');\n\n          $(menuLinks).each(function(i, elem) {\n            var delay = i * 20;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n\n          });\n\n          $(menuHeaders).each(function(i, elem) {\n            var delay = i * 30;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n          });\n\n          setTimeout(navigate(href), 1200);\n        });\n      }\n\n      function navigate(href) {\n        setTimeout(function() {\n          $(menuBtn).removeClass('open');\n          $(mainMenu).addClass('hidden');\n          updateHeaderClose();\n        }, 1000);\n\n        setTimeout(function() {\n          window.location.href = href;\n        }, 1300);\n      }\n};\n\n\nvar CartController = function() {\n  var cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents');\n\n  $(cartIcon).on('click', function(e) {\n    $(cartContents).toggleClass('hidden');\n  });\n}\n\n\n// http://sin.us/wp-json/posts?type=product&filter[product_cat]=hifi&filter[orderby]=price&filter[order]=asc\n\n"],"sourceRoot":"/source/"}