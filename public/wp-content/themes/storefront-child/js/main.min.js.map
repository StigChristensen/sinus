{"version":3,"sources":["main.js"],"names":["scrollTo","value","$","animate","scrollTop","productsController","promise","productsSupplyer","then","products","render","sortPriceController","urlListener","hash","window","location","href","sortHash","price","param","paramtype","indexOf","split","urlDataController","sortUrl","pri","par","pt","base_url","h","hashBase","paramArray","base","push","getParam","cat","replace","string","paramsLength","length","console","log","each","i","e","setUrl","dataPromise","returnSortedMultiple","done","fail","getFirstList","getFirst","Deferred","init","returnSortedPriceLow","resolve","returnSortedPriceHigh","reject","sortdef","firstPromise","finalSort","returnSortedBrand","brandSorted","returnSortedCat","catSorted","sort","brands","tags","sorted","defer","newProductsPromise","newProducts","cats","categories","sortPrice","a","b","initArray","object","parseInt","element","initialSort","j","f","reverse","storageAvailable","type","storage","x","setItem","removeItem","setPageIndex","index","pageIndex","getPageIndex","p","setMaxPages","max","maxPages","setQueryType","parts","url","query","getQueryType","initialize","container","find","data","queryParams","key","productsCache","localStorage","JSON","parse","getItem","def","getPosts","action","queryType","offset","limit","dataObj","stringify","ajax","site","ajax_url","dataType","success","response","error","grid","spinner","pages","hasClass","addClass","remove","html","k","template","setTemplate","append","sortTags","scrollController","setMenuHeight","page","removeClass","setTimeout","gridCartController","stockIcon","in_stock","desc","description","trunc","splice","join","featured_src","title","price_html","id","catHtml","brandHtml","menuLeft","categoryContainer","brandContainer","_","uniq","pCat","pBrand","brand","sortController","on","delay","velocity","opacity","duration","display","easing","detach","setDirection","dir","direction","getDirection","priceSorter","currentDir","updateView","trig","content","windowHeight","height","scroll","document","requestAnimationFrame","validateEmail","email","regex","test","validateInput","input","allowedChars","validateNumber","isNumber","shopMsg","msg","atcModal","top","z-index","css","mainMenu","documentHeight","jQuery","CartController","MenuController","embedVidController","productTextController","singleProductHeightController","removeFromCartController","reserveFormController","scrollHeaderController","fpVideoController","fpBackgroundController","focus","this","blur","imagesHandler","setIndex","firstImg","img","attr","theme_path","bgContainer","controller","getIndex","curImg","newImg","animateIn","animateOut","image","n","newIndex","complete","load","addEventListeners","vid","addEventListener","animShowVideo","animOutVideo","vidHeight","vidElement","movingContent","paused","play","getElementById","width","modifyHeader","linkHeader","validateEmailOnBlur","emailInput","val","isEmail","validateNameOnBlur","nameInput","isTrustedCharacters","validateNumberOnBlur","phoneInput","submitListener","packData","dataObject","customer_html","inputArray","customer_email","sendForm","customerData","stripResponse","trim","animateSuccess","form","validSuccess","submitBtn","event","preventDefault","inputs","name","toggleClass","textIcon","productLeft","productRight","handler","contentHeight","imageHeight","mainImage","initVideo","vidUrl","vidFrame","vidId","constructedHtml","addBtn","cart","prodTitle","cartNumber","cartInt","text","product_id","updatedNum","remBtn","qtyElem","siblings","qty","quantity","animateMenu","updateHeaderOpen","updateHeaderClose","rawIconCss","cartIcon","rawSearchCss","searchForm","rawCartContCss","cartContents","iconRight","searchRight","cartContRight","right","menuLinks","aHref","elem","menuHeaders","navigate","menuBtn"],"mappings":"AAiCA,QAASA,UAASC,GAChBC,EAAE,cAAcC,SACdC,UAAWH,GACV,KAGL,QAASI,sBACP,GAAIC,GAAUC,kBACdD,GAAQE,KAAK,SAASC,GACpBC,OAAOD,KAETE,sBAGF,QAASC,eACP,GACIC,IADOC,OAAOC,SAASC,KAChBF,OAAOC,SAASF,KAIrBA,GAGJI,SAASJ,GAFTR,qBAaJ,QAASY,UAASJ,GAChB,GAAIK,GAAOC,EAAOC,CAEiB,MAA9BP,EAAKQ,QAAQ,eAChBH,EAAQ,aAG0B,KAA/BL,EAAKQ,QAAQ,gBAChBH,EAAQ,cAGwB,KAA7BL,EAAKQ,QAAQ,cAChBD,EAAY,WACZE,MAAQT,EAAKS,MAAM,KAEjBH,EADGN,EAAKQ,SAAQ,IAAwBR,EAAKQ,SAAQ,GAC7CC,MAAM,GAENA,MAAM,IAIa,KAA1BT,EAAKQ,QAAQ,WAChBD,EAAY,QACZE,MAAQT,EAAKS,MAAM,KAEjBH,EADGN,EAAKQ,SAAQ,IAAwBR,EAAKQ,SAAQ,GAC7CC,MAAM,GAENA,MAAM,IAIlBC,kBAAkBL,EAAOC,EAAOC,GAGlC,QAASI,SAAQN,EAAOC,EAAOC,GAC7B,GAEIK,GAAKC,EAAKC,EAGVC,EALAC,EAAIf,OAAOC,SAASF,KACpBG,EAAOF,OAAOC,SAASC,KAEvBc,EAAW,SACXC,IAGJ,IAAKF,EAAI,CACP,GAAIG,GAAOhB,EAAKM,MAAM,IAiBtB,IAhBAM,EAAWI,EAAK,GAEXd,GACHO,EAAMP,EACNa,EAAWE,KAAKR,KAEgB,KAA3BI,EAAER,QAAQ,eACbI,EAAM,YACNM,EAAWE,KAAKR,IAEe,KAA5BI,EAAER,QAAQ,gBACbI,EAAM,aACNM,EAAWE,KAAKR,KAIfN,EACHO,EAAMP,EACNQ,EAAKP,EACLW,EAAWE,KAAKN,GAChBI,EAAWE,KAAKP,OACX,CACL,GAA+B,KAA1BG,EAAER,QAAQ,YAAqB,CAClCD,EAAY,UACZ,IAAIc,GAAWL,EAAEP,MAAM,YACnBa,EAAMD,EAAS,GAAGE,QAAQ,IAAK,GACnCV,GAAMS,EACNJ,EAAWE,KAAKb,GAChBW,EAAWE,KAAKP,GAGlB,GAA4B,KAAvBG,EAAER,QAAQ,SAAkB,CAC/BD,EAAY,OACZ,IAAIc,GAAWL,EAAEP,MAAM,SACnBa,EAAMD,EAAS,GAAGE,QAAQ,IAAK,GACnCV,GAAMS,EACNJ,EAAWE,KAAKb,GAChBW,EAAWE,KAAKP,SAMpBE,GAAWZ,EAENE,IACHO,EAAMP,EACNa,EAAWE,KAAKR,IAGbN,IACHO,EAAMP,EACNQ,EAAKP,EACLW,EAAWE,KAAKN,GAChBI,EAAWE,KAAKP,GAIpB,IAAIW,GAAS,EACTA,GAASP,CAEb,IAAIQ,GAAeP,EAAWQ,MAC9BC,SAAQC,IAAIH,GACZpC,EAAE6B,GAAYW,KAAK,SAASC,EAAGC,GACnBN,EAAa,EAAlBK,IACHN,GAAUO,EAAI,KAEXD,IAAOL,EAAa,IACvBD,GAAUO,KAIdC,OAAOR,GACPd,kBAAkBE,EAAKC,EAAKC,GAG9B,QAASkB,QAAOhC,EAAMG,GACpBwB,QAAQC,IAAI5B,EAAMG,GAEZA,EAGJF,OAAOC,SAASC,KAAOA,EAAOH,EAF9BC,OAAOC,SAASF,KAAOA,EAM3B,QAASU,mBAAkBL,EAAOC,EAAOC,GAyBvC,GAxBAoB,QAAQC,IAAIvB,EAAOC,EAAOC,GAwBrBF,GAASC,GAASC,EAAW,CAChC,GAAI0B,GAAcC,qBAAqB7B,EAAOC,EAAOC,EAErD0B,GAAYE,KAAK,SAASvC,GACxB+B,QAAQC,IAAIhC,GACZC,OAAOD,KAERwC,KAAK,WACFT,QAAQC,IAAI,aAIlB9B,sBAGF,QAASoC,sBAAqB7B,EAAOC,EAAOC,GAI1C,QAAS8B,KACP,GAAIC,GAAWjD,EAAEkD,UAEjB,IAAKlC,EAAQ,CAEX,GADAsB,QAAQC,IAAIvB,GACG,cAAVA,EAAwB,CAC3B,GAAImC,GAAOC,sBAEXD,GAAK7C,KAAK,SAASC,GACjB0C,EAASI,QAAQ9C,KAIrB,GAAe,eAAVS,EAAyB,CAC5B,GAAImC,GAAOG,uBAEXH,GAAK7C,KAAK,SAASC,GACjB0C,EAASI,QAAQ9C,UAKrB0C,GAASM,QAEX,OAAON,GA3BTX,QAAQC,IAAI,qBACZ,IAAIiB,GAAUxD,EAAEkD,WA6BZO,EAAeT,GAyCnB,OAvCAS,GAAanD,KAAK,SAASC,GAGzB,GAFA+B,QAAQC,IAAIhC,GAEPU,EAAQ,CACX,GAAmB,UAAdC,EAAwB,CAC3B,GAAIwC,GAAYC,kBAAkB1C,EAAOV,EACzCmD,GAAUpD,KAAK,SAASsD,GACtBJ,EAAQH,QAAQO,KAIpB,GAAmB,aAAd1C,EAA2B,CAC9B,GAAIwC,GAAYG,gBAAgB5C,EAAOV,EACvCmD,GAAUpD,KAAK,SAASwD,GACtBN,EAAQH,QAAQS,SAKvBf,KAAK,WACJ,GAAK9B,EAAQ,CACX,GAAmB,UAAdC,EAAwB,CAC3B,GAAIwC,GAAYC,kBAAkB1C,EAClCyC,GAAUpD,KAAK,SAASsD,GACtBJ,EAAQH,QAAQO,KAIpB,GAAmB,aAAd1C,EAA2B,CAC9B,GAAIwC,GAAYG,gBAAgB5C,EAChCyC,GAAUpD,KAAK,SAASwD,GACtBN,EAAQH,QAAQS,UAIpBN,GAAQD,WAILC,EAGT,QAASK,iBAAgB5C,EAAOV,GAkB5B,QAASwD,KACP/D,EAAEO,GAAUiC,KAAK,SAASC,EAAEC,GAC1B,GAAIsB,GAAStB,EAAEuB,IACgB,MAA1BD,EAAO7C,QAAQF,IAClBiD,EAAOnC,KAAKW,KAIhByB,EAAMd,QAAQa,GAzBlB,GAAIA,MACAC,EAAQnE,EAAEkD,UAEd,IAAM3C,EAyBJwD,QAzBe,CACf,GAAIK,GAAqB/D,kBAEzB+D,GAAmB9D,KAAK,SAAS+D,GAC/BrE,EAAEqE,GAAa7B,KAAK,SAASC,EAAEC,GAC7B,GAAI4B,GAAO5B,EAAE6B,UACgB,MAAxBD,EAAKnD,QAAQF,IAChBiD,EAAOnC,KAAKW,KAIhByB,EAAMd,QAAQa,KAiBlB,MAAOC,GAGT,QAASR,mBAAkB1C,EAAOV,GAkB9B,QAASwD,KACP/D,EAAEO,GAAUiC,KAAK,SAASC,EAAEC,GAC1B,GAAIsB,GAAStB,EAAEuB,IACgB,MAA1BD,EAAO7C,QAAQF,IAClBiD,EAAOnC,KAAKW,KAIhByB,EAAMd,QAAQa,GAzBlB,GAAIA,MACAC,EAAQnE,EAAEkD,UAEd,IAAM3C,EAyBJwD,QAzBe,CACf,GAAIK,GAAqB/D,kBAEzB+D,GAAmB9D,KAAK,SAAS+D,GAC/BrE,EAAEqE,GAAa7B,KAAK,SAASC,EAAEC,GAC7B,GAAIsB,GAAStB,EAAEuB,IACgB,MAA1BD,EAAO7C,QAAQF,IAClBiD,EAAOnC,KAAKW,KAIhByB,EAAMd,QAAQa,KAiBlB,MAAOC,GAGT,QAASf,wBACP,GAAIgB,GAAqB/D,mBACrB8D,EAAQnE,EAAEkD,UA2Bd,OAzBAkB,GAAmB9D,KAAK,SAAS+D,GAY/B,QAASG,GAAUC,EAAEC,GACnB,MAAOD,GAAEzD,MAAQ0D,EAAE1D,MAZrB,GAAI2D,MACAT,IAEJlE,GAAEqE,GAAa7B,KAAK,SAASC,EAAEC,GAC7B,GAAIkC,IACF5D,MAAO6D,SAASnC,EAAiB,eACjCoC,QAASpC,EAEXiC,GAAU5C,KAAK6C,IAOjB,IAAIG,GAAcJ,EAAUZ,KAAKS,EAEjCxE,GAAE+E,GAAavC,KAAK,SAASwC,EAAEC,GAC7Bf,EAAOnC,KAAKkD,EAAEH,WAGhBX,EAAMd,QAAQa,KAGTC,EAGT,QAASb,yBACP,GAAIc,GAAqB/D,mBACrB8D,EAAQnE,EAAEkD,UA2Bd,OAzBAkB,GAAmB9D,KAAK,SAAS+D,GAY/B,QAASG,GAAUC,EAAEC,GACnB,MAAOD,GAAEzD,MAAQ0D,EAAE1D,MAZrB,GAAI2D,MACAT,IAEJlE,GAAEqE,GAAa7B,KAAK,SAASC,EAAEC,GAC7B,GAAIkC,IACF5D,MAAO6D,SAASnC,EAAiB,eACjCoC,QAASpC,EAEXiC,GAAU5C,KAAK6C,IAOjB,IAAIG,GAAcJ,EAAUZ,KAAKS,GAAWU,SAE5ClF,GAAE+E,GAAavC,KAAK,SAASwC,EAAEC,GAC7Bf,EAAOnC,KAAKkD,EAAEH,WAGhBX,EAAMd,QAAQa,KAGTC,EAIT,QAAS9D,oBAyBP,QAAS8E,GAAiBC,GACxB,IACE,GAAIC,GAAUzE,OAAOwE,GACnBE,EAAI,kBAGN,OAFAD,GAAQE,QAAQD,EAAGA,GACnBD,EAAQG,WAAWF,IACZ,EAET,MAAM5C,GACJ,OAAO,GAIX,QAAS+C,GAAaC,GACpBC,EAAYD,EAGd,QAASE,KACP,GAAIC,GAAIF,CACR,OAAOE,GAGT,QAASC,GAAYC,GACnBC,EAAWD,EAQb,QAASE,KACP,GAAIC,EAC2B,MAA1BC,EAAIhF,QAAQ,YACf+E,EAAQC,EAAI/E,MAAM,KAElBgF,GACEhB,KAAM,OACNnE,MAAOiF,EAAM,KAIgB,KAA5BC,EAAIhF,QAAQ,cACf+E,EAAQC,EAAI/E,MAAM,KAElBgF,GACEhB,KAAM,QACNnE,MAAOiF,EAAM,KAKnB,QAASG,KACP,MAAOD,GAGT,QAASE,KACP,GAAIC,GAAYvG,EAAE,QAAQwG,KAAK,uBAC3Bb,EAAY3F,EAAEuG,GAAWE,KAAK,QAC9BT,EAAWhG,EAAEuG,GAAWE,KAAK,WACtBzG,GAAEuG,GAAWE,KAAK,OACjBzG,EAAEuG,GAAWE,KAAK,MAC1BR,KACAH,EAAYE,GAGdP,GADIE,GAAaA,EAAYK,EAChB,EAEAL,EAGf,IACIe,IADMd,IACQS,IAClBM,GAAMD,EAAYtB,KAAO,IAAMsB,EAAYzF,MAEtCoE,GACHuB,EAAgBC,aAChBtG,EAAWuG,KAAKC,MAAMH,EAAcI,QAAQL,IACxCpG,EACF0G,EAAI5D,QAAQ9C,GAEZ2G,KAIF5E,QAAQC,IAAI,0BAIhB,QAAS2E,KACP,GACIC,GADAC,EAAYf,IAEZjB,EAAOgC,EAAUhC,IAEP,UAATA,IACH+B,EAAS,sBAEG,UAAT/B,IACH+B,EAAS,sBAGX,IAAIT,IACAW,OAAQ,EACRC,MAAO,GACPrG,MAAOmG,EAAUnG,OAErBsG,EAAUT,KAAKU,UAAUd,EAEzB1G,GAAEyH,MACAtB,IAAKuB,KAAKC,SAAWR,EACrB/B,KAAM,OACNqB,KAAMc,EACNK,SAAU,OACVC,QAAS,SAASC,GAChBvH,EAAWuH,EAASvH,SACpBqG,EAAcrB,QAAQoB,EAAKG,KAAKU,UAAUjH,IAC1C0G,EAAI5D,QAAQ9C,IAEdwH,MAAO,SAASD,GACdxF,QAAQC,IAAIuF,MA/IlB,GAAI3B,GAAMvF,OAAOC,SAASC,KACtBmG,EAAMjH,EAAEkD,UAEZ,IAA+B,KAA1BiD,EAAIhF,QAAQ,WAAgD,KAA5BgF,EAAIhF,QAAQ,YAE/C,WADAmB,SAAQC,IAAI,4BAId,IAAIqE,GACArG,EAGAoF,EACAK,EAGAW,EANAtB,EAAUF,EAAiB,gBAO3BiB,GANSpG,EAAE,QAAQwG,KAAK,yBAyI5B,OAlIIvC,OACED,UACAO,eAEF+B,IA8HGW,EAGT,QAASzG,QAAOD,GACd,GAAIyH,GAAOhI,EAAE,QAAQwG,KAAK,sBACtByB,EAAUjI,EAAE,QAAQwG,KAAK,YACzB0B,EAAQlI,EAAE,QAAQwG,KAAK,kBACvBnE,EAAS9B,EAAS8B,MAEhBrC,GAAEiI,GAASE,SAAS,WACxBnI,EAAEiI,GAASG,SAAS,UAGjBF,GACHlI,EAAEkI,GAAO1F,KAAK,SAASC,EAAEC,GACvB1C,EAAE0C,GAAG2F,UAIT,IAAI1C,GAAY,EACZ2C,EAAO,2CACPA,IAAQ,wBAEZtI,EAAEO,GAAUiC,KAAK,SAASC,EAAGC,GAC3B,GAAI6F,GAAI9F,EAAI,CAEZzC,GAAE0C,EAAEuB,MAAMzB,KAAK,SAASC,EAAGC,GACzBuB,KAAKD,OAAOjC,KAAKW,KAGnB1C,EAAE0C,EAAE6B,YAAY/B,KAAK,SAASC,EAAGC,GAC/BuB,KAAKM,WAAWxC,KAAKW,IAGvB,IAAI8F,GAAWC,YAAY/F,EAC3B4F,IAAQE,EAEHD,EAAI,KAAO,GAASlG,EAAJI,IACnBkD,IACA2C,GAAQ,QACRA,GAAQ,SACRA,GAAQ,kCAAoC3C,EAAY,YACxD2C,GAAQ,2BAIZA,GAAQ,QACRA,GAAQ,SAERtI,EAAEgI,GAAMU,OAAOJ,GACfK,SAAS1E,MACT2E,mBACAC,eACA,IAAIC,GAAO9I,EAAE,QAAQwG,KAAK,eAC1BxG,GAAE8I,GAAMC,YAAY,UACpBC,WAAW,WACT,GAAIC,qBACH,MAIL,QAASR,aAAY/F,GACnB,GAAIwG,EAGFA,GADkB,UAAfxG,EAAEyG,SACO,yFAEA,4FAGd,IAAIC,GAAO1G,EAAE2G,YACTC,EAAQF,EAAKhI,MAAM,KAAKmI,OAAO,EAAG,IAAIC,KAAK,KAE3ChB,EAAW,sEAAwEU,CAMvF,OALIV,IAAY,aAAe9F,EAAE+G,aAAe,UAAY/G,EAAEgH,MAAQ,6EAClElB,GAAY,8BAAgC9F,EAAEiH,WAAa,sCAAwCjH,EAAEkH,GAAK,iBAAmBlH,EAAEgH,MAAQ,ufACvIlB,GAAY,kFAAoF9F,EAAEgH,MAAQ,6DAA+DJ,EAAQ,eACjLd,GAAY,QAMlB,QAASG,UAAS1E,GAChB,GAOI4F,GACAC,EARAC,EAAW/J,EAAE,QAAQwG,KAAK,cAC1BwD,EAAoBhK,EAAE+J,GAAUvD,KAAK,eACrCyD,EAAiBjK,EAAE+J,GAAUvD,KAAK,WAClCjC,EAAa2F,EAAEC,KAAKlG,EAAKM,YACzBP,EAASkG,EAAEC,KAAKlG,EAAKD,QACrBoG,EAAOpK,EAAEgK,GAAmBxD,KAAK,KACjC6D,EAASrK,EAAEiK,GAAgBzD,KAAK,IAIf,KAAhB4D,EAAK/H,QAAkC,IAAlBgI,EAAOhI,SAG/BrC,EAAEuE,GAAY/B,KAAK,SAASC,EAAGR,GAC7B4H,EAAU,gBAAkB5H,EAAM,sCAAwCA,EAAM,OAChFjC,EAAEgK,GAAmBtB,OAAOmB,KAG9B7J,EAAEgE,GAAQxB,KAAK,SAASC,EAAG6H,GACzBR,EAAY,kBAAoBQ,EAAQ,sCAAwCA,EAAQ,OACxFtK,EAAEiK,GAAgBvB,OAAOoB,KAG3Bd,WAAW,WACTuB,kBACC,OAIP,QAASA,kBACP,GAAIR,GAAW/J,EAAE,QAAQwG,KAAK,cAC1BwD,EAAoBhK,EAAE+J,GAAUvD,KAAK,eACrCyD,EAAiBjK,EAAE+J,GAAUvD,KAAK,WAClC4D,EAAOpK,EAAEgK,GAAmBxD,KAAK,KACjC6D,EAASrK,EAAEiK,GAAgBzD,KAAK,KAEhC0B,GADWlI,EAAE,QAAQwG,KAAK,cAClBxG,EAAE,QAAQwG,KAAK,kBAChB5F,QAAOC,SAASC,IAE3Bd,GAAEoK,GAAM5H,KAAK,SAASC,EAAEC,GACtB,GAAIzB,GAAQjB,EAAE0C,GAAG+D,KAAK,MAEtBzG,GAAE0C,GAAG8H,GAAG,QAAS,WACfxK,EAAEkI,GAAO1F,KAAK,SAASC,EAAEC,GACvB,GAAI+H,GAAQ,GAAKhI,CACjBzC,GAAE0C,GAAGgI,UAAUC,QAAW,IAAKC,SAAU,IAAKH,MAAOA,EAAOI,QAAS,OAAQC,QAAS,IAAI,IAAI,GAAG,OACjG9B,WAAW,WACThJ,EAAE0C,GAAGqI,UACJ,IAAIN,IAET,IAAIvJ,GAAY,WACZF,EAAQ,IACZM,SAAQN,EAAOC,EAAOC,OAK1BlB,EAAEqK,GAAQ7H,KAAK,SAASC,EAAEC,GACxB,GAAIzB,GAAQjB,EAAE0C,GAAG+D,KAAK,QAEtBzG,GAAE0C,GAAG8H,GAAG,QAAS,WACfxK,EAAEkI,GAAO1F,KAAK,SAASC,EAAEC,GACvB,GAAI+H,GAAQ,GAAKhI,CACjBzC,GAAE0C,GAAGgI,UAAUC,QAAW,IAAKC,SAAU,IAAKH,MAAOA,EAAOI,QAAS,OAAQC,QAAS,IAAI,IAAI,GAAG,OACjG9B,WAAW,WACThJ,EAAE0C,GAAGqI,UACJ,IAAIN,IAET,IAAIvJ,GAAY,QACZF,EAAQ,IACZM,SAAQN,EAAOC,EAAOC,OAK5B,QAAST,uBAGP,QAASuK,GAAaC,GACpBC,EAAYD,EAGd,QAASE,KACP,MAAOD,GAPT,GAAIA,GAAY,MAUZE,EAAcpL,EAAE,cAAcwG,KAAK,8BAEjC4E,IAINpL,EAAEoL,GAAaZ,GAAG,QAAS,WACzB,GAAIa,GAAaF,GAEjB,IAAoB,QAAfE,EAAuB,CAC1BL,EAAa,OACb,IAAIhK,GAAQ,WACZM,SAAQN,GAIV,GAAoB,SAAfqK,EAAwB,CAC3BL,EAAa,MACb,IAAIhK,GAAQ,YACZM,SAAQN,MAKd,QAAS4H,oBAqBP,QAAS0C,KACP,GAAIC,GAAO,GACNrD,EAAM,IAAMqD,EAAO,IAGtBvL,EAAEkI,EAAM,IAAIa,YAAY,UACxBwC,IACAvC,WAAW,WACTJ,oBACC,MA7BP,GAAIV,GAAQlI,EAAE,QAAQwG,KAAK,yBACvBgF,EAAUxL,EAAE,QAAQwG,KAAK,iBAEzBiF,GADSzL,EAAEwL,GAASE,SACL1L,EAAEY,QAAQ8K,SAEvBxD,IAINlI,EAAEY,QAAQ4J,GAAG,SAAU,WACrB,GAAImB,GAAS3L,EAAE4L,UAAU1L,YACrBwL,EAAS1L,EAAEwL,GAASE,QAEnBC,IAAYD,EAASD,EAAgB,KACxC7K,OAAOiL,sBAAsB,WAC3BP,QA2KR,QAASQ,eAAcC,GACrB,GAAIC,GAAQ,sHACZ,OAAOA,GAAMC,KAAKF,GAGpB,QAASG,eAAcC,GACrB,GAAIC,GAAe,yCACnB,OAAOA,GAAaH,KAAKE,GAG3B,QAASE,gBAAeF,GACtB,GAAIG,GAAW,wBACf,OAAOA,GAASL,KAAKE,GAmKvB,QAASI,SAAQ7C,EAAO8C,GAatB,QAASvM,KACPD,EAAEyM,GAAU/B,UACVC,SAAY,EAAG,GACf+B,KAAQ,IAAK,KACbC,WAAY,IAAM,OAChB/B,SAAU,IAAKH,MAAO,EAAGK,OAAQ,kBAErC9K,EAAEyM,GAAU/B,UACVC,SAAY,EAAG,GACf+B,KAAQ,IAAK,KACbC,UAAW,MACT/B,SAAU,IAAKH,MAAO,KAAMK,OAAQ,kBAvB1C,GAAI2B,GAAWzM,EAAE,QAAQwG,KAAK,aAE9B,IAAMgG,EAGJ,GAAIA,GAAMA,MAFV,IAAIA,GAAM,0CAKZ,IAAIlE,GAAO,OAASoB,EAAQ,QAAU8C,CAEtCxM,GAAEyM,GAAU/D,OAAOJ,GAgBnBU,WAAW,WACT/I,KACC,KAEH+I,WAAW,WACThJ,EAAEyM,GAAUnE,KAAK,IACjBtI,EAAEyM,GAAUG,KACVD,UAAW,QAEZ,KAoKL,QAAS9D,iBACPG,WAAW,WACT,GAAI6D,GAAW7M,EAAE,QAAQwG,KAAK,cAE1BsG,GADc9M,EAAE,QAAQwG,KAAK,iBACZxG,EAAE,iBAAiB0L,SAGxC1L,GAAE6M,GAAUD,KACVlB,OAAUoB,EAAiB,IAAM,QAElC,KA70CLC,OAAOnB,UAAUpB,GAAG,QAAS,WAC3BxK,EAAI+M,OAGJ,GAAIC,gBACJ,GAAIC,gBAEJ,GAAIC,oBACJ,GAAIC,uBACJ,GAAIC,+BACJ,GAAIC,0BACJ,GAAIC,uBACJ,GAAIC,wBACJ,GAAIC,mBACJ,GAAIC,wBAEJ/M,cAGAV,EAAE,eAAe0N,MAAM,WACrB1N,EAAE,cAAgB2N,KAAK/D,GAAK,MAAMxB,SAAS,WAC1CwF,KAAK,WACN5N,EAAE,SAAS+I,YAAY,YAI3B,IAAI+D,gBA0xBAW,uBAAyB,WAiB3B,QAASI,KACPC,EAAS,GACT9N,EAAE+N,GAAUrD,UACVC,QAAW,IACTC,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,MAEnE,KAAK,GAAIrI,GAAI,EAAO,EAAJA,EAAOA,IAAM,CAC3B,GAAIuL,GAAMhO,EAAE,WAAWiO,KAAK,MAAOvG,KAAKwG,WAAa,aAAezL,EAAI,QAAQwL,KAAK,QAAS,MAAQxL,EACtGzC,GAAEmO,GAAazF,OAAOsF,GAGxBhF,WAAWoF,EAAY,KAGzB,QAASA,KACP,GAAIpJ,GAAIqJ,IACJ9F,EAAIvD,EAAE,CAELuD,GAAI,IACPA,EAAI,EAGN,IAAI+F,GAAStO,EAAEmO,GAAa3H,KAAK,UAAYxB,GACzCuJ,EAASvO,EAAEmO,GAAa3H,KAAK,UAAY+B,EAE7C3H,QAAOiL,sBAAsB2C,EAAUD,IACvC3N,OAAOiL,sBAAsB4C,EAAWH,IAExCR,EAASvF,GAETS,WAAWoF,EAAY,KAGzB,QAASI,GAAUE,GACjB1O,EAAE0O,GAAOhE,UACPC,QAAW,IACTC,SAAU,IAAMH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAGtE,QAAS2D,GAAWC,GAClB1O,EAAE0O,GAAOhE,UACPC,QAAW,IACTC,SAAU,IAAMH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAGtE,QAASuD,KAEP,MADAM,GAAIjJ,EACGiJ,EAGT,QAASb,GAASc,GAChBlJ,EAAQkJ,EAnEV,GAEIlJ,GAFAyI,EAAcnO,EAAE,QAAQwG,KAAK,iBAC7BuH,EAAW/N,EAAEmO,GAAa3H,KAAK,MAG7B2H,IAIDJ,GAAYA,EAAS,KACpBA,EAAS,GAAGc,SACdhB,IAEAE,EAASe,KAAKjB,KA2DhBL,kBAAoB,WAgBtB,QAASuB,KACPC,EAAIC,iBAAiB,iBAAkBC,GACvCF,EAAIC,iBAAiB,QAASE,GAGhC,QAASD,KACPlP,EAAEiI,GAASG,SAAS,UAEpBpI,EAAEuG,GAAWmE,UACXgB,OAAU0D,IACRxE,SAAU,IAAKH,MAAO,EAAGK,QAAS,IAAI,IAAI,GAAG,OAEjD9K,EAAEqP,GAAY3E,UACZC,QAAW,IACTC,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9K,EAAEsP,GAAe5E,UACfgC,IAAO0C,EAAY,KACjBxE,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9B,WAAW,WACJgG,EAAIO,QACPP,EAAIQ,QAEL,KAGL,QAASL,KACPnP,EAAEqP,GAAY3E,UACZC,QAAW,IACTC,SAAU,IAAKH,MAAO,EAAGI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEnE9K,EAAEuG,GAAWmE,UACXgB,OAAU,KACRd,SAAU,IAAMH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEpD9K,EAAEsP,GAAe5E,UACfgC,IAAO,KACL9B,SAAU,IAAMH,MAAO,IAAKI,QAAS,QAASC,QAAS,IAAI,IAAI,GAAG,OAEtEhL,SAAS,GAvDX,GAAIkP,GAAMpD,SAAS6D,eAAe,kBAElC,IAAKT,EAAL,CAGE,GAAI/G,GAAUjI,EAAE,QAAQwG,KAAK,YACzBD,EAAYvG,EAAE,QAAQwG,KAAK,0BAC3B6I,EAAarP,EAAEuG,GAAWC,KAAK,oBAC/B8I,EAAgBtP,EAAE,QAAQwG,KAAK,mBAC/BkJ,EAAQ1P,EAAEY,QAAQ8O,QAClBN,EAAcM,EAAM,IAAI,GAAI,GAAI,CAEpCX,OAgDAxB,uBAAyB,WAO3B,QAASoC,KACPhE,EAAS3L,EAAEY,QAAQV,YAEdyL,EAAS,KACZ3L,EAAE4P,GAAYxH,SAAS,UAEX,IAATuD,GACH3L,EAAE4P,GAAY7G,YAAY,UAb9B,GAEI4C,GAFAiE,EAAa5P,EAAE,QAAQwG,KAAK,mBACpBxG,GAAEY,QAAQ8O,OAGtB1P,GAAEY,QAAQ4J,GAAG,SAAUmF,IA6BrBrC,sBAAwB,WAO1B,QAASuC,KACP7P,EAAE8P,GAAYtF,GAAG,OAAQ,WACvB,GAAIzK,GAAQC,EAAE2N,MAAMoC,KAEpB,IAAsB,IAAjBhQ,EAAMsC,OAIT,YAHKrC,EAAE2N,MAAMxF,SAAS,UACpBnI,EAAE2N,MAAM5E,YAAY,SAKxB,IAAsB,IAAjBhJ,EAAMsC,OAAe,CACxB,GAAI2N,GAAUlE,cAAc/L,EAEvBiQ,IAAYhQ,EAAE2N,MAAMxF,SAAS,UAChCnI,EAAE2N,MAAMvF,SAAS,SAGf4H,GAAWhQ,EAAE2N,MAAMxF,SAAS,UAC9BnI,EAAE2N,MAAM5E,YAAY,YAM5B,QAASkH,KACPjQ,EAAEkQ,GAAW1F,GAAG,OAAQ,WACtB,GAAIzK,GAAQC,EAAE2N,MAAMoC,KAEpB,IAAsB,IAAjBhQ,EAAMsC,OAIT,YAHKrC,EAAE2N,MAAMxF,SAAS,UACpBnI,EAAE2N,MAAM5E,YAAY,SAKxB,IAAsB,IAAjBhJ,EAAMsC,OAAe,CACxB,GAAI8N,GAAsBjE,cAAcnM,EAEnCoQ,IAAwBnQ,EAAE2N,MAAMxF,SAAS,UAC5CnI,EAAE2N,MAAMvF,SAAS,SAGf+H,GAAuBnQ,EAAE2N,MAAMxF,SAAS,UAC1CnI,EAAE2N,MAAM5E,YAAY,YAM5B,QAASqH,KACPpQ,EAAEqQ,GAAY7F,GAAG,OAAQ,WACvB,GAAIzK,GAAQC,EAAE2N,MAAMoC,KAEpB,IAAsB,IAAjBhQ,EAAMsC,OAIT,YAHKrC,EAAE2N,MAAMxF,SAAS,UACpBnI,EAAE2N,MAAM5E,YAAY,SAKxB,IAAsB,IAAjBhJ,EAAMsC,OAAe,CACxB,GAAIiK,GAAWD,eAAetM,EAExBuM,IAAatM,EAAE2N,MAAMxF,SAAS,UAClCnI,EAAE2N,MAAMvF,SAAS,SAGdkE,GAAYtM,EAAE2N,MAAMxF,SAAS,UAChCnI,EAAE2N,MAAM5E,YAAY,YAM5B,QAASuH,KAwBP,QAASC,KAMP,MALAC,YAAWC,cAAgB,qBAAuBC,WAAW,GAAG3Q,MAAQ,QACxEyQ,WAAWC,eAAiB,oBAAsBC,WAAW,GAAG3Q,MAAQ,QACxEyQ,WAAWC,eAAiB,sBAAwBC,WAAW,GAAG3Q,MAAQ,QAC1EyQ,WAAWG,eAAiBD,WAAW,GAAG3Q,MAEnCyQ,WAGT,QAASI,GAASnK,GAChB,GAAIoK,GAAe/J,KAAKU,UAAUf,EAEhCzG,GAAEyH,MACAtB,IAAKuB,KAAKC,SAAW,kBACrBvC,KAAM,OACNqB,KAAMoK,EACNhJ,QAAS,SAASC,GAChB,GAAIgJ,GAAgB9Q,EAAE+Q,KAAKjJ,EAC3BxF,SAAQC,IAAIuO,GACW,YAAlBA,GACHE,KAMJjJ,MAAO,SAASD,GACdxF,QAAQC,IAAIuF,MAKpB,QAASkJ,KACPhR,EAAEiR,GAAMvG,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAO,EAAGK,QAAS,IAAI,IAAI,GAAG,KAAMD,QAAS,SAEhE7K,EAAEkR,cAAcxG,UACdC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,KAAMD,QAAS,UAElE7B,WAAW,WACTpI,OAAOC,SAASC,KAAOF,OAAOC,SAASC,MACtC,KAlELd,EAAEmR,GAAW3G,GAAG,QAAS,SAAS4G,GAChCA,EAAMC,iBACNC,OAAStR,EAAEiR,GAAMzK,KAAK,SACtB0K,aAAelR,EAAE,QAAQwG,KAAK,uBAC9BgK,cACAE,cAEA1Q,EAAEsR,QAAQ9O,KAAK,SAASC,EAAGC,GACzB,IAAK1C,EAAE0C,GAAGyF,SAAS,UAAkC,IAAtBnI,EAAE0C,GAAGqN,MAAM1N,OAA1C,CAGE,GAAIuC,IACF2M,KAAM7O,EAAE6O,KACRxR,MAAOC,EAAE0C,GAAGqN,MAEdW,YAAW3O,KAAK6C,KAIpB,IAAI6B,GAAO8J,GACXK,GAASnK,KAtGb,GAAIwK,GAAOjR,EAAE,QAAQwG,KAAK,gBACtBsJ,EAAa9P,EAAEiR,GAAMzK,KAAK,qBAC1B0J,EAAYlQ,EAAEiR,GAAMzK,KAAK,yBACzB6J,EAAarQ,EAAEiR,GAAMzK,KAAK,0BAC1B2K,EAAYnR,EAAEiR,GAAMzK,KAAK,kBAoJ7B4J,KACAP,IACAI,IACAK,KA4CEnD,sBAAwB,WAS1B,QAASqE,KACPxR,EAAEyR,GAAUD,YAAY,OACxBxR,EAAE0R,GAAaF,YAAY,OAC3BxR,EAAE2R,GAAcH,YAAY,OAX9B,GAAIC,GAAWzR,EAAE,QAAQwG,KAAK,cAC1BkL,EAAc1R,EAAE,QAAQwG,KAAK,iBAC7BmL,EAAe3R,EAAE,QAAQwG,KAAK,iBAElCxG,GAAEyR,GAAUjH,GAAG,QAAS,WACtBgH,MASFxI,WAAWwI,EAAa,MAGtBpE,8BAAgC,WAclC,QAASwE,KACP,GAAIC,GAAgB7R,EAAE,oBAAoB0L,SACtCoG,EAAc9R,EAAE,mBAAmB0L,QAElCmG,IAA+BA,EAAdC,IACpB9R,EAAE,eAAe4M,KACflB,OAAUmG,EAAgB,OAK9BhJ,iBAxBF,GAAIkJ,GAAY/R,EAAE,kBACLA,GAAE,QAAQwG,KAAK,SAEvBuL,IAAaA,EAAU,KACtBA,EAAU,GAAGlD,SACf+C,IAEAG,EAAUjD,KAAK8C,KAqBjB1E,mBAAqB,WASvB,QAAS8E,KACP,GAAIC,GAASjS,EAAEkS,GAAUjE,KAAK,YAC1B,IAA6B,KAAxBgE,EAAO9Q,QAAQ,KAClB,GAAIgR,GAAQF,EAAO7Q,MAAM,KACrBwI,EAAKuI,EAAM,OACV,CACL,GAAIA,GAAQF,EAAO7Q,MAAM,IACzBwI,GAAKuI,EAAM,GAGjB,GAAIzC,GAAQ1P,EAAEY,QAAQ8O,QAClBhE,EAAUgE,EAAQ,GAAM,EAExB0C,EAAkB,kBAAoB1C,EAAQ,aAAehE,EAAS,wCAA0C9B,EAAK,kEAEzH5J,GAAEkS,GAAU5J,KAAK8J,GAvBnB,GAAIF,GAAWlS,EAAE,QAAQwG,KAAK,iBAEzB0L,GAAS7P,OAAS,GACrB2P,KAyBA/I,mBAAqB,WACvB,GAAIoJ,GAASrS,EAAE,QAAQwG,KAAK,eACxB8L,EAAOtS,EAAE,QAAQwG,KAAK,iBAG1BxG,GAAEqS,GAAQ7P,KAAK,SAASC,EAAGC,GACzB,GAAIkH,GAAK5J,EAAE2N,MAAMM,KAAK,aAClBsE,EAAYvS,EAAE2N,MAAMM,KAAK,aAE7BjO,GAAE2N,MAAMnD,GAAG,QAAS,SAAS4G,GAC3BA,EAAMC,gBACN,IAAImB,GAAaxS,EAAE,QAAQwG,KAAK,iBAC5BiM,EAAU5N,SAAS7E,EAAE,QAAQwG,KAAK,iBAAiBkM,QACnDvM,EAAMuB,KAAKC,SAAW,oBACtB6I,GACEmC,WAAc/I,EAGpBnD,MAAOK,KAAKU,UAAUgJ,GAEtBxQ,EAAEyH,MACAtB,IAAKA,EACLf,KAAM,OACNqB,KAAMA,KACNmB,SAAU,OACVC,QAAS,SAASC,GAChB,GAAI8K,GAAaH,EAAU,CAC3BD,GAAWlK,KAAKsK,GAChB5S,EAAEsS,GAAMhK,KAAKR,GACbyE,QAAQgG,GAERvJ,WAAW,WACTpI,OAAOC,SAASC,KAAOF,OAAOC,SAASC,MACtC,MAELiH,MAAO,SAASD,GACdxF,QAAQC,IAAI,UAAWuF,WAO7BuF,yBAA2B,WAC3B,GAAIiF,GAAOtS,EAAE,QAAQwG,KAAK,kBACtBqM,EAAS7S,EAAEsS,GAAM9L,KAAK,eAE5BxG,GAAE6S,GAAQrQ,KAAK,SAASC,EAAGC,GACzB,GAAIkH,GAAK5J,EAAE2N,MAAMM,KAAK,WAClB6E,EAAU9S,EAAE2N,MAAMoF,SAAS,mBAC3BC,EAAMnO,SAAS7E,EAAE8S,GAAS7E,KAAK,YAGnCjO,GAAE2N,MAAMnD,GAAG,QAAS,WAClBlI,QAAQC,IAAIyQ,EAAKpJ,EACjB,IAAI4I,GAAaxS,EAAE,QAAQwG,KAAK,iBAC5BiM,EAAU5N,SAAS7E,EAAE,QAAQwG,KAAK,iBAAiBkM,QACnDvM,EAAMuB,KAAKC,SAAW,uBACtB6I,GACEmC,WAAc/I,EACdqJ,SAAYD,EAGlBvM,MAAOK,KAAKU,UAAUgJ,GAEtBxQ,EAAEyH,MACAtB,IAAKA,EACLf,KAAM,OACNqB,KAAMA,KACNmB,SAAU,OACVC,QAAS,SAASC,GAChB,GAAI8K,GAAaH,EAAUO,CAC3BR,GAAWlK,KAAKsK,GAChB5S,EAAEsS,GAAMhK,KAAKR,GACblH,OAAOC,SAASC,KAAOF,OAAOC,SAASC,MAEzCiH,MAAO,SAASD,GACdxF,QAAQC,IAAI,UAAWuF,WAoB7BmF,eAAiB,WAaf,QAASiG,KACFlT,EAAE6M,GAAU1E,SAAS,WACxBnI,EAAE6M,GAAU9D,YAAY,UACxB/I,EAAE2N,MAAMvF,SAAS,QACjBtI,SAAS,OACTqT,IACAlE,MAEAjP,EAAE6M,GAAUzE,SAAS,UACrBpI,EAAE2N,MAAM5E,YAAY,QACpBqK,KAKJ,QAASD,KACP,GAAIE,GAAarT,EAAEsT,GAAU1G,IAAI,SAC7B2G,EAAevT,EAAEwT,GAAY5G,IAAI,SACjC6G,EAAiBzT,EAAE0T,GAAc9G,IAAI,SACrC+G,EAAY9O,SAASwO,EAAWnR,QAAQ,KAAM,KAC9C0R,EAAc/O,SAAS0O,EAAarR,QAAQ,KAAM,KAClD2R,EAAgBhP,SAAS4O,EAAevR,QAAQ,KAAM,IAGtDlC,GAAEsT,GAAU5I,UACVoJ,MAASH,EAAY,IAAM,OACzB/I,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEnD9K,EAAEwT,GAAY9I,UACZoJ,MAASF,EAAc,IAAM,OAC3BhJ,SAAU,IAAKH,MAAO,EAAGK,QAAS,IAAI,IAAI,GAAG,OAEjD9K,EAAE0T,GAAchJ,UACdoJ,MAASD,EAAgB,IAAM,OAC7BjJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAGzD,QAASsI,KACHpT,EAAEsT,GAAU5I,UACVoJ,MAAS,KACPlJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEnD9K,EAAEwT,GAAY9I,UACZoJ,MAAS,MACPlJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAEnD9K,EAAE0T,GAAchJ,UACdoJ,MAAS,KACPlJ,SAAU,IAAKH,MAAO,IAAKK,QAAS,IAAI,IAAI,GAAG,OAGzD,QAASmE,KACPjP,EAAE+T,GAAWvJ,GAAG,QAAS,SAAS9H,GAChCA,EAAE2O,gBACF,IAAI2C,GAAShU,EAAE2N,MAAMnH,KAAK,KACtB1F,EAAOd,EAAEgU,GAAO/F,KAAK,OAEzBjO,GAAE+T,GAAWvR,KAAK,SAASC,EAAGwR,GAC5B,GAAIxJ,GAAY,GAAJhI,CAEZzC,GAAEiU,GAAMvJ,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAOA,EAAOK,OAAQ,oBAI3C9K,EAAEkU,GAAa1R,KAAK,SAASC,EAAGwR,GAC9B,GAAIxJ,GAAY,GAAJhI,CAEZzC,GAAEiU,GAAMvJ,UACNC,SAAY,EAAG,KACbC,SAAU,IAAKH,MAAOA,EAAOK,OAAQ,oBAG3C9B,WAAWmL,EAASrT,GAAO,QAI/B,QAASqT,GAASrT,GAChBkI,WAAW,WACThJ,EAAEoU,GAASrL,YAAY,QACvB/I,EAAE6M,GAAUzE,SAAS,UACrBgL,KACC,KAEHpK,WAAW,WACTpI,OAAOC,SAASC,KAAOA,GACtB,MAnGT,GAAIsT,GAAUpU,EAAE,QAAQwG,KAAK,cACzBqG,EAAW7M,EAAE,QAAQwG,KAAK,cAC1BuN,EAAY/T,EAAE6M,GAAUrG,KAAK,MAC7B0N,EAAclU,EAAE6M,GAAUrG,KAAK,MAC/BgN,EAAaxT,EAAE,QAAQwG,KAAK,gBAC5B8M,EAAWtT,EAAE,QAAQwG,KAAK,cAC1BkN,EAAe1T,EAAE,QAAQwG,KAAK,4BACtBxG,GAAEY,QAAQ8O,OAClB7G,iBAEA7I,EAAEoU,GAAS5J,GAAG,QAAS0I,IA6FzBlG,eAAiB,WACnB,GAAIsG,GAAWtT,EAAE,QAAQwG,KAAK,cAC1BkN,EAAe1T,EAAE,QAAQwG,KAAK,4BAElCxG,GAAEsT,GAAU9I,GAAG,QAAS,SAAS9H,GAC/B1C,EAAE0T,GAAclC,YAAY","file":"main.min.js","sourcesContent":["// Test if ie10 - adds class \"ie10\" to HTML tag, if true. - Excludes IE11\nif (/*@cc_on!@*/false && document.documentMode === 10) {\n    document.documentElement.className+=' ie10';\n}\n\njQuery(document).on('ready', function() {\n  $ = jQuery;\n\n\n  new CartController();\n  new MenuController();\n  // new gridCartController();\n  new embedVidController();\n  new productTextController();\n  new singleProductHeightController();\n  new removeFromCartController();\n  new reserveFormController();\n  new scrollHeaderController();\n  new fpVideoController();\n  new fpBackgroundController();\n  // productsController();\n  urlListener();\n\n  // labels for input fields\n  $(\"form :input\").focus(function() {\n    $(\"label[for='\" + this.id + \"']\").addClass(\"focus\");\n  }).blur(function() {\n    $(\"label\").removeClass(\"focus\");\n  });\n}); // End Ready\n\nvar documentHeight;\n\nfunction scrollTo(value) {\n  $('html, body').animate({\n    scrollTop: value\n  }, 700);\n}\n\nfunction productsController() {\n  var promise = productsSupplyer();\n  promise.then(function(products) {\n    render(products);\n  });\n  sortPriceController();\n}\n\nfunction urlListener() {\n  var href = window.location.href,\n      hash = window.location.hash,\n      initParams,\n      base_url;\n\n  if ( !hash ) {\n    productsController();\n  } else {\n    sortHash(hash);\n  }\n\n  // window.onhashchange = function(inf) {\n  //   var hash = location.hash;\n  //   var parts = hash.split('=');\n\n  //   var params = parts[1].split('+');\n  // }\n}\n\nfunction sortHash(hash) {\n  var price, param, paramtype;\n\n  if ( hash.indexOf('price_asc') !== -1 ) {\n    price = 'price_asc';\n  }\n\n  if ( hash.indexOf('price_desc') !== -1 ) {\n    price = 'price_desc';\n  }\n\n  if ( hash.indexOf('category') !== -1 ) {\n    paramtype = 'category';\n    split = hash.split('+');\n    if ( hash.indexOf('price_asc' !== -1 ) || hash.indexOf('price_desc' !== -1 ) ) {\n      param = split[2];\n    } else {\n      param = split[1];\n    }\n  }\n\n  if ( hash.indexOf('brand') !== -1 ) {\n    paramtype = 'brand';\n    split = hash.split('+');\n    if ( hash.indexOf('price_asc' !== -1 ) || hash.indexOf('price_desc' !== -1 ) ) {\n      param = split[2];\n    } else {\n      param = split[1];\n    }\n  }\n\n  urlDataController(price, param, paramtype);\n}\n\nfunction sortUrl(price, param, paramtype) {\n  var h = window.location.hash,\n      href = window.location.href,\n      pri, par, pt,\n      hashBase = '#sort=',\n      paramArray = [],\n      base_url;\n\n  if ( h ) {\n    var base = href.split('#');\n    base_url = base[0];\n\n    if ( price ) {\n      pri = price;\n      paramArray.push(pri);\n    } else {\n      if ( h.indexOf('price_asc') !== -1 ) {\n        pri = 'price_asc';\n        paramArray.push(pri);\n      }\n      if ( h.indexOf('price_desc') !== -1 ) {\n        pri = 'price_desc';\n        paramArray.push(pri);\n      }\n    }\n\n    if ( param ) {\n      par = param;\n      pt = paramtype;\n      paramArray.push(pt);\n      paramArray.push(par);\n    } else {\n      if ( h.indexOf('category') !== -1 ) {\n        paramtype = 'category';\n        var getParam = h.split('category');\n        var cat = getParam[1].replace('+', '');\n        par = cat;\n        paramArray.push(paramtype);\n        paramArray.push(par);\n      }\n\n      if ( h.indexOf('brand') !== -1 ) {\n        paramtype = 'brand';\n        var getParam = h.split('brand');\n        var cat = getParam[1].replace('+', '');\n        par = cat;\n        paramArray.push(paramtype);\n        paramArray.push(par);\n      }\n    }\n\n\n  } else {\n    base_url = href;\n\n    if ( price ) {\n      pri = price;\n      paramArray.push(pri);\n    }\n\n    if ( param ) {\n      par = param;\n      pt = paramtype;\n      paramArray.push(pt);\n      paramArray.push(par);\n    }\n  }\n\n  var string = '';\n      string = hashBase;\n\n  var paramsLength = paramArray.length;\n  console.log(paramsLength);\n  $(paramArray).each(function(i, e) {\n    if ( i < (paramsLength-1) ) {\n      string += e + '+';\n    }\n    if ( i === (paramsLength-1) ) {\n      string += e;\n    }\n  });\n\n  setUrl(string);\n  urlDataController(pri, par, pt);\n}\n\nfunction setUrl(hash, href) {\n  console.log(hash, href);\n\n  if ( !href ) {\n    window.location.hash = hash;\n  } else {\n    window.location.href = href + hash;\n  }\n}\n\nfunction urlDataController(price, param, paramtype) {\n  console.log(price, param, paramtype);\n\n  // if ( price && paramtype ) {\n  //   var dataPromise = returnSortedMultiple(price, param, paramtype);\n\n  //   dataPromise.done(function(products) {\n  //     render(products);\n  //   })\n  //   .fail(function() {\n  //       console.log('failed price & param');\n  //   });\n  // }\n\n  // if ( price && (!param || !paramtype) ) {\n  //   var dataPromise = returnSortedMultiple(price);\n\n  //   dataPromise.done(function(products) {\n  //     render(products);\n  //   })\n  //   .fail(function() {\n  //       console.log('failed price & !param');\n  //   });\n  // }\n\n  if ( price && param && paramtype) {\n    var dataPromise = returnSortedMultiple(price, param, paramtype);\n\n    dataPromise.done(function(products) {\n      console.log(products);\n      render(products);\n    })\n    .fail(function() {\n        console.log('failed!');\n    });\n  }\n\n  sortPriceController();\n}\n\nfunction returnSortedMultiple(price, param, paramtype) {\n  console.log('trying to get data');\n  var sortdef = $.Deferred();\n\n  function getFirstList() {\n    var getFirst = $.Deferred();\n\n    if ( price ) {\n      console.log(price);\n      if ( price === 'price_asc' ) {\n        var init = returnSortedPriceLow();\n\n        init.then(function(products) {\n          getFirst.resolve(products);\n        });\n      }\n\n      if ( price === 'price_desc' ) {\n        var init = returnSortedPriceHigh();\n\n        init.then(function(products) {\n          getFirst.resolve(products);\n        });\n      }\n\n    } else {\n      getFirst.reject();\n    }\n    return getFirst;\n  }\n\n  var firstPromise = getFirstList();\n\n  firstPromise.then(function(products) {\n    console.log(products);\n\n    if ( param ) {\n      if ( paramtype === 'brand' ) {\n        var finalSort = returnSortedBrand(param, products);\n        finalSort.then(function(brandSorted) {\n          sortdef.resolve(brandSorted);\n        });\n      }\n\n      if ( paramtype === 'category' ) {\n        var finalSort = returnSortedCat(param, products);\n        finalSort.then(function(catSorted) {\n          sortdef.resolve(catSorted);\n        });\n      }\n    }\n  })\n  .fail(function() {\n    if ( param ) {\n      if ( paramtype === 'brand' ) {\n        var finalSort = returnSortedBrand(param);\n        finalSort.then(function(brandSorted) {\n          sortdef.resolve(brandSorted);\n        });\n      }\n\n      if ( paramtype === 'category' ) {\n        var finalSort = returnSortedCat(param);\n        finalSort.then(function(catSorted) {\n          sortdef.resolve(catSorted);\n        });\n      }\n    } else {\n      sortdef.reject();\n    }\n  });\n\n  return sortdef;\n}\n\nfunction returnSortedCat(param, products) {\n  var sorted = [],\n      defer = $.Deferred();\n\n  if ( !products ) {\n    var newProductsPromise = productsSupplyer();\n\n    newProductsPromise.then(function(newProducts) {\n      $(newProducts).each(function(i,e) {\n        var cats = e.categories;\n        if ( cats.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    });\n  } else {\n    function sort() {\n      $(products).each(function(i,e) {\n        var brands = e.tags;\n        if ( brands.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    }\n\n    sort();\n  }\n\n  return defer;\n}\n\nfunction returnSortedBrand(param, products) {\n  var sorted = [];\n  var defer = $.Deferred();\n\n  if ( !products ) {\n    var newProductsPromise = productsSupplyer();\n\n    newProductsPromise.then(function(newProducts) {\n      $(newProducts).each(function(i,e) {\n        var brands = e.tags;\n        if ( brands.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    });\n  } else {\n    function sort() {\n      $(products).each(function(i,e) {\n        var brands = e.tags;\n        if ( brands.indexOf(param) !== -1 ) {\n          sorted.push(e);\n        }\n      });\n\n      defer.resolve(sorted);\n    }\n\n    sort();\n  }\n\n  return defer;\n}\n\nfunction returnSortedPriceLow() {\n  var newProductsPromise = productsSupplyer(),\n      defer = $.Deferred();\n\n  newProductsPromise.then(function(newProducts) {\n    var initArray = [],\n        sorted = [];\n\n    $(newProducts).each(function(i,e) {\n      var object = {\n        price: parseInt(e['regular_price']),\n        element: e\n      }\n      initArray.push(object);\n    });\n\n    function sortPrice(a,b) {\n      return a.price - b.price;\n    }\n\n    var initialSort = initArray.sort(sortPrice);\n\n    $(initialSort).each(function(j,f) {\n      sorted.push(f.element);\n    });\n\n    defer.resolve(sorted);\n  });\n\n  return defer;\n}\n\nfunction returnSortedPriceHigh() {\n  var newProductsPromise = productsSupplyer(),\n      defer = $.Deferred();\n\n  newProductsPromise.then(function(newProducts) {\n    var initArray = [],\n        sorted = [];\n\n    $(newProducts).each(function(i,e) {\n      var object = {\n        price: parseInt(e['regular_price']),\n        element: e\n      }\n      initArray.push(object);\n    });\n\n    function sortPrice(a,b) {\n      return a.price - b.price;\n    }\n\n    var initialSort = initArray.sort(sortPrice).reverse();\n\n    $(initialSort).each(function(j,f) {\n      sorted.push(f.element);\n    });\n\n    defer.resolve(sorted);\n  });\n\n  return defer;\n}\n\n\nfunction productsSupplyer() {\n  var url = window.location.href;\n  var def = $.Deferred();\n\n  if ( url.indexOf('/type/') === -1 && url.indexOf('/brands/') === -1 ) {\n    console.log('Exited from productsModel');\n    return;\n  }\n\n  var productsCache,\n      products,\n      storage = storageAvailable('localStorage'),\n      target = $('body').find('.product-list-grid'),\n      pageIndex,\n      maxPages,\n      type,\n      brand,\n      key,\n      query = {};\n      tags = {\n        brands: [],\n        categories: []\n      };\n      initialize();\n\n  function storageAvailable(type) {\n    try {\n      var storage = window[type],\n        x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return false;\n    }\n  }\n\n  function setPageIndex(index) {\n    pageIndex = index;\n  }\n\n  function getPageIndex() {\n    var p = pageIndex;\n    return p;\n  }\n\n  function setMaxPages(max) {\n    maxPages = max;\n  }\n\n  function getMaxPages() {\n    var p = maxPages;\n    return p;\n  }\n\n  function setQueryType() {\n    var parts;\n    if ( url.indexOf('/type/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'type',\n        param: parts[4]\n      }\n    }\n\n    if ( url.indexOf('/brands/') !== -1 ) {\n      parts = url.split('/');\n\n      query = {\n        type: 'brand',\n        param: parts[4]\n      }\n    }\n  }\n\n  function getQueryType() {\n    return query;\n  }\n\n  function initialize() {\n    var container = $('body').find('.products-container'),\n        pageIndex = $(container).data('page'),\n        maxPages = $(container).data('maxpages'),\n        type = $(container).data('cat'),\n        brand = $(container).data('tag');\n        setQueryType();\n        setMaxPages(maxPages);\n\n    if ( !pageIndex || pageIndex > maxPages ) {\n      setPageIndex(1);\n    } else {\n      setPageIndex(pageIndex);\n    }\n\n    var int = getPageIndex();\n    var queryParams = getQueryType();\n    key = queryParams.type + '_' + queryParams.param;\n\n    if ( storage ) {\n      productsCache = localStorage,\n      products = JSON.parse(productsCache.getItem(key));\n      if (products) {\n        def.resolve(products);\n      } else {\n        getPosts();\n      }\n    } else {\n      // load something else, maybe\n      console.log('no localStorage for us');\n    }\n  }\n\n  function getPosts() {\n    var queryType = getQueryType(),\n        action,\n        type = queryType.type;\n\n    if ( type === 'type' ) {\n      action = '?action=sinus_type';\n    }\n    if ( type === 'brand' ) {\n      action = '?action=sinus_brand';\n    }\n\n    var queryParams = {\n        offset: 0,\n        limit: -1,\n        param: queryType.param\n    },\n    dataObj = JSON.stringify(queryParams);\n\n    $.ajax({\n      url: site.ajax_url + action,\n      type: \"POST\",\n      data: dataObj,\n      dataType: 'json',\n      success: function(response) {\n        products = response.products;\n        productsCache.setItem(key, JSON.stringify(products));\n        def.resolve(products);\n      },\n      error: function(response) {\n        console.log(response);\n      }\n    });\n  }\n\n  return def;\n}\n\nfunction render(products) {\n  var grid = $('body').find('.product-list-grid'),\n      spinner = $('body').find('.spinner'),\n      pages = $('body').find('.page.products'),\n      length = products.length;\n\n  if ( !$(spinner).hasClass('hidden') ) {\n    $(spinner).addClass('hidden');\n  }\n\n  if ( pages ) {\n    $(pages).each(function(i,e) {\n      $(e).remove();\n    });\n  }\n\n  var pageIndex = 1;\n  var html = '<div class=\"page products page-1 hidden\">';\n      html += '<ul class=\"products\">';\n\n  $(products).each(function(i, e) {\n    var k = i + 1;\n\n    $(e.tags).each(function(i, e) {\n      tags.brands.push(e);\n    });\n\n    $(e.categories).each(function(i, e) {\n      tags.categories.push(e);\n    });\n\n    var template = setTemplate(e);\n    html += template;\n\n    if ( k % 24 === 0 && i < length ) {\n      pageIndex++;\n      html += '</ul>';\n      html += '</div>';\n      html += '<div class=\"page products page-' + pageIndex + ' hidden\">';\n      html += '<ul class=\"products\">';\n    }\n  });\n\n  html += '</ul>';\n  html += '</div>';\n\n  $(grid).append(html);\n  sortTags(tags);\n  scrollController();\n  setMenuHeight();\n  var page = $('body').find('.page.page-1');\n  $(page).removeClass('hidden');\n  setTimeout(function() {\n    new gridCartController();\n  }, 1500);\n}\n\n\nfunction setTemplate(e) {\n  var stockIcon;\n\n  if ( e.in_stock === 'false' ) {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-minus-square\"></span></div>';\n  } else {\n    stockIcon = '<div class=\"in-stock-icon\"><span>PÅ LAGER: <i class=\"fa fa-check-square\"></i></span></div>';\n  }\n\n  var desc = e.description;\n  var trunc = desc.split(\" \").splice(0, 23).join(\" \");\n\n  var template = '<li class=\"product\" itemscope itemtype=\"http://schema.org/Product\">' + stockIcon;\n      template += '<img src=\"' + e.featured_src + '\" alt=\"' + e.title + ' product image produktbillede Sinus-store Copenhagen København Denmark\" />';\n      template += '<div class=\"product-price\">' + e.price_html + '<div class=\"add-button\" data-href=\"' + e.id + '\" data-title=\"' + e.title + '\"><svg version=\"1.1\" baseProfile=\"tiny\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"x=\"0px\" y=\"0px\" viewBox=\"0 0 60 60\" xml:space=\"preserve\"><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"30\" y1=\"6\" x2=\"30\" y2=\"54\"/><line class=\"svg-line\" fill=\"none\" stroke=\"#007c96\" stroke-width=\"10\" stroke-miterlimit=\"10\" x1=\"6\" y1=\"30\" x2=\"54\" y2=\"30\"/></svg><span class=\"add-info\">Tilføj til kurv</span></div></div>';\n      template += '<div class=\"sinus-product-info\"><div class=\"product-title\" itemprop=\"name\"><h3>' + e.title + '</h3></div><div class=\"short-desc\" itemprop=\"description\">' + trunc + '</div></div>';\n      template += '</li>';\n\n  return template;\n}\n\n\nfunction sortTags(tags) {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      categories = _.uniq(tags.categories),\n      brands = _.uniq(tags.brands),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      catHtml,\n      brandHtml;\n\n  if ( pCat.length !== 0 || pBrand.length !== 0 ) {\n    return\n  } else {\n    $(categories).each(function(i, cat) {\n      catHtml = '<p data-cat=\"' + cat + '\"><i class=\"fa fa-search-plus\"></i>' + cat + '</p>';\n      $(categoryContainer).append(catHtml);\n    });\n\n    $(brands).each(function(i, brand) {\n      brandHtml = '<p data-brand=\"' + brand + '\"><i class=\"fa fa-search-plus\"></i>' + brand + '</p>';\n      $(brandContainer).append(brandHtml);\n    });\n\n    setTimeout(function() {\n      sortController();\n    }, 1500);\n  }\n}\n\nfunction sortController() {\n  var menuLeft = $('body').find('.menu-left'),\n      categoryContainer = $(menuLeft).find('.categories'),\n      brandContainer = $(menuLeft).find('.brands'),\n      pCat = $(categoryContainer).find('p'),\n      pBrand = $(brandContainer).find('p'),\n      products = $('body').find('li.product'),\n      pages = $('body').find('.page.products'),\n      href = window.location.href;\n\n  $(pCat).each(function(i,e) {\n    var param = $(e).data('cat');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      var paramtype = 'category';\n      var price = null;\n      sortUrl(price, param, paramtype);\n\n    });\n  });\n\n  $(pBrand).each(function(i,e) {\n    var param = $(e).data('brand');\n\n    $(e).on('click', function() {\n      $(pages).each(function(i,e) {\n        var delay = 50 * i;\n        $(e).velocity({'opacity': 0}, {duration: 500, delay: delay, display: 'none', easing: [.24,.63,.5,.99]});\n        setTimeout(function() {\n          $(e).detach();\n        }, 600+delay);\n      });\n      var paramtype = 'brand';\n      var price = null;\n      sortUrl(price, param, paramtype);\n    });\n  });\n}\n\nfunction sortPriceController() {\n  var direction = 'asc';\n\n  function setDirection(dir) {\n    direction = dir;\n  }\n\n  function getDirection() {\n    return direction;\n  }\n\n  var priceSorter = $('.menu-left').find('.sort-links > .price-sorter');\n\n  if ( !priceSorter ) {\n    return;\n  }\n\n  $(priceSorter).on('click', function() {\n    var currentDir = getDirection();\n\n    if ( currentDir === 'asc' ) {\n      setDirection('desc');\n      var price = 'price_asc';\n      sortUrl(price);\n\n    }\n\n    if ( currentDir === 'desc' ) {\n      setDirection('asc');\n      var price = 'price_desc';\n      sortUrl(price);\n    }\n  });\n}\n\nfunction scrollController() {\n  var pages = $('body').find('.page.products.hidden'),\n      content = $('body').find('.site-content'),\n      height = $(content).height(),\n      windowHeight = $(window).height();\n\n  if ( !pages ) {\n    return;\n  }\n\n  $(window).on('scroll', function() {\n    var scroll = $(document).scrollTop(),\n        height = $(content).height();\n\n    if ( scroll >= ((height - windowHeight) - 500) ) {\n      window.requestAnimationFrame(function() {\n        updateView();\n      });\n    }\n  });\n\n  function updateView() {\n    var trig = 0;\n    if (!pages[0] || trig > 0 ) {\n      return;\n    } else {\n      $(pages[0]).removeClass('hidden');\n      trig++;\n      setTimeout(function() {\n        scrollController();\n      }, 1000);\n    }\n  }\n}\n\nvar fpBackgroundController = function() {\n  var bgContainer = $('body').find('.bg-container'),\n      firstImg = $(bgContainer).find('img'),\n      index;\n\n  if ( !bgContainer ) {\n    return;\n  }\n\n  if ( firstImg && firstImg[0] ) {\n    if (firstImg[0].complete) {\n      imagesHandler();\n    } else {\n      firstImg.load(imagesHandler);\n    }\n  }\n\n  function imagesHandler() {\n    setIndex(1);\n    $(firstImg).velocity({\n      'opacity': 1\n    }, {duration: 500, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    for( var i = 2; i < 7; i++ ) {\n      var img = $('<img />').attr('src', site.theme_path + '/img/bg/bg' + i + '.png').attr('class', 'bg-' + i);\n      $(bgContainer).append(img);\n    }\n\n    setTimeout(controller, 8000);\n  }\n\n  function controller() {\n    var j = getIndex(),\n        k = j+1;\n\n    if ( k > 6 ) {\n      k = 1;\n    }\n\n    var curImg = $(bgContainer).find('img.bg-' + j),\n        newImg = $(bgContainer).find('img.bg-' + k);\n\n    window.requestAnimationFrame(animateIn(newImg));\n    window.requestAnimationFrame(animateOut(curImg));\n\n    setIndex(k);\n\n    setTimeout(controller, 4000);\n  }\n\n  function animateIn(image) {\n    $(image).velocity({\n      'opacity': 1\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function animateOut(image) {\n    $(image).velocity({\n      'opacity': 0\n    }, {duration: 1000, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n  }\n\n  function getIndex() {\n    n = index;\n    return n;\n  }\n\n  function setIndex(newIndex) {\n    index = newIndex;\n  }\n}\n\nvar fpVideoController = function() {\n  var vid = document.getElementById('frontpage-video');\n\n  if (!vid) {\n    return;\n  } else {\n    var spinner = $('body').find('.spinner'),\n        container = $('body').find('.front-video-container'),\n        vidElement = $(container).find('#frontpage-video'),\n        movingContent = $('body').find('.moving-content'),\n        width = $(window).width(),\n        vidHeight = ((width/100*80)/16)*9;\n\n    addEventListeners();\n  }\n\n  function addEventListeners() {\n    vid.addEventListener('canplaythrough', animShowVideo);\n    vid.addEventListener('ended', animOutVideo);\n  }\n\n  function animShowVideo() {\n    $(spinner).addClass('hidden');\n\n    $(container).velocity({\n      'height': vidHeight\n    }, {duration: 700, delay: 0, easing: [.24,.63,.5,.99]});\n\n    $(vidElement).velocity({\n      'opacity': 1\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': vidHeight + 30\n    }, {duration: 700, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    setTimeout(function() {\n      if ( vid.paused ) {\n        vid.play();\n      }\n    }, 700);\n  }\n\n  function animOutVideo() {\n    $(vidElement).velocity({\n      'opacity': 0\n    }, {duration: 300, delay: 0, display: 'block', easing: [.24,.63,.5,.99]});\n\n    $(container).velocity({\n      'height': 60\n    }, {duration: 1000, delay: 400, easing: [.24,.63,.5,.99]});\n\n    $(movingContent).velocity({\n      'top': 90\n    }, {duration: 1000, delay: 400, display: 'block', easing: [.24,.63,.5,.99]});\n\n    scrollTo(0);\n  }\n}\n\n\nvar scrollHeaderController = function() {\n  var linkHeader = $('body').find('.header-link-row'),\n      width = $(window).width(),\n      scroll;\n\n  $(window).on('scroll', modifyHeader);\n\n  function modifyHeader() {\n    scroll = $(window).scrollTop();\n\n    if ( scroll > 500 ) {\n      $(linkHeader).addClass('hidden');\n    }\n    if ( scroll < 500 ) {\n      $(linkHeader).removeClass('hidden');\n    }\n  }\n}\n\nfunction validateEmail(email) {\n  var regex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n  return regex.test(email);\n}\n\nfunction validateInput(input) {\n  var allowedChars = /^[\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w&.,\\- ]+$/;\n  return allowedChars.test(input);\n}\n\nfunction validateNumber(input) {\n  var isNumber = /^(?=.*[0-9])[+()0-9]+$/;\n  return isNumber.test(input);\n}\n\nvar reserveFormController = function() {\n  var form = $('body').find('form.reserve'),\n      emailInput = $(form).find('input[type=email]'),\n      nameInput = $(form).find('input[type=text].name'),\n      phoneInput = $(form).find('input[type=text].phone'),\n      submitBtn = $(form).find('.submit-btn > a');\n\n  function validateEmailOnBlur() {\n    $(emailInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isEmail = validateEmail(value);\n\n        if( !isEmail && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isEmail && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNameOnBlur() {\n    $(nameInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isTrustedCharacters = validateInput(value);\n\n        if( !isTrustedCharacters && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if( isTrustedCharacters && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function validateNumberOnBlur() {\n    $(phoneInput).on('blur', function() {\n      var value = $(this).val();\n\n      if ( value.length === 0 ) {\n        if ( $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n        return;\n      }\n\n      if ( value.length !== 0 ) {\n        var isNumber = validateNumber(value);\n\n        if ( !isNumber && !$(this).hasClass('error') ) {\n          $(this).addClass('error');\n        }\n\n        if ( isNumber && $(this).hasClass('error') ) {\n          $(this).removeClass('error');\n        }\n      }\n    });\n  }\n\n  function submitListener() {\n    $(submitBtn).on('click', function(event) {\n      event.preventDefault(),\n      inputs = $(form).find('input'),\n      validSuccess = $('body').find('.validation.success');\n      dataObject = {},\n      inputArray = [];\n\n      $(inputs).each(function(i, e) {\n        if ( $(e).hasClass('error') || $(e).val().length === 0 ) {\n          return;\n        } else {\n          var object = {\n            name: e.name,\n            value: $(e).val()\n          }\n          inputArray.push(object);\n        }\n      });\n\n      var data = packData();\n      sendForm(data);\n    });\n\n    function packData() {\n      dataObject.customer_html = '<h4>Navn:</h4><h2>' + inputArray[0].value + '</h2>';\n      dataObject.customer_html += '<h4>TLF:</h4><h2>' + inputArray[1].value + '</h2>';\n      dataObject.customer_html += '<h4>EMAIL:</h4><h2>' + inputArray[2].value + '</h2>';\n      dataObject.customer_email = inputArray[2].value;\n\n      return dataObject;\n    }\n\n    function sendForm(data) {\n      var customerData = JSON.stringify(data);\n\n        $.ajax({\n          url: site.ajax_url + '?action=reserve',\n          type: 'POST',\n          data: customerData,\n          success: function(response) {\n            var stripResponse = $.trim(response);\n            console.log(stripResponse);\n            if ( stripResponse === 'Success' ) {\n              animateSuccess();\n            }\n            if ( stripResponse === 'Error' ) {\n\n            }\n          },\n          error: function(response) {\n            console.log(response);\n          }\n        });\n    }\n\n    function animateSuccess() {\n      $(form).velocity({\n        'opacity': [0, 1]\n      }, {duration: 300, delay: 0, easing: [.24,.63,.5,.99], display: 'none'});\n\n      $(validSuccess).velocity({\n        'opacity': [1, 0]\n      }, {duration: 300, delay: 350, easing: [.24,.63,.5,.99], display: 'block'});\n\n      setTimeout(function() {\n        window.location.href = window.location.href;\n      }, 1000);\n    }\n  }\n\n  validateNumberOnBlur();\n  validateEmailOnBlur();\n  validateNameOnBlur();\n  submitListener();\n}\n\n\nfunction shopMsg(title, msg) {\n  var atcModal = $('body').find('.atc-modal');\n\n  if ( !msg ) {\n    var msg = '<span>- blev tilføjet til kurven.</span>';\n  } else {\n    var msg = msg;\n  }\n\n  var html = '<h3>' + title + '</h3>' + msg;\n\n  $(atcModal).append(html);\n\n  function animate() {\n    $(atcModal).velocity({\n      'opacity': [1, 0],\n      'top': [150, 300],\n      'z-index': [5000, 5000]\n    }, {duration: 400, delay: 0, easing: 'easeInOutSine'});\n\n    $(atcModal).velocity({\n      'opacity': [0, 1],\n      'top': [300, 150],\n      'z-index': 5000\n    }, {duration: 400, delay: 1400, easing: 'easeInOutSine'});\n  }\n\n  setTimeout(function() {\n    animate();\n  }, 100);\n\n  setTimeout(function() {\n    $(atcModal).html('');\n    $(atcModal).css({\n      'z-index': -1000\n    });\n  }, 2000);\n}\n\n\nvar productTextController = function() {\n  var textIcon = $('body').find('.text-icon'),\n      productLeft = $('body').find('.product-left'),\n      productRight = $('body').find('.product-right');\n\n  $(textIcon).on('click', function() {\n    toggleClass();\n  });\n\n  function toggleClass() {\n    $(textIcon).toggleClass('off');\n    $(productLeft).toggleClass('off');\n    $(productRight).toggleClass('off');\n  }\n\n  setTimeout(toggleClass, 800);\n}\n\nvar singleProductHeightController = function() {\n  var mainImage = $('.main-image img'),\n      iFrame = $('body').find('iframe');\n\n  if ( mainImage && mainImage[0] ) {\n    if (mainImage[0].complete) {\n      handler();\n    } else {\n      mainImage.load(handler);\n    }\n  } else {\n    return;\n  }\n\n  function handler() {\n    var contentHeight = $('.product-content').height(),\n        imageHeight = $('.main-image img').height();\n\n    if ( contentHeight && imageHeight < contentHeight ) {\n      $('.main-image').css({\n        'height': contentHeight + 'px'\n      });\n    } else {\n      return;\n    }\n    setMenuHeight();\n  }\n}\n\nvar embedVidController = function() {\n  var vidFrame = $('body').find('.youtube-frame');\n\n  if ( vidFrame.length > 0 ) {\n    initVideo();\n  } else {\n    return;\n  }\n\n  function initVideo() {\n    var vidUrl = $(vidFrame).attr('data-href');\n        if ( vidUrl.indexOf('=') !== -1 ) {\n          var vidId = vidUrl.split('='),\n              id = vidId[1];\n        } else {\n          var vidId = vidUrl.split('/');\n          id = vidId[3];\n        }\n\n    var width = $(window).width(),\n        height = (width / 16) * 9;\n\n    var constructedHtml = '<iframe width=\"' + width + '\" height=\"' + height + '\" src=\"https://www.youtube.com/embed/' + id + '?rel=0&amp;showinfo=0\" frameborder=\"0\" allowfullscreen></iframe>';\n\n    $(vidFrame).html(constructedHtml);\n  }\n};\n\n\nvar gridCartController = function() {\n  var addBtn = $('body').find('.add-button'),\n      cart = $('body').find('.cart-contents');\n\n\n  $(addBtn).each(function(i, e) {\n    var id = $(this).attr('data-href'),\n        prodTitle = $(this).attr('data-title');\n\n    $(this).on('click', function(event) {\n      event.preventDefault();\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_add',\n          dataObject = {\n            'product_id': id\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt + 1;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          shopMsg(prodTitle);\n\n          setTimeout(function() {\n            window.location.href = window.location.href;\n          }, 1000);\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nvar removeFromCartController = function() {\n    var cart = $('body').find('.cart-contents'),\n        remBtn = $(cart).find('.remove-icon');\n\n  $(remBtn).each(function(i, e) {\n    var id = $(this).attr('data-id'),\n        qtyElem = $(this).siblings('.elem-qty-total'),\n        qty = parseInt($(qtyElem).attr('data-qty'));\n\n\n    $(this).on('click', function() {\n      console.log(qty, id);\n      var cartNumber = $('body').find('.cart-icon h5'),\n          cartInt = parseInt($('body').find('.cart-icon h5').text()),\n          url = site.ajax_url + '?action=sinus_remove',\n          dataObject = {\n            'product_id': id,\n            'quantity': qty\n          }\n\n      data = JSON.stringify(dataObject);\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        data: data,\n        dataType: 'html',\n        success: function(response) {\n          var updatedNum = cartInt - qty;\n          cartNumber.html(updatedNum);\n          $(cart).html(response);\n          window.location.href = window.location.href;\n        },\n        error: function(response) {\n          console.log('error -', response);\n        }\n      });\n    });\n  });\n};\n\nfunction setMenuHeight() {\n  setTimeout(function() {\n    var mainMenu = $('body').find('.main-menu'),\n        siteContent = $('body').find('.site-content'),\n        documentHeight = $('.site-content').height();\n\n     // set menu height, relative to content height (minus footer)\n    $(mainMenu).css({\n      'height': documentHeight - 325 + 'px'\n    });\n  }, 1000);\n}\n\nvar MenuController = function() {\n  var menuBtn = $('body').find('.menu-icon'),\n      mainMenu = $('body').find('.main-menu'),\n      menuLinks = $(mainMenu).find('li'),\n      menuHeaders = $(mainMenu).find('h3'),\n      searchForm = $('body').find('.search-form'),\n      cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents'),\n      width = $(window).width();\n      setMenuHeight();\n\n      $(menuBtn).on('click', animateMenu);\n\n      function animateMenu() {\n        if ( $(mainMenu).hasClass('hidden') ) {\n          $(mainMenu).removeClass('hidden');\n          $(this).addClass('open');\n          scrollTo('0px');\n          updateHeaderOpen();\n          addEventListener();\n        } else {\n          $(mainMenu).addClass('hidden');\n          $(this).removeClass('open');\n          updateHeaderClose();\n        }\n      }\n\n\n      function updateHeaderOpen() {\n        var rawIconCss = $(cartIcon).css('right'),\n            rawSearchCss = $(searchForm).css('right'),\n            rawCartContCss = $(cartContents).css('right'),\n            iconRight = parseInt(rawIconCss.replace('px', '')),\n            searchRight = parseInt(rawSearchCss.replace('px', '')),\n            cartContRight = parseInt(rawCartContCss.replace('px', ''));\n\n\n            $(cartIcon).velocity({\n              'right': iconRight + 230 + 'px'\n            }, {duration: 400, delay: 100, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': searchRight + 230 + 'px'\n            }, {duration: 400, delay: 0, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': cartContRight + 230 + 'px'\n            }, {duration: 400, delay: 150, easing: [.24,.63,.5,.99]});\n      }\n\n      function updateHeaderClose() {\n            $(cartIcon).velocity({\n              'right': 90\n            }, {duration: 300, delay: 200, easing: [.24,.63,.5,.99]});\n\n            $(searchForm).velocity({\n              'right': 165\n            }, {duration: 300, delay: 300, easing: [.24,.63,.5,.99]});\n\n            $(cartContents).velocity({\n              'right': 80\n            }, {duration: 300, delay: 250, easing: [.24,.63,.5,.99]});\n      }\n\n      function addEventListener() {\n        $(menuLinks).on('click', function(e) {\n          e.preventDefault();\n          var aHref =  $(this).find('a');\n          var href = $(aHref).attr('href');\n\n          $(menuLinks).each(function(i, elem) {\n            var delay = i * 20;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n\n          });\n\n          $(menuHeaders).each(function(i, elem) {\n            var delay = i * 30;\n\n            $(elem).velocity({\n              'opacity': [0, 1]\n            }, {duration: 100, delay: delay, easing: 'easeInOutSine'});\n          });\n\n          setTimeout(navigate(href), 1200);\n        });\n      }\n\n      function navigate(href) {\n        setTimeout(function() {\n          $(menuBtn).removeClass('open');\n          $(mainMenu).addClass('hidden');\n          updateHeaderClose();\n        }, 1000);\n\n        setTimeout(function() {\n          window.location.href = href;\n        }, 1300);\n      }\n};\n\nvar CartController = function() {\n  var cartIcon = $('body').find('.cart-icon'),\n      cartContents = $('body').find('.cart-modal.cart-contents');\n\n  $(cartIcon).on('click', function(e) {\n    $(cartContents).toggleClass('hidden');\n  });\n}\n\n\n// http://sin.us/wp-json/posts?type=product&filter[product_cat]=hifi&filter[orderby]=price&filter[order]=asc\n\n"],"sourceRoot":"/source/"}