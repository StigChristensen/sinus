function pageCartController(){var e=$("body").find(".add-button.large"),n=$("body").find(".cart-contents");$(e).each(function(e,t){var i=$(this).attr("data-href"),o=$(this).attr("data-title");$(this).on("click",function(e){e.preventDefault();var t=$("body").find(".cart-icon h5"),r=parseInt($("body").find(".cart-icon h5").text()),a=site.ajax_url+"?action=sinus_add",s={product_id:i};data=JSON.stringify(s),$.ajax({url:a,type:"POST",data:data,dataType:"html",success:function(e){var i=r+1;t.html(i),$(n).html(e),shopMsg(o)},error:function(e){console.log("error -",e)}})})})}function scrollTo(e){$("html, body").animate({scrollTop:e},700)}function getCategoryDesc(e,n){function t(){var e=site.site_url+"/wp-json/taxonomies/product_cat/terms/";$.ajax({url:e,type:"GET",dataType:"json",success:function(e){console.log(e),i(e)},error:function(e){console.log(e)}})}function i(n){$(n).each(function(n,t){if(e.toLowerCase()===t.slug){var i={desc:t.description,name:t.name};o(i)}})}function o(e){var n=e.desc.split('"break"'),t=$("body").find(".desc-esc"),i=$("body").find(".desc-more"),o=$("body").find(".more-btn"),r=[t,o],a="<h3>"+e.name+"</h3>";a+="<p>"+n[0]+"</p>";var s="<p>"+n[1]+"</p>";$(t).html(a),$(i).html(s),$(r).each(function(e,n){var t=200*e;$(n).velocity({opacity:1},{duration:500,delay:t,easing:[.24,.63,.5,.99]})})}(e||n)&&(cats.length>0?i(cats):t())}function readMore(){function e(){var e=$("body").find(".desc-more");$(n).on("click",function(){$(e).hasClass("showing")?($(e).removeClass("showing"),$(n).html("<p>Læs mere...</p>")):($(e).addClass("showing"),$(n).html("<p>Skjul</p>"))})}var n=$("body").find(".more-btn");n&&e()}function trigScrollIndicator(){function e(){var e=$(window).scrollTop();return e>=600?void t():(n(),void $(window).on("scroll",function(){var e=$(window).scrollTop();e>=600&&t()}))}function n(){$(i).hasClass("hidden")&&$(i).removeClass("hidden")}function t(){$(i).hasClass("hidden")||$(i).addClass("hidden")}var i=$("body").find(".scroll-indicator");e()}function thumbController(){function e(){$(a).on("click",function(e){var r=e.target,a=$(e.target).parent(".product-image"),s=$(e.target).parent(".main-image"),c=$("body").find(".main-image > img"),d=$(c).attr("src");console.log(c,d),1===a.length&&0===s.length&&(o=$(r).attr("src"),i(a,o),setTimeout(function(){o=$(r).attr("src"),n(a,d,o),setTimeout(function(){t(a)},200)},600))})}function n(e,n,t){var i=new Image,o=new Image;i.src=n,o.src=t,$(e).html(i),$(r).html(o)}function t(e){$(r).velocity({opacity:1,height:[700,0]},{duration:500,delay:0,easing:[.24,.63,.5,.99]}),$(e).velocity({opacity:1,height:[150,0],width:[150,0]},{duration:500,delay:0,easing:[.24,.63,.5,.99]})}function i(e){$(r).velocity({opacity:0,height:[0,700]},{duration:500,delay:0,easing:[.24,.63,.5,.99]}),$(e).velocity({opacity:0,height:[0,150],width:[0,150]},{duration:500,delay:0,easing:[.24,.63,.5,.99]})}var o,r=$("body").find(".main-image"),a=$("body").find(".images-cntrl");e()}function menuLeftController(){function e(){$(i).on("click",function(){$(n).toggleClass("showing")}),$(o).on("click",function(){$(n).toggleClass("showing"),scrollTo(0)}),$(t).each(function(e,t){$(t).on("click",function(){$(n).toggleClass("showing"),scrollTo(0)})})}var n=($(window).width(),$("body").find(".menu-left")),t=$(n).find("p"),i=$("body").find(".menu-left-button"),o=$(n).find(".close-left");e()}function show404(e){function n(e){$(o).hasClass("hidden")||$(o).addClass("hidden"),$(e).removeClass("hidden")}function t(e){$(e).addClass("hidden")}var i=$("body").find(".product-list-grid"),o=$("body").find(".spinner");if("search"===e){var r="Der er desværre ingen resultater, der matcher det du søger efter.",a='<div class="contained-404 hidden"><h4>'+r+"</h4></div>";$(i).html(a),$(i).css({"margin-bottom":0}),setTimeout(function(){var e=$(i).find(".contained-404");n(e)},200)}if("remove"===e){var s=$(i).find(".contained-404");s&&!$(s).hasClass("hidden")&&($(i).css({"margin-bottom":100}),setTimeout(function(){t(s)},200))}}function productsController(){var e=productsSupplyer();e.then(function(e){render(e)})}function urlListener(){function e(e){var n=e.split("#s="),t=n[1].split("&"),i=t[0].split("+");searchController(i)}var n=window.location.href,t=window.location.hash,i=n.indexOf("/type/"),o=n.indexOf("/brands/"),r=n.indexOf("/products/"),a=n.indexOf("#s=");if(-1===i&&-1===o&&-1===r);else if(t)-1!==a?(-1===r&&(window.location.href=site.site_url+"/products/"+t),e(t)):sortHash(t);else if(-1!==i||-1!==o){productsController();var s=n.split("/"),c=s[3],d=s[4];getCategoryDesc(d,c)}window.onhashchange=function(n){t=window.location.hash,a=t.indexOf("#s="),-1!==a?(-1===r&&(window.location.href=site.site_url+"/products/"+t),e(t)):sortHash(t)}}function searchFormController(){var e=$("body").find("form.sinus-search"),n=$(e).find("input[type=text]");$(e).on("submit",function(e){e.preventDefault();var t=$(n).val();if(t.length<1)return void $(n).attr("placeholder","Mindst 3 tegn...");if(t.length>1){-1!==t.indexOf(" ")&&t.replace(" ","+");var i=encodeURI(t),o="#s="+i;setUrl(o)}})}function searchController(e){if(e){var n=[];$(e).each(function(e,t){var i=decodeURIComponent(t);if(-1!==i.indexOf(" ")){var o=i.split(" ");$(o).each(function(e,t){n.push(t)})}else n.push(i)});var t=returnSortedSearch(n);t.then(function(e){render(e)})}}function returnSortedSearch(e,n){function t(n){function t(e){var n={};e.forEach(function(e){n[e]=0});var t=e.filter(function(e){return 1==++n[e]});return t.sort(function(e,t){return n[t]-n[e]})}$(n).each(function(n,t){var o=t.categories,r=t.tags,a=t.title,s=t.description,c=s.replace(/<(?:.|\n)*?>/gm,"").toLowerCase(),d=[],l=[];a.toLowerCase(),s.toLowerCase();$(o).each(function(e,n){var t=n.toLowerCase();d.push(t)}),$(r).each(function(e,n){var t=n.toLowerCase();l.push(t)});for(var n=0;n<e.length;n++)par=e[n].toLowerCase(),-1!==d.indexOf(par)&&i.push(t),-1!==l.indexOf(par)&&i.push(t),-1!==a.indexOf(par)&&i.push(t),-1!==c.indexOf(par)&&i.push(t)});var r=i.sort(t(i)),a=_.uniq(r,!0);o.resolve(a)}var i=[],o=$.Deferred();if(n)t(n);else{var r=productsSupplyer();r.then(function(e){t(e)})}return o}function sortHash(e){var n,t,i,o,r,a;if(-1===e.indexOf("#s=")){if(-1!==e.indexOf("price_asc")&&(n="price_asc",a="price_desc",sortPriceController(a)),-1!==e.indexOf("price_desc")&&(n="price_desc",a="price_asc",sortPriceController(a)),-1!==e.indexOf("category")&&(i="category"),-1!==e.indexOf("brand")&&(i="brand"),i){o=e.split("="),r=o[1].split("+");var s=r.indexOf("price_asc"),c=r.indexOf("price_desc");t=0===s||0===c?r[2]:r[1]}sortUrl(n,t,i)}}function sortUrl(e,n,t){var i,o,r,a,s=window.location.hash,c=window.location.href,d="#sort=",l=[];if(s){var u=c.split("#");if(a=u[0],e?(i=e,l.push(i)):(-1!==s.indexOf("price_asc")&&(i="price_asc",l.push(i)),-1!==s.indexOf("price_desc")&&(i="price_desc",l.push(i))),n)o=n,r=t,l.push(r),l.push(o);else{if(-1!==s.indexOf("category")){t="category";var f=s.split("category"),h=f[1].replace("+","");o=h,l.push(t),l.push(o)}if(-1!==s.indexOf("brand")){t="brand";var f=s.split("brand"),h=f[1].replace("+","");o=h,l.push(t),l.push(o)}}}else a=c,e&&(i=e,l.push(i)),n&&(o=n,r=t,l.push(r),l.push(o));var p="";p=d;var v=l.length;$(l).each(function(e,n){v-1>e&&(p+=n.toLowerCase()+"+"),e===v-1&&(p+=n.toLowerCase())}),setUrl(p,a),urlDataController(i,o,r),getCategoryDesc(o,r)}function setUrl(e,n){n?window.location.href=n+e:window.location.hash=e}function urlDataController(e,n,t){if(e&&void 0===n&&void 0===n){if("price_asc"===e){var i=returnSortedPriceLow();i.done(function(e){render(e)}).fail(function(){})}if("price_desc"===e){var i=returnSortedPriceHigh();i.done(function(e){render(e)}).fail(function(){})}}if(void 0===e&&n&&t){if("category"===t){var i=returnSortedCat(n);i.done(function(e){render(e)}).fail(function(){})}if("brand"===t){var i=returnSortedBrand(n);i.done(function(e){render(e)}).fail(function(){})}}if(e&&n&&t){var i=returnSortedMultiple(e,n,t);i.done(function(e){render(e)}).fail(function(){})}}function returnSortedMultiple(e,n,t){function i(){var n=$.Deferred();if(e){if("price_asc"===e){var t=returnSortedPriceLow();t.then(function(e){n.resolve(e)})}if("price_desc"===e){var t=returnSortedPriceHigh();t.then(function(e){n.resolve(e)})}}else n.reject("first rejected");return n}function o(){var e=$.Deferred(),o=i();return o.then(function(i){if(i)if(n){var o=n.toLowerCase();if("brand"===t){var r=returnSortedBrand(o,i);r.then(function(n){e.resolve(n)})}if("category"===t){var r=returnSortedCat(o,i);r.then(function(n){e.resolve(n)})}}else e.reject("rejected - no param",i);if(!i&&n){var o=n.toLowerCase();if("brand"===t){var r=returnSortedBrand(o);r.then(function(n){e.resolve(n)})}if("category"===t){var r=returnSortedCat(o);r.then(function(n){e.resolve(n)})}}else e.reject("rejected !products && param")}),e}var r=$.Deferred();return $.when(o()).then(function(e){r.resolve(e)}),r}function returnSortedCat(e,n){function t(){var t=e.toLowerCase();$(n).each(function(e,n){var o=n.categories,r=[];$(o).each(function(e,n){r.push(n.toLowerCase())}),-1!==r.indexOf(t)&&i.push(n)}),o.resolve(i)}var i=[],o=$.Deferred();if(n)t();else{var r=productsSupplyer();r.then(function(n){var t=e.toLowerCase();$(n).each(function(e,n){var o=n.categories,r=[];$(o).each(function(e,n){r.push(n.toLowerCase())}),-1!==r.indexOf(t)&&i.push(n)}),o.resolve(i)})}return o}function returnSortedBrand(e,n){function t(){var t=e.toLowerCase();$(n).each(function(e,n){var o=n.tags,r=[];$(o).each(function(e,n){r.push(n.toLowerCase())}),-1!==r.indexOf(t)&&i.push(n)}),o.resolve(i)}var i=[],o=$.Deferred();if(n)t();else{var r=productsSupplyer();r.then(function(n){var t=e.toLowerCase();$(n).each(function(e,n){var o=n.tags,r=[];$(o).each(function(e,n){r.push(n.toLowerCase())}),-1!==r.indexOf(t)&&i.push(n)}),o.resolve(i)})}return o}function returnSortedPriceLow(){var e=productsSupplyer(),n=$.Deferred();return e.then(function(e){function t(e,n){return e.price-n.price}var i=[],o=[];$(e).each(function(e,n){var t={price:parseInt(n.regular_price),element:n};i.push(t)});var r=i.sort(t);$(r).each(function(e,n){o.push(n.element)}),n.resolve(o)}),n}function returnSortedPriceHigh(){var e=productsSupplyer(),n=$.Deferred();return e.then(function(e){function t(e,n){return e.price-n.price}var i=[],o=[];$(e).each(function(e,n){var t={price:parseInt(n.regular_price),element:n};i.push(t)});var r=i.sort(t).reverse();$(r).each(function(e,n){o.push(n.element)}),n.resolve(o)}),n}function productsSupplyer(){function e(e){try{var n=window[e],t="__storage_test__";return n.setItem(t,t),n.removeItem(t),!0}catch(i){return!1}}function n(e){m=e}function t(){var e=m;return e}function i(e){g=e}function o(){var e;-1!==h?(e=[],C={type:"all",param:"null"}):(-1!==u&&(e=c.split("/"),C={type:"type",param:e[4]}),-1!==f&&(e=c.split("/"),C={type:"brand",param:e[4]}),-1!==p&&(e=[],C={type:"all",param:"null"}))}function r(){return C}function a(){var e=$("body").find(".products-container"),a=$(e).data("page"),c=$(e).data("maxpages");$(e).data("cat"),$(e).data("tag");o(),i(c),n(!a||a>c?1:a);var d=(t(),r());w=d.type+"_"+d.param,b&&(v=localStorage,y=JSON.parse(v.getItem(w)),timeStamp=JSON.parse(v.getItem("cachetime")),timeWindow=(new Date).setTime(timeStamp+9e5),now=(new Date).getTime(),y&&now<timeWindow?l.resolve(y):s())}function s(){var e,n=r(),t=n.type;"type"===t&&(e="?action=sinus_type"),"brand"===t&&(e="?action=sinus_brand"),"all"===t&&(e="?action=sinus_products");var i={offset:0,limit:-1,param:n.param},o=JSON.stringify(i);$.ajax({url:site.ajax_url+e,type:"POST",data:o,dataType:"json",success:function(e){console.log(e),y=e.products,v.setItem(w,JSON.stringify(y));var n=(new Date).getTime();v.setItem("cachetime",JSON.stringify(n)),l.resolve(y)},error:function(e){console.log(e)}})}var c=window.location.href,d=window.location.hash,l=$.Deferred(),u=c.indexOf("/type/"),f=c.indexOf("/brands/"),h=d.indexOf("#s="),p=c.indexOf("/products/");if(-1!==u||-1!==f||-1!==h||-1!==p){var v,y,m,g,w,b=e("localStorage"),C=($("body").find(".product-list-grid"),{});return tags={brands:[],categories:[]},a(),l}}function render(e){function n(){loopDef=$.Deferred();var n=1,t='<div class="page products page-1 hidden">';return t+='<ul class="products">',$(e).each(function(e,i){var o=e+1,a=setTemplate(i);a.then(function(e){t+=e}),$(i.tags).each(function(e,n){tags.brands.push(n)}),$(i.categories).each(function(e,n){tags.categories.push(n)}),o%24===0&&r>e&&(n++,t+="</ul>",t+="</div>",t+='<div class="page products page-'+n+' hidden">',t+='<ul class="products">')}),t+="</ul>",t+="</div>",loopDef.resolve(t),loopDef}if(!(e.length>0))return void show404("search");show404("remove");var t=$("body").find(".product-list-grid"),i=$("body").find(".spinner"),o=$("body").find(".page.products"),r=e.length;$(i).hasClass("hidden")||$(i).addClass("hidden"),o&&$(o).each(function(e,n){$(n).remove()});var a=n();a.then(function(e){$(t).append(e),sortTags(tags),scrollController(),setMenuHeight();var n=$("body").find(".page.page-1");$(n).removeClass("hidden"),setTimeout(function(){new gridCartController,new modalController,sortPriceController(),sortStockController()},700)})}function setTemplate(e){function n(){0===e.stock_quantity&&(t='<div class="in-stock-icon"><span>PÅ LAGER: <i class="fa fa-minus-square"></i></span></div>',i="stock-false"),e.stock_quantity>0&&(t='<div class="in-stock-icon"><span>PÅ LAGER: <i class="fa fa-check-square"></i></span></div>',i="stock-true");var n=e.description,r=n.replace(/<(?:.|\n)*?>/gm,""),a='<li class="product '+i+'" itemscope itemtype="http://schema.org/Product" data-singleid="'+e.id+'">';a+='<div class="click-area"></div>',a+=t,a+='<img src="'+e.featured_src+'" alt="'+e.title+' product image produkt billede Sinus-store Copenhagen København Denmark" />',a+='<div class="product-title" itemprop="name"><h3>'+e.title+"</h3></div>",a+='<div class="product-price">'+e.price_html+'<div class="add-button" data-href="'+e.id+'" data-title="'+e.title+'"><svg version="1.1" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve"><line class="svg-line" fill="none" stroke="#007c96" stroke-width="10" stroke-miterlimit="10" x1="30" y1="6" x2="30" y2="54"/><line class="svg-line" fill="none" stroke="#007c96" stroke-width="10" stroke-miterlimit="10" x1="6" y1="30" x2="54" y2="30"/></svg><span class="add-info">Tilføj til kurv</span></div></div>',a+='<div class="sinus-product-info"><div class="short-desc" itemprop="description"><p>'+r.split(" ").splice(0,40).join(" ")+'... </p><i class="fa fa-chevron-circle-up"></i></div></div>',a+="</li>",o.resolve(a)}var t,i,o=$.Deferred();return n(),o}function sortTags(e){var n,t,i=$("body").find(".menu-left"),o=$(i).find(".categories"),r=$(i).find(".brands"),a=_.uniq(e.categories),s=_.uniq(e.brands),c=$(o).find("p"),d=$(r).find("p");0===c.length&&0===d.length&&($(a).each(function(e,t){n='<p data-cat="'+t+'"><i class="fa fa-search-plus"></i>'+t+"</p>",$(o).append(n)}),$(s).each(function(e,n){t='<p data-brand="'+n+'"><i class="fa fa-search-plus"></i>'+n+"</p>",$(r).append(t)}),setTimeout(function(){sortController()},1500))}function sortController(){var e=$("body").find(".menu-left"),n=$(e).find(".categories"),t=$(e).find(".brands"),i=$(n).find("p"),o=$(t).find("p"),r=($("body").find("li.product"),$("body").find(".page.products"));window.location.href;$(i).each(function(e,n){var t=$(n).data("cat");$(n).on("click",function(){$(r).each(function(e,n){var t=50*e;$(n).velocity({opacity:0},{duration:500,delay:t,display:"none",easing:[.24,.63,.5,.99]}),setTimeout(function(){$(n).detach()},600+t)});var e="category",n=null;sortUrl(n,t,e)})}),$(o).each(function(e,n){var t=$(n).data("brand");$(n).on("click",function(){$(r).each(function(e,n){var t=50*e;$(n).velocity({opacity:0},{duration:500,delay:t,display:"none",easing:[.24,.63,.5,.99]}),setTimeout(function(){$(n).detach()},600+t)});var e="brand",n=null;sortUrl(n,t,e)})})}function sortStockController(){var e=$(".product-list-grid").find(".stock-true"),n=$(".product-list-grid").find(".stock-false"),t=$("body").find("input[type=checkbox].instock"),i=$("body").find("input[type=checkbox].outofstock");$(t).on("change",function(){this.checked===!1&&$(e).each(function(e,n){var t=50*e;$(n).velocity({opacity:0},{duration:300,delay:t,display:"none",easing:[.24,.63,.5,.99]})}),this.checked===!0&&$(e).each(function(e,n){var t=50*e;$(n).velocity({opacity:1},{duration:300,delay:t,display:"block",easing:[.24,.63,.5,.99]})})}),$(i).on("change",function(){this.checked===!1&&$(n).each(function(e,n){var t=50*e;$(n).velocity({opacity:0},{duration:300,delay:t,display:"none",easing:[.24,.63,.5,.99]})}),this.checked===!0&&$(n).each(function(e,n){var t=50*e;$(n).velocity({opacity:1},{duration:300,delay:t,display:"block",easing:[.24,.63,.5,.99]})})})}function sortPriceController(e){function n(e){direction=e}var t=$(".menu-left").find(".sort-links > .price-sorter");t&&$(t).on("click",function(){function t(e){setTimeout(function(){n(e)},1500)}if(e)i=e,n(e);else var i="asc";if("asc"===i){t("desc");var o="price_asc";sortUrl(o)}if("desc"===i){t("asc");var o="price_desc";sortUrl(o)}})}function scrollController(){function e(){var e=0;!n[0]||e>0||($(n[0]).removeClass("hidden"),e++,setTimeout(function(){scrollController()},1e3))}var n=$("body").find(".page.products.hidden"),t=$("body").find(".site-content"),i=($(t).height(),$(window).height());n&&$(window).on("scroll",function(){var n=$(document).scrollTop(),o=$(t).height();n>=o-i-700&&window.requestAnimationFrame(function(){e()})})}function validateEmail(e){var n=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return n.test(e)}function validateInput(e){var n=/^[\u00C0-\u1FFF\u2C00-\uD7FF\w&.,\- ]+$/;return n.test(e)}function validateNumber(e){var n=/^(?=.*[0-9])[+()0-9]+$/;return n.test(e)}function shopMsg(e,n){function t(){$(i).velocity({opacity:[1,0],top:[150,300],"z-index":[999999999998,999999999998]},{duration:400,delay:0,easing:"easeInOutSine"}),$(i).velocity({opacity:[0,1],top:[300,150],"z-index":[999999999998,99999999998]},{duration:400,delay:1400,easing:"easeInOutSine"})}var i=$("body").find(".atc-modal");if(n)var n=n;else var n="<span>- blev tilføjet til kurven.</span>";var o="<h3>"+e+"</h3>"+n;$(i).append(o),setTimeout(function(){t()},100),setTimeout(function(){$(i).html(""),$(i).css({"z-index":-1e3})},2500)}function gridCartController(){var e=$("body").find(".add-button"),n=$("body").find(".cart-contents");$(e).each(function(e,t){var i=$(this).attr("data-href"),o=$(this).attr("data-title");$(this).on("click",function(e){e.preventDefault();var t=$("body").find(".cart-icon h5"),r=parseInt($("body").find(".cart-icon h5").text()),a=site.ajax_url+"?action=sinus_add",s={product_id:i};data=JSON.stringify(s),$.ajax({url:a,type:"POST",data:data,dataType:"html",success:function(e){var i=r+1;t.html(i),$(n).html(e),shopMsg(o)},error:function(e){console.log("error -",e)}})})})}function setMenuHeight(){setTimeout(function(){var e=$("body").find(".main-menu"),n=($("body").find(".site-content"),$(".site-content").height());$(e).css({height:n-325+"px"})},1e3)}jQuery(document).on("ready",function(){$=jQuery,new CartController,new MenuController,new removeFromCartController,new reserveFormController,new scrollHeaderController,new embedVidController,urlListener(),searchFormController(),menuLeftController(),thumbController(),trigScrollIndicator(),readMore(),pageCartController(),$("form :input").focus(function(){$("label[for='"+this.id+"']").addClass("focus")}).blur(function(){$("label").removeClass("focus")})});var documentHeight,cats=[],modalController=function(){function e(e){$(l).html(e),setTimeout(function(){new embedVidController,gridCartController(),n(),thumbController(),r(),s()},100)}function n(){$(modalClose).on("click",function(){a()})}function t(e){var n=$.Deferred(),e=e;url=site.ajax_url+"?action=sinus_getsinglehtml",dataObject={id:e};var t=JSON.stringify(dataObject);return $.ajax({url:url,type:"POST",data:t,success:function(e){n.resolve(e)},error:function(e){n.reject(e)}}),n}function i(){$(modalOverlay).removeClass("hidden"),$(spinner).removeClass("hidden")}function o(){$(modalOverlay).addClass("hidden"),$(spinner).addClass("hidden")}function r(){$(d).removeClass("hidden")}function a(){$(d).addClass("hidden"),setTimeout(function(){$(modalScroll).removeClass("hidden")},500)}function s(){var e=$(l).find(".single-product-container");$(e).on("scroll",function(e){var n=$(e.target).scrollTop();n>400&&$(modalScroll).addClass("hidden")})}var c=$("body").find("li.product"),d=$("body").find(".product-modal"),l=$(d).find(".modal-content");modalOverlay=$("body").find(".product-modal-overlay"),modalClose=$(d).find(".modal-close-btn"),spinner=$("body").find(".spinner"),modalScroll=$(d).find(".modal-scroll-indicator"),$(c).each(function(n,r){var a=$(r).find(".click-area");$(a).on("click",function(n){var a=$(r).data("singleid");n.preventDefault(),i();var s=t(a);s.done(function(n){o(),e(n,d)}).fail(function(){})})})},fpBackgroundController=function(){function e(){a(1),$(d).velocity({opacity:1},{duration:500,delay:0,display:"block",easing:[.24,.63,.5,.99]});for(var e=2;7>e;e++){var n=$("<img />").attr("src",site.theme_path+"/img/bg/bg"+e+".png").attr("class","bg-"+e);$(c).append(n)}setTimeout(t,8e3)}function t(){var e=r(),n=e+1;n>6&&(n=1);var s=$(c).find("img.bg-"+e),d=$(c).find("img.bg-"+n);i(d),o(s),a(n),setTimeout(t,4e3)}function i(e){$(e).velocity({opacity:1},{duration:1e3,delay:0,display:"block",easing:[.24,.63,.5,.99]})}function o(e){$(e).velocity({opacity:0},{duration:1e3,delay:0,display:"block",easing:[.24,.63,.5,.99]})}function r(){return n=s,n}function a(e){s=e}var s,c=$("body").find(".bg-container"),d=$(c).find("img"),l=$(window).width(),u=Math.round(l/16*9)+1;c&&($(c).css({height:u+"px"}),$(window).on("resize",function(){l=$(window).width(),u=Math.round(l/16*9)+1,$(c).css({height:u+"px"})}),d&&d[0]&&(d[0].complete?e():d.load(e)))},fpVideoController=function(){function e(){i.addEventListener("canplaythrough",n),i.addEventListener("ended",t)}function n(){$(o).addClass("hidden"),$(r).velocity({height:d},{duration:700,delay:0,easing:[.24,.63,.5,.99]}),$(a).velocity({opacity:1},{duration:700,delay:0,display:"block",easing:[.24,.63,.5,.99]}),$(s).velocity({top:d+30},{duration:700,delay:0,display:"block",easing:[.24,.63,.5,.99]}),setTimeout(function(){i.paused&&i.play()},700)}function t(){$(a).velocity({opacity:0},{duration:300,delay:0,display:"block",easing:[.24,.63,.5,.99]}),$(r).velocity({height:60},{duration:1e3,delay:400,easing:[.24,.63,.5,.99]}),$(s).velocity({top:85},{duration:1e3,delay:400,display:"block",easing:[.24,.63,.5,.99]}),scrollTo(0)}var i=document.getElementById("frontpage-video");if(i){var o=$("body").find(".spinner"),r=$("body").find(".front-video-container"),a=$(r).find("#frontpage-video"),s=$("body").find(".moving-content"),c=$(window).width(),d=c/100*80/16*9;e()}},scrollHeaderController=function(){function e(){n=$(window).scrollTop(),n>500&&$(t).addClass("hidden"),500>n&&$(t).removeClass("hidden")}var n,t=$("body").find(".header-link-row");$(window).width();$(window).on("scroll",e)},reserveFormController=function(){function e(){$(r).on("blur",function(){var e=$(this).val();if(0===e.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==e.length){var n=validateEmail(e);n||$(this).hasClass("error")||$(this).addClass("error"),n&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function n(){$(a).on("blur",function(){var e=$(this).val();if(0===e.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==e.length){var n=validateInput(e);n||$(this).hasClass("error")||$(this).addClass("error"),n&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function t(){$(s).on("blur",function(){var e=$(this).val();if(0===e.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==e.length){var n=validateNumber(e);n||$(this).hasClass("error")||$(this).addClass("error"),n&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function i(){function e(){return dataObject.customer_html="<h4>Navn:</h4><h2>"+inputArray[0].value+"</h2>",dataObject.customer_html+="<h4>TLF:</h4><h2>"+inputArray[1].value+"</h2>",dataObject.customer_html+="<h4>EMAIL:</h4><h2>"+inputArray[2].value+"</h2>",dataObject.customer_email=inputArray[2].value,dataObject}function n(e){var n=JSON.stringify(e);$.ajax({url:site.ajax_url+"?action=reserve",type:"POST",data:n,success:function(e){var n=$.trim(e);"Success"===n&&t()},error:function(e){console.log(e)}})}function t(){$(o).velocity({opacity:[0,1]},{duration:300,delay:0,easing:[.24,.63,.5,.99],display:"none"}),$(validSuccess).velocity({opacity:[1,0]},{duration:300,delay:350,easing:[.24,.63,.5,.99],display:"block"}),setTimeout(function(){window.location.href=window.location.href},1e3)}$(c).on("click",function(t){t.preventDefault(),inputs=$(o).find("input"),validSuccess=$("body").find(".validation.success"),dataObject={},inputArray=[],$(inputs).each(function(e,n){if(!$(n).hasClass("error")&&0!==$(n).val().length){var t={name:n.name,value:$(n).val()};inputArray.push(t)}});var i=e();n(i)})}var o=$("body").find("form.reserve"),r=$(o).find("input[type=email]"),a=$(o).find("input[type=text].name"),s=$(o).find("input[type=text].phone"),c=$(o).find(".submit-btn > a");t(),e(),n(),i()},singleProductHeightController=function(){function e(){var e=$(".product-content").height(),n=$(".main-image img").height();e&&e>n&&($(".main-image").css({height:e+"px"}),setMenuHeight())}var n=$(".main-image img");$("body").find("iframe");n&&n[0]&&(n[0].complete?e():n.load(e))},embedVidController=function(){function e(){var e=$(n).attr("data-href");if(-1!==e.indexOf("="))var t=e.split("="),i=t[1];else{var t=e.split("/");i=t[3]}var o=$(window).width(),r=o/100*90/16*9,a='<iframe width="'+o+'" height="'+r+'" src="https://www.youtube.com/embed/'+i+'?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>';$(n).html(a)}var n=$("body").find(".youtube-frame");n.length>0&&e()},removeFromCartController=function(){var e=$("body").find(".cart-contents"),n=$(e).find(".remove-icon");$(n).each(function(n,t){var i=$(this).attr("data-id"),o=$(this).siblings(".elem-qty-total"),r=parseInt($(o).attr("data-qty"));$(this).on("click",function(){var n=$("body").find(".cart-icon h5"),t=parseInt($("body").find(".cart-icon h5").text()),o=site.ajax_url+"?action=sinus_remove",a={product_id:i,quantity:r};data=JSON.stringify(a),$.ajax({url:o,type:"POST",data:data,dataType:"html",success:function(i){var o=t-r;n.html(o),$(e).html(i),window.location.href=window.location.href},error:function(e){console.log("error -",e)}})})})},MenuController=function(){function e(){$(a).hasClass("hidden")?($(a).css({display:"block"}),setTimeout(function(){$(a).removeClass("hidden"),$(this).addClass("open"),scrollTo("0px"),i(),f>767&&n()},100)):($(a).addClass("hidden"),$(this).removeClass("open"),f>767&&t(),setTimeout(function(){$(a).css({display:"none"},700)}))}function n(){var e=$(l).css("right"),n=$(d).css("right"),t=$(u).css("right"),i=parseInt(e.replace("px","")),o=parseInt(n.replace("px","")),r=parseInt(t.replace("px",""));$(l).velocity({right:i+230+"px"},{duration:400,delay:100,easing:[.24,.63,.5,.99]}),$(d).velocity({right:o+230+"px"},{duration:400,delay:0,easing:[.24,.63,.5,.99]}),$(u).velocity({right:r+230+"px"},{duration:400,delay:150,easing:[.24,.63,.5,.99]})}function t(){$(l).velocity({right:90},{duration:300,delay:200,easing:[.24,.63,.5,.99]}),$(d).velocity({right:165},{duration:300,delay:300,easing:[.24,.63,.5,.99]}),$(u).velocity({right:80},{duration:300,delay:250,easing:[.24,.63,.5,.99]})}function i(){$(s).on("click",function(e){e.preventDefault();var n=$(this).find("a"),t=$(n).attr("href");$(s).each(function(e,n){var t=20*e;$(n).velocity({opacity:[0,1]},{duration:100,delay:t,easing:"easeInOutSine"})}),$(c).each(function(e,n){var t=30*e;$(n).velocity({opacity:[0,1]},{duration:100,delay:t,easing:"easeInOutSine"})}),setTimeout(o(t),1200)})}function o(e){setTimeout(function(){$(r).removeClass("open"),$(a).addClass("hidden"),t()},1e3),setTimeout(function(){window.location.href=e},1300)}var r=$("body").find(".menu-icon"),a=$("body").find(".main-menu"),s=$(a).find("li"),c=$(a).find("h3"),d=$("body").find(".search-form"),l=$("body").find(".cart-icon"),u=$("body").find(".cart-modal.cart-contents"),f=$(window).width();setMenuHeight(),$(r).on("click",e)},CartController=function(){var e=$("body").find(".cart-icon"),n=$("body").find(".header-link-row"),t=$("body").find(".cart-modal.cart-contents.hidden");width=$(window).width(),$(e).on("click",function(e){width>768?(n.hasClass("hidden")?$(t).css({top:"65px"}):$(t).css({top:"95px"}),$(t).toggleClass("hidden")):window.location.href=site.site_url+"/kurv/"})};