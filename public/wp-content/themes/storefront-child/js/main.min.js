function scrollTo(t){$("html, body").animate({scrollTop:t},700)}function productsController(){var t=productsSupplyer();t.then(function(t){render(t)})}function productsSupplyer(){function t(t){try{var n=window[t],e="__storage_test__";return n.setItem(e,e),n.removeItem(e),!0}catch(i){return!1}}function n(t){f=t}function e(){var t=f;return t}function i(t){p=t}function o(){var t;-1!==d.indexOf("/type/")&&(t=d.split("/"),y={type:"type",param:t[4]}),-1!==d.indexOf("/brands/")&&(t=d.split("/"),y={type:"brand",param:t[4]})}function a(){return y}function r(){var t=$("body").find(".products-container"),r=$(t).data("page"),d=$(t).data("maxpages");$(t).data("cat"),$(t).data("tag");o(),i(d),n(!r||r>d?1:r);var f=(e(),a());h=f.type+"_"+f.param,v?(l=localStorage,u=JSON.parse(l.getItem(h)),u?c.resolve(u):s()):console.log("no localStorage for us")}function s(){var t,n=a(),e=n.type;"type"===e&&(t="?action=sinus_type"),"brand"===e&&(t="?action=sinus_brand");var i={offset:0,limit:-1,param:n.param},o=JSON.stringify(i);$.ajax({url:site.ajax_url+t,type:"POST",data:o,dataType:"json",success:function(t){u=t.products,l.setItem(h,JSON.stringify(u)),c.resolve(u)},error:function(t){console.log(t)}})}var d=window.location.href,c=$.Deferred();if(-1===d.indexOf("/type/")&&-1===d.indexOf("/brands/"))return void console.log("Exited from productsModel");var l,u,f,p,h,v=t("localStorage"),y=($("body").find(".product-list-grid"),{});return tags={brands:[],categories:[]},r(),c}function render(t){var n=$("body").find(".product-list-grid"),e=$("body").find(".spinner"),i=$("body").find(".page.products"),o=t.length;$(e).hasClass("hidden")||$(e).addClass("hidden"),i&&$(i).each(function(t,n){$(n).remove()});var a=1,r='<div class="page products page-1 hidden">';r+='<ul class="products">',$(t).each(function(t,n){var e=t+1;$(n.tags).each(function(t,n){tags.brands.push(n)}),$(n.categories).each(function(t,n){tags.categories.push(n)});var i=setTemplate(n);r+=i,e%24===0&&o>t&&(a++,r+="</ul>",r+="</div>",r+='<div class="page products page-'+a+' hidden">',r+='<ul class="products">')}),r+="</ul>",r+="</div>",$(n).append(r),sortTags(tags),scrollController();var s=$("body").find(".page.page-1");$(s).removeClass("hidden"),setTimeout(function(){new gridCartController},1500)}function sortTags(t){var n,e,i=$("body").find(".menu-left"),o=$(i).find(".categories"),a=$(i).find(".brands"),r=_.uniq(t.categories),s=_.uniq(t.brands),d=$(o).find("p"),c=$(a).find("p");0===d.length&&0===c.length&&($(r).each(function(t,e){n='<p data-cat="'+e+'"><i class="fa fa-search-plus"></i>'+e+"</p>",$(o).append(n)}),$(s).each(function(t,n){e='<p data-brand="'+n+'"><i class="fa fa-search-plus"></i>'+n+"</p>",$(a).append(e)}),setTimeout(function(){sortController()},1500))}function sortController(){var t=$("body").find(".menu-left"),n=$(t).find(".categories"),e=$(t).find(".brands"),i=$(n).find("p"),o=$(e).find("p"),a=($("body").find("li.product"),$("body").find(".page.products"));$(i).each(function(t,n){var e=$(n).data("cat");$(n).on("click",function(){$(a).each(function(t,n){var e=50*t;$(n).velocity({opacity:0},{duration:500,delay:e,display:"none",easing:[.24,.63,.5,.99]}),setTimeout(function(){$(n).detach()},600+e)}),returnSortedCat(e)})}),$(o).each(function(t,n){var e=$(n).data("brand");$(n).on("click",function(){$(a).each(function(t,n){var e=50*t;$(n).velocity({opacity:0},{duration:500,delay:e,display:"none",easing:[.24,.63,.5,.99]}),setTimeout(function(){$(n).detach()},600+e)}),returnSortedBrand(e)})})}function returnSortedCat(t){var n=productsSupplyer(),e=[];n.then(function(n){$(n).each(function(n,i){var o=i.categories;-1!==o.indexOf(t)&&e.push(i)}),window.requestAnimationFrame(function(){scrollTo(0)}),window.requestAnimationFrame(function(){render(e)})})}function returnSortedBrand(t){var n=productsSupplyer(),e=[];n.then(function(n){$(n).each(function(n,i){var o=i.tags;-1!==o.indexOf(t)&&e.push(i)}),window.requestAnimationFrame(function(){scrollTo(0)}),window.requestAnimationFrame(function(){render(e)})})}function scrollController(){function t(){var t=0;!n[0]||t>0||($(n[0]).removeClass("hidden"),t++,setTimeout(function(){scrollController()},1e3))}var n=$("body").find(".page.products.hidden"),e=$("body").find(".site-content"),i=($(e).height(),$(window).height());n&&$(window).on("scroll",function(){var n=$(document).scrollTop(),o=$(e).height();n>=o-i-200&&window.requestAnimationFrame(function(){t()})})}function setTemplate(t){var n;n="false"===t.in_stock?'<div class="in-stock-icon"><span>PÅ LAGER: <i class="fa fa-minus-square"></span></div>':'<div class="in-stock-icon"><span>PÅ LAGER: <i class="fa fa-check-square"></i></span></div>';var e=t.description,i=e.split(" ").splice(0,25).join(" "),o='<li class="product" itemscope itemtype="http://schema.org/Product">'+n;return o+='<img src="'+t.featured_src+'" alt="'+t.title+' product image produktbillede Sinus-store Copenhagen København Denmark" />',o+='<div class="product-price">'+t.price_html+'<div class="add-button" data-href="'+t.id+'" data-title="'+t.title+'"><svg version="1.1" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve"><line class="svg-line" fill="none" stroke="#007c96" stroke-width="10" stroke-miterlimit="10" x1="30" y1="6" x2="30" y2="54"/><line class="svg-line" fill="none" stroke="#007c96" stroke-width="10" stroke-miterlimit="10" x1="6" y1="30" x2="54" y2="30"/></svg><span class="add-info">Tilføj til kurv</span></div></div>',o+='<div class="sinus-product-info"><div class="product-title" itemprop="name"><h3>'+t.title+'</h3></div><div class="short-desc" itemprop="description">'+i+"</div></div>",o+="</li>"}function validateEmail(t){var n=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return n.test(t)}function validateInput(t){var n=/^[\u00C0-\u1FFF\u2C00-\uD7FF\w&.,\- ]+$/;return n.test(t)}function validateNumber(t){var n=/^(?=.*[0-9])[+()0-9]+$/;return n.test(t)}function shopMsg(t,n){function e(){$(i).velocity({opacity:[1,0],top:[150,300],"z-index":[5e3,5e3]},{duration:400,delay:0,easing:"easeInOutSine"}),$(i).velocity({opacity:[0,1],top:[300,150],"z-index":5e3},{duration:400,delay:1400,easing:"easeInOutSine"})}var i=$("body").find(".atc-modal");if(n)var n=n;else var n="<span>- blev tilføjet til kurven.</span>";var o="<h3>"+t+"</h3>"+n;$(i).append(o),setTimeout(function(){e()},100),setTimeout(function(){$(i).html(""),$(i).css({"z-index":-1e3})},2e3)}function setMenuHeight(){setTimeout(function(){var t=$("body").find(".main-menu"),n=($("body").find(".site-content"),$(".site-content").height());$(t).css({height:n-325+"px"})},1e3)}jQuery(document).on("ready",function(){$=jQuery,new CartController,new MenuController,new embedVidController,new productTextController,new singleProductHeightController,new removeFromCartController,new reserveFormController,new scrollHeaderController,new fpVideoController,new fpBackgroundController,productsController(),$("form :input").focus(function(){$("label[for='"+this.id+"']").addClass("focus")}).blur(function(){$("label").removeClass("focus")})});var documentHeight,fpBackgroundController=function(){function t(){r(1),$(c).velocity({opacity:1},{duration:500,delay:0,display:"block",easing:[.24,.63,.5,.99]});for(var t=2;7>t;t++){var n=$("<img />").attr("src",site.theme_path+"/img/bg/bg"+t+".png").attr("class","bg-"+t);$(d).append(n)}setTimeout(e,8e3)}function e(){var t=a(),n=t+1;n>6&&(n=1);var s=$(d).find("img.bg-"+t),c=$(d).find("img.bg-"+n);window.requestAnimationFrame(i(c)),window.requestAnimationFrame(o(s)),r(n),setTimeout(e,4e3)}function i(t){$(t).velocity({opacity:1},{duration:1e3,delay:0,display:"block",easing:[.24,.63,.5,.99]})}function o(t){$(t).velocity({opacity:0},{duration:1e3,delay:0,display:"block",easing:[.24,.63,.5,.99]})}function a(){return n=s,n}function r(t){s=t}var s,d=$("body").find(".bg-container"),c=$(d).find("img");d&&c&&c[0]&&(c[0].complete?t():c.load(t))},fpVideoController=function(){function t(){i.addEventListener("canplaythrough",n),i.addEventListener("ended",e)}function n(){$(o).addClass("hidden"),$(a).velocity({height:c},{duration:700,delay:0,easing:[.24,.63,.5,.99]}),$(r).velocity({opacity:1},{duration:700,delay:0,display:"block",easing:[.24,.63,.5,.99]}),$(s).velocity({top:c+30},{duration:700,delay:0,display:"block",easing:[.24,.63,.5,.99]}),setTimeout(function(){i.paused&&i.play()},700)}function e(){$(r).velocity({opacity:0},{duration:300,delay:0,display:"block",easing:[.24,.63,.5,.99]}),$(a).velocity({height:60},{duration:1e3,delay:400,easing:[.24,.63,.5,.99]}),$(s).velocity({top:90},{duration:1e3,delay:400,display:"block",easing:[.24,.63,.5,.99]}),scrollTo(0)}var i=document.getElementById("frontpage-video");if(i){var o=$("body").find(".spinner"),a=$("body").find(".front-video-container"),r=$(a).find("#frontpage-video"),s=$("body").find(".moving-content"),d=$(window).width(),c=d/100*80/16*9;t()}},scrollHeaderController=function(){function t(){n=$(window).scrollTop(),n>500&&$(e).addClass("hidden"),500>n&&$(e).removeClass("hidden")}var n,e=$("body").find(".header-link-row");$(window).width();$(window).on("scroll",t)},reserveFormController=function(){function t(){$(a).on("blur",function(){var t=$(this).val();if(0===t.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==t.length){var n=validateEmail(t);n||$(this).hasClass("error")||$(this).addClass("error"),n&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function n(){$(r).on("blur",function(){var t=$(this).val();if(0===t.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==t.length){var n=validateInput(t);n||$(this).hasClass("error")||$(this).addClass("error"),n&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function e(){$(s).on("blur",function(){var t=$(this).val();if(0===t.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==t.length){var n=validateNumber(t);n||$(this).hasClass("error")||$(this).addClass("error"),n&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function i(){function t(){return dataObject.customer_html="<h4>Navn:</h4><h2>"+inputArray[0].value+"</h2>",dataObject.customer_html+="<h4>TLF:</h4><h2>"+inputArray[1].value+"</h2>",dataObject.customer_html+="<h4>EMAIL:</h4><h2>"+inputArray[2].value+"</h2>",dataObject.customer_email=inputArray[2].value,dataObject}function n(t){var n=JSON.stringify(t);$.ajax({url:site.ajax_url+"?action=reserve",type:"POST",data:n,success:function(t){var n=$.trim(t);console.log(n),"Success"===n&&e()},error:function(t){console.log(t)}})}function e(){$(o).velocity({opacity:[0,1]},{duration:300,delay:0,easing:[.24,.63,.5,.99],display:"none"}),$(validSuccess).velocity({opacity:[1,0]},{duration:300,delay:350,easing:[.24,.63,.5,.99],display:"block"}),setTimeout(function(){window.location.href=window.location.href},1e3)}$(d).on("click",function(e){e.preventDefault(),inputs=$(o).find("input"),validSuccess=$("body").find(".validation.success"),dataObject={},inputArray=[],$(inputs).each(function(t,n){if(!$(n).hasClass("error")&&0!==$(n).val().length){var e={name:n.name,value:$(n).val()};inputArray.push(e)}});var i=t();n(i)})}var o=$("body").find("form.reserve"),a=$(o).find("input[type=email]"),r=$(o).find("input[type=text].name"),s=$(o).find("input[type=text].phone"),d=$(o).find(".submit-btn > a");e(),t(),n(),i()},productTextController=function(){function t(){$(n).toggleClass("off"),$(e).toggleClass("off"),$(i).toggleClass("off")}var n=$("body").find(".text-icon"),e=$("body").find(".product-left"),i=$("body").find(".product-right");$(n).on("click",function(){t()}),setTimeout(t,800)},singleProductHeightController=function(){function t(){var t=$(".product-content").height(),n=$(".main-image img").height();t&&t>n&&($(".main-image").css({height:t+"px"}),setMenuHeight())}var n=$(".main-image img");$("body").find("iframe");n&&n[0]&&(n[0].complete?t():n.load(t))},embedVidController=function(){function t(){var t=$(n).attr("data-href");if(-1!==t.indexOf("="))var e=t.split("="),i=e[1];else{var e=t.split("/");i=e[3]}var o=$(window).width(),a=o/16*9,r='<iframe width="'+o+'" height="'+a+'" src="https://www.youtube.com/embed/'+i+'?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>';$(n).html(r)}var n=$("body").find(".youtube-frame");n.length>0&&t()},gridCartController=function(){var t=$("body").find(".add-button"),n=$("body").find(".cart-contents");$(t).each(function(t,e){var i=$(this).attr("data-href"),o=$(this).attr("data-title");$(this).on("click",function(t){t.preventDefault();var e=$("body").find(".cart-icon h5"),a=parseInt($("body").find(".cart-icon h5").text()),r=site.ajax_url+"?action=sinus_add",s={product_id:i};data=JSON.stringify(s),$.ajax({url:r,type:"POST",data:data,dataType:"html",success:function(t){var i=a+1;e.html(i),$(n).html(t),shopMsg(o),setTimeout(function(){window.location.href=window.location.href},1e3)},error:function(t){console.log("error -",t)}})})})},removeFromCartController=function(){var t=$("body").find(".cart-contents"),n=$(t).find(".remove-icon");$(n).each(function(n,e){var i=$(this).attr("data-id"),o=$(this).siblings(".elem-qty-total"),a=parseInt($(o).attr("data-qty"));$(this).on("click",function(){console.log(a,i);var n=$("body").find(".cart-icon h5"),e=parseInt($("body").find(".cart-icon h5").text()),o=site.ajax_url+"?action=sinus_remove",r={product_id:i,quantity:a};data=JSON.stringify(r),$.ajax({url:o,type:"POST",data:data,dataType:"html",success:function(i){var o=e-a;n.html(o),$(t).html(i),window.location.href=window.location.href},error:function(t){console.log("error -",t)}})})})},MenuController=function(){function t(){$(r).hasClass("hidden")?($(r).removeClass("hidden"),$(this).addClass("open"),scrollTo("0px"),n(),i()):($(r).addClass("hidden"),$(this).removeClass("open"),e())}function n(){var t=$(l).css("right"),n=$(c).css("right"),e=$(u).css("right"),i=parseInt(t.replace("px","")),o=parseInt(n.replace("px","")),a=parseInt(e.replace("px",""));$(l).velocity({right:i+230+"px"},{duration:400,delay:100,easing:[.24,.63,.5,.99]}),$(c).velocity({right:o+230+"px"},{duration:400,delay:0,easing:[.24,.63,.5,.99]}),$(u).velocity({right:a+230+"px"},{duration:400,delay:150,easing:[.24,.63,.5,.99]})}function e(){$(l).velocity({right:90},{duration:300,delay:200,easing:[.24,.63,.5,.99]}),$(c).velocity({right:165},{duration:300,delay:300,easing:[.24,.63,.5,.99]}),$(u).velocity({right:80},{duration:300,delay:250,easing:[.24,.63,.5,.99]})}function i(){$(s).on("click",function(t){t.preventDefault();var n=$(this).find("a"),e=$(n).attr("href");$(s).each(function(t,n){var e=20*t;$(n).velocity({opacity:[0,1]},{duration:100,delay:e,easing:"easeInOutSine"})}),$(d).each(function(t,n){var e=30*t;$(n).velocity({opacity:[0,1]},{duration:100,delay:e,easing:"easeInOutSine"})}),setTimeout(o(e),1200)})}function o(t){setTimeout(function(){$(a).removeClass("open"),$(r).addClass("hidden"),e()},1e3),setTimeout(function(){window.location.href=t},1300)}var a=$("body").find(".menu-icon"),r=$("body").find(".main-menu"),s=$(r).find("li"),d=$(r).find("h3"),c=$("body").find(".search-form"),l=$("body").find(".cart-icon"),u=$("body").find(".cart-modal.cart-contents");$(window).width();setMenuHeight(),$(a).on("click",t)},CartController=function(){var t=$("body").find(".cart-icon"),n=$("body").find(".cart-modal.cart-contents");$(t).on("click",function(t){$(n).toggleClass("hidden")})};
//# sourceMappingURL=main.min.js.map
