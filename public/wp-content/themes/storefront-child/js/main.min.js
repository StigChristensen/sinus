function scrollTo(e){$("html, body").animate({scrollTop:e},700)}function productsController(){var e=productsSupplyer();e.then(function(e){render(e)}),sortPriceController()}function productsSupplyer(){function e(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(i){return!1}}function t(e){f=e}function n(){var e=f;return e}function i(e){p=e}function r(){var e;-1!==c.indexOf("/type/")&&(e=c.split("/"),y={type:"type",param:e[4]}),-1!==c.indexOf("/brands/")&&(e=c.split("/"),y={type:"brand",param:e[4]})}function o(){return y}function a(){var e=$("body").find(".products-container"),a=$(e).data("page"),c=$(e).data("maxpages");$(e).data("cat"),$(e).data("tag");r(),i(c),t(!a||a>c?1:a);var f=(n(),o());h=f.type+"_"+f.param,v?(l=localStorage,u=JSON.parse(l.getItem(h)),u?d.resolve(u):s()):console.log("no localStorage for us")}function s(){var e,t=o(),n=t.type;"type"===n&&(e="?action=sinus_type"),"brand"===n&&(e="?action=sinus_brand");var i={offset:0,limit:-1,param:t.param},r=JSON.stringify(i);$.ajax({url:site.ajax_url+e,type:"POST",data:r,dataType:"json",success:function(e){u=e.products,l.setItem(h,JSON.stringify(u)),d.resolve(u)},error:function(e){console.log(e)}})}var c=window.location.href,d=$.Deferred();if(-1===c.indexOf("/type/")&&-1===c.indexOf("/brands/"))return void console.log("Exited from productsModel");var l,u,f,p,h,v=e("localStorage"),y=($("body").find(".product-list-grid"),{});return tags={brands:[],categories:[]},a(),d}function render(e){var t=$("body").find(".product-list-grid"),n=$("body").find(".spinner"),i=$("body").find(".page.products"),r=e.length;$(n).hasClass("hidden")||$(n).addClass("hidden"),i&&$(i).each(function(e,t){$(t).remove()});var o=1,a='<div class="page products page-1 hidden">';a+='<ul class="products">',$(e).each(function(e,t){var n=e+1;$(t.tags).each(function(e,t){tags.brands.push(t)}),$(t.categories).each(function(e,t){tags.categories.push(t)});var i=setTemplate(t);a+=i,n%24===0&&r>e&&(o++,a+="</ul>",a+="</div>",a+='<div class="page products page-'+o+' hidden">',a+='<ul class="products">')}),a+="</ul>",a+="</div>",$(t).append(a),sortTags(tags),scrollController(),setMenuHeight();var s=$("body").find(".page.page-1");$(s).removeClass("hidden"),setTimeout(function(){new gridCartController},1500)}function sortTags(e){var t,n,i=$("body").find(".menu-left"),r=$(i).find(".categories"),o=$(i).find(".brands"),a=_.uniq(e.categories),s=_.uniq(e.brands),c=$(r).find("p"),d=$(o).find("p");0===c.length&&0===d.length&&($(a).each(function(e,n){t='<p data-cat="'+n+'"><i class="fa fa-search-plus"></i>'+n+"</p>",$(r).append(t)}),$(s).each(function(e,t){n='<p data-brand="'+t+'"><i class="fa fa-search-plus"></i>'+t+"</p>",$(o).append(n)}),setTimeout(function(){sortController()},1500))}function sortController(){var e=$("body").find(".menu-left"),t=$(e).find(".categories"),n=$(e).find(".brands"),i=$(t).find("p"),r=$(n).find("p"),o=($("body").find("li.product"),$("body").find(".page.products"));$(i).each(function(e,t){var n=$(t).data("cat");$(t).on("click",function(){$(o).each(function(e,t){var n=50*e;$(t).velocity({opacity:0},{duration:500,delay:n,display:"none",easing:[.24,.63,.5,.99]}),setTimeout(function(){$(t).detach()},600+n)});var e=returnSortedCat(n);e.then(function(e){render(e)})})}),$(r).each(function(e,t){var n=$(t).data("brand");$(t).on("click",function(){$(o).each(function(e,t){var n=50*e;$(t).velocity({opacity:0},{duration:500,delay:n,display:"none",easing:[.24,.63,.5,.99]}),setTimeout(function(){$(t).detach()},600+n)});var e=returnSortedBrand(n);e.then(function(e){render(e)})})})}function returnSortedCat(e){var t=productsSupplyer(),n=[],i=$.Deferred();return t.then(function(t){$(t).each(function(t,i){var r=i.categories;-1!==r.indexOf(e)&&n.push(i)}),i.resolve(n)}),i}function returnSortedBrand(e){var t=productsSupplyer(),n=[],i=$.Deferred();return t.then(function(t){$(t).each(function(t,i){var r=i.tags;-1!==r.indexOf(e)&&n.push(i)}),i.resolve(n)}),i}function returnSortedPriceLow(){var e=productsSupplyer(),t=$.Deferred();return e.then(function(e){function n(e,t){return e.price-t.price}var i=[],r=[];$(e).each(function(e,t){var n={price:parseInt(t.regular_price),element:t};i.push(n)});var o=i.sort(n);$(o).each(function(e,t){r.push(t.element)}),t.resolve(r)}),t}function returnSortedPriceHigh(){var e=productsSupplyer(),t=$.Deferred();return e.then(function(e){function n(e,t){return e.price-t.price}var i=[],r=[];$(e).each(function(e,t){var n={price:parseInt(t.regular_price),element:t};i.push(n)});var o=i.sort(n).reverse();$(o).each(function(e,t){r.push(t.element)}),t.resolve(r)}),t}function sortPriceController(){function e(e){n=e}function t(){return n}var n="asc",i=$(".menu-left").find(".sort-links > .price-sorter");i&&$(i).on("click",function(){var n=t();if("asc"===n){var i=returnSortedPriceLow();e("desc"),i.then(function(e){render(e)})}if("desc"===n){var i=returnSortedPriceHigh();e("asc"),i.then(function(e){render(e)})}})}function scrollController(){function e(){var e=0;!t[0]||e>0||($(t[0]).removeClass("hidden"),e++,setTimeout(function(){scrollController()},1e3))}var t=$("body").find(".page.products.hidden"),n=$("body").find(".site-content"),i=($(n).height(),$(window).height());t&&$(window).on("scroll",function(){var t=$(document).scrollTop(),r=$(n).height();t>=r-i-200&&window.requestAnimationFrame(function(){e()})})}function setTemplate(e){var t;t="false"===e.in_stock?'<div class="in-stock-icon"><span>PÅ LAGER: <i class="fa fa-minus-square"></span></div>':'<div class="in-stock-icon"><span>PÅ LAGER: <i class="fa fa-check-square"></i></span></div>';var n=e.description,i=n.split(" ").splice(0,23).join(" "),r='<li class="product" itemscope itemtype="http://schema.org/Product">'+t;return r+='<img src="'+e.featured_src+'" alt="'+e.title+' product image produktbillede Sinus-store Copenhagen København Denmark" />',r+='<div class="product-price">'+e.price_html+'<div class="add-button" data-href="'+e.id+'" data-title="'+e.title+'"><svg version="1.1" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve"><line class="svg-line" fill="none" stroke="#007c96" stroke-width="10" stroke-miterlimit="10" x1="30" y1="6" x2="30" y2="54"/><line class="svg-line" fill="none" stroke="#007c96" stroke-width="10" stroke-miterlimit="10" x1="6" y1="30" x2="54" y2="30"/></svg><span class="add-info">Tilføj til kurv</span></div></div>',r+='<div class="sinus-product-info"><div class="product-title" itemprop="name"><h3>'+e.title+'</h3></div><div class="short-desc" itemprop="description">'+i+"</div></div>",r+="</li>"}function validateEmail(e){var t=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return t.test(e)}function validateInput(e){var t=/^[\u00C0-\u1FFF\u2C00-\uD7FF\w&.,\- ]+$/;return t.test(e)}function validateNumber(e){var t=/^(?=.*[0-9])[+()0-9]+$/;return t.test(e)}function shopMsg(e,t){function n(){$(i).velocity({opacity:[1,0],top:[150,300],"z-index":[5e3,5e3]},{duration:400,delay:0,easing:"easeInOutSine"}),$(i).velocity({opacity:[0,1],top:[300,150],"z-index":5e3},{duration:400,delay:1400,easing:"easeInOutSine"})}var i=$("body").find(".atc-modal");if(t)var t=t;else var t="<span>- blev tilføjet til kurven.</span>";var r="<h3>"+e+"</h3>"+t;$(i).append(r),setTimeout(function(){n()},100),setTimeout(function(){$(i).html(""),$(i).css({"z-index":-1e3})},2e3)}function setMenuHeight(){setTimeout(function(){var e=$("body").find(".main-menu"),t=($("body").find(".site-content"),$(".site-content").height());$(e).css({height:t-325+"px"})},1e3)}jQuery(document).on("ready",function(){$=jQuery,new CartController,new MenuController,new embedVidController,new productTextController,new singleProductHeightController,new removeFromCartController,new reserveFormController,new scrollHeaderController,new fpVideoController,new fpBackgroundController,productsController(),$("form :input").focus(function(){$("label[for='"+this.id+"']").addClass("focus")}).blur(function(){$("label").removeClass("focus")})});var documentHeight,fpBackgroundController=function(){function e(){a(1),$(d).velocity({opacity:1},{duration:500,delay:0,display:"block",easing:[.24,.63,.5,.99]});for(var e=2;7>e;e++){var n=$("<img />").attr("src",site.theme_path+"/img/bg/bg"+e+".png").attr("class","bg-"+e);$(c).append(n)}setTimeout(t,8e3)}function t(){var e=o(),n=e+1;n>6&&(n=1);var s=$(c).find("img.bg-"+e),d=$(c).find("img.bg-"+n);window.requestAnimationFrame(i(d)),window.requestAnimationFrame(r(s)),a(n),setTimeout(t,4e3)}function i(e){$(e).velocity({opacity:1},{duration:1e3,delay:0,display:"block",easing:[.24,.63,.5,.99]})}function r(e){$(e).velocity({opacity:0},{duration:1e3,delay:0,display:"block",easing:[.24,.63,.5,.99]})}function o(){return n=s,n}function a(e){s=e}var s,c=$("body").find(".bg-container"),d=$(c).find("img");c&&d&&d[0]&&(d[0].complete?e():d.load(e))},fpVideoController=function(){function e(){i.addEventListener("canplaythrough",t),i.addEventListener("ended",n)}function t(){$(r).addClass("hidden"),$(o).velocity({height:d},{duration:700,delay:0,easing:[.24,.63,.5,.99]}),$(a).velocity({opacity:1},{duration:700,delay:0,display:"block",easing:[.24,.63,.5,.99]}),$(s).velocity({top:d+30},{duration:700,delay:0,display:"block",easing:[.24,.63,.5,.99]}),setTimeout(function(){i.paused&&i.play()},700)}function n(){$(a).velocity({opacity:0},{duration:300,delay:0,display:"block",easing:[.24,.63,.5,.99]}),$(o).velocity({height:60},{duration:1e3,delay:400,easing:[.24,.63,.5,.99]}),$(s).velocity({top:90},{duration:1e3,delay:400,display:"block",easing:[.24,.63,.5,.99]}),scrollTo(0)}var i=document.getElementById("frontpage-video");if(i){var r=$("body").find(".spinner"),o=$("body").find(".front-video-container"),a=$(o).find("#frontpage-video"),s=$("body").find(".moving-content"),c=$(window).width(),d=c/100*80/16*9;e()}},scrollHeaderController=function(){function e(){t=$(window).scrollTop(),t>500&&$(n).addClass("hidden"),500>t&&$(n).removeClass("hidden")}var t,n=$("body").find(".header-link-row");$(window).width();$(window).on("scroll",e)},reserveFormController=function(){function e(){$(o).on("blur",function(){var e=$(this).val();if(0===e.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==e.length){var t=validateEmail(e);t||$(this).hasClass("error")||$(this).addClass("error"),t&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function t(){$(a).on("blur",function(){var e=$(this).val();if(0===e.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==e.length){var t=validateInput(e);t||$(this).hasClass("error")||$(this).addClass("error"),t&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function n(){$(s).on("blur",function(){var e=$(this).val();if(0===e.length)return void($(this).hasClass("error")&&$(this).removeClass("error"));if(0!==e.length){var t=validateNumber(e);t||$(this).hasClass("error")||$(this).addClass("error"),t&&$(this).hasClass("error")&&$(this).removeClass("error")}})}function i(){function e(){return dataObject.customer_html="<h4>Navn:</h4><h2>"+inputArray[0].value+"</h2>",dataObject.customer_html+="<h4>TLF:</h4><h2>"+inputArray[1].value+"</h2>",dataObject.customer_html+="<h4>EMAIL:</h4><h2>"+inputArray[2].value+"</h2>",dataObject.customer_email=inputArray[2].value,dataObject}function t(e){var t=JSON.stringify(e);$.ajax({url:site.ajax_url+"?action=reserve",type:"POST",data:t,success:function(e){var t=$.trim(e);console.log(t),"Success"===t&&n()},error:function(e){console.log(e)}})}function n(){$(r).velocity({opacity:[0,1]},{duration:300,delay:0,easing:[.24,.63,.5,.99],display:"none"}),$(validSuccess).velocity({opacity:[1,0]},{duration:300,delay:350,easing:[.24,.63,.5,.99],display:"block"}),setTimeout(function(){window.location.href=window.location.href},1e3)}$(c).on("click",function(n){n.preventDefault(),inputs=$(r).find("input"),validSuccess=$("body").find(".validation.success"),dataObject={},inputArray=[],$(inputs).each(function(e,t){if(!$(t).hasClass("error")&&0!==$(t).val().length){var n={name:t.name,value:$(t).val()};inputArray.push(n)}});var i=e();t(i)})}var r=$("body").find("form.reserve"),o=$(r).find("input[type=email]"),a=$(r).find("input[type=text].name"),s=$(r).find("input[type=text].phone"),c=$(r).find(".submit-btn > a");n(),e(),t(),i()},productTextController=function(){function e(){$(t).toggleClass("off"),$(n).toggleClass("off"),$(i).toggleClass("off")}var t=$("body").find(".text-icon"),n=$("body").find(".product-left"),i=$("body").find(".product-right");$(t).on("click",function(){e()}),setTimeout(e,800)},singleProductHeightController=function(){function e(){var e=$(".product-content").height(),t=$(".main-image img").height();e&&e>t&&($(".main-image").css({height:e+"px"}),setMenuHeight())}var t=$(".main-image img");$("body").find("iframe");t&&t[0]&&(t[0].complete?e():t.load(e))},embedVidController=function(){function e(){var e=$(t).attr("data-href");if(-1!==e.indexOf("="))var n=e.split("="),i=n[1];else{var n=e.split("/");i=n[3]}var r=$(window).width(),o=r/16*9,a='<iframe width="'+r+'" height="'+o+'" src="https://www.youtube.com/embed/'+i+'?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>';$(t).html(a)}var t=$("body").find(".youtube-frame");t.length>0&&e()},gridCartController=function(){var e=$("body").find(".add-button"),t=$("body").find(".cart-contents");$(e).each(function(e,n){var i=$(this).attr("data-href"),r=$(this).attr("data-title");$(this).on("click",function(e){e.preventDefault();var n=$("body").find(".cart-icon h5"),o=parseInt($("body").find(".cart-icon h5").text()),a=site.ajax_url+"?action=sinus_add",s={product_id:i};data=JSON.stringify(s),$.ajax({url:a,type:"POST",data:data,dataType:"html",success:function(e){var i=o+1;n.html(i),$(t).html(e),shopMsg(r),setTimeout(function(){window.location.href=window.location.href},1e3)},error:function(e){console.log("error -",e)}})})})},removeFromCartController=function(){var e=$("body").find(".cart-contents"),t=$(e).find(".remove-icon");$(t).each(function(t,n){var i=$(this).attr("data-id"),r=$(this).siblings(".elem-qty-total"),o=parseInt($(r).attr("data-qty"));$(this).on("click",function(){console.log(o,i);var t=$("body").find(".cart-icon h5"),n=parseInt($("body").find(".cart-icon h5").text()),r=site.ajax_url+"?action=sinus_remove",a={product_id:i,quantity:o};data=JSON.stringify(a),$.ajax({url:r,type:"POST",data:data,dataType:"html",success:function(i){var r=n-o;t.html(r),$(e).html(i),window.location.href=window.location.href},error:function(e){console.log("error -",e)}})})})},MenuController=function(){function e(){$(a).hasClass("hidden")?($(a).removeClass("hidden"),$(this).addClass("open"),scrollTo("0px"),t(),i()):($(a).addClass("hidden"),$(this).removeClass("open"),n())}function t(){var e=$(l).css("right"),t=$(d).css("right"),n=$(u).css("right"),i=parseInt(e.replace("px","")),r=parseInt(t.replace("px","")),o=parseInt(n.replace("px",""));$(l).velocity({right:i+230+"px"},{duration:400,delay:100,easing:[.24,.63,.5,.99]}),$(d).velocity({right:r+230+"px"},{duration:400,delay:0,easing:[.24,.63,.5,.99]}),$(u).velocity({right:o+230+"px"},{duration:400,delay:150,easing:[.24,.63,.5,.99]})}function n(){$(l).velocity({right:90},{duration:300,delay:200,easing:[.24,.63,.5,.99]}),$(d).velocity({right:165},{duration:300,delay:300,easing:[.24,.63,.5,.99]}),$(u).velocity({right:80},{duration:300,delay:250,easing:[.24,.63,.5,.99]})}function i(){$(s).on("click",function(e){e.preventDefault();var t=$(this).find("a"),n=$(t).attr("href");$(s).each(function(e,t){var n=20*e;$(t).velocity({opacity:[0,1]},{duration:100,delay:n,easing:"easeInOutSine"})}),$(c).each(function(e,t){var n=30*e;$(t).velocity({opacity:[0,1]},{duration:100,delay:n,easing:"easeInOutSine"})}),setTimeout(r(n),1200)})}function r(e){setTimeout(function(){$(o).removeClass("open"),$(a).addClass("hidden"),n()},1e3),setTimeout(function(){window.location.href=e},1300)}var o=$("body").find(".menu-icon"),a=$("body").find(".main-menu"),s=$(a).find("li"),c=$(a).find("h3"),d=$("body").find(".search-form"),l=$("body").find(".cart-icon"),u=$("body").find(".cart-modal.cart-contents");$(window).width();setMenuHeight(),$(o).on("click",e)},CartController=function(){var e=$("body").find(".cart-icon"),t=$("body").find(".cart-modal.cart-contents");$(e).on("click",function(e){$(t).toggleClass("hidden")})};
//# sourceMappingURL=main.min.js.map
